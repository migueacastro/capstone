import{g as t}from"./entry.C_b26GiN.js";import{e as i}from"./public.Cb3FOUtJ.js";import{w as o}from"./index.CQWoZMGu.js";const r=o({name:null,email:null,is_superuser:null,is_staff:null}),l=o(!1),e=async()=>{try{const a=await fetch(`${i.PUBLIC_BACKEND_URL}/user`,{headers:{"Content-Type":"application/json"},credentials:"include"});if(a.ok){const s=await a.json();return await u(s),!0}else return await t("/login"),!1}catch{return await t("/login"),!1}},d=async a=>{await c(),await e(),a.is_staff||await t("/")},h=async a=>{await c(),await e(),(!(a.is_superuser&&a.is_staff)||!await e())&&await t("/")},c=async()=>{try{const a=await fetch(`${i.PUBLIC_BACKEND_URL}/user`,{headers:{"Content-Type":"application/json"},credentials:"include"});if(a.ok){const s=await a.json();u(s)}else n()}catch{n()}},u=a=>{r.set(a),l.set(!0)},n=()=>{r.set({name:null,email:null,is_staff:!1,is_superuser:!1}),l.set(!1)};export{l as a,n as b,c,h as d,d as e,e as o,r as u};
