var Ke=Object.defineProperty;var Qe=(s,e,t)=>e in s?Ke(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var _=(s,e,t)=>Qe(s,typeof e!="symbol"?e+"":e,t);import{s as se,e as v,c as k,b as H,f as p,o as y,i as A,n as U,k as _e,t as W,d as z,h as m,j as me,l as Xe,a as L,g as $,x as G,u as Ze,p as xe,q as et,v as ye,E as Pe,D as Se,A as tt,B as Ne,C as ke,z as rt,w as ve,m as K,a4 as X,r as st,ao as Ee,H as lt,G as Be,I as nt}from"./scheduler.Cvxp15X3.js";import{S as le,i as ne,t as q,b as J,c as he,a as fe,m as de,g as He,e as Te,d as ge}from"./index.RxifS9Fo.js";import{e as Q}from"./each.CqMm39P8.js";import{g as it}from"./stores.Cxagy6uu.js";import{g as at}from"./stores.DkxrROnu.js";import"./ProgressBar.svelte_svelte_type_style_lang.dsa4NXrV.js";import{w as re,d as te}from"./index.CQWoZMGu.js";/* empty css                                                */import{g as Ae}from"./entry.C_b26GiN.js";import{p as ot}from"./stores.C1zgh52b.js";function ct(s){let e;return{c(){e=W("No entries found")},l(t){e=z(t,"No entries found")},m(t,r){A(t,e,r)},p:U,d(t){t&&p(e)}}}function ut(s){let e,t=s[0].start+"",r,l,n,i=s[0].end+"",c,a,u,o=s[0].total+"",w;return{c(){e=v("b"),r=W(t),l=W(`
		- `),n=v("b"),c=W(i),a=W(`
		/ `),u=v("b"),w=W(o)},l(f){e=k(f,"B",{});var h=H(e);r=z(h,t),h.forEach(p),l=z(f,`
		- `),n=k(f,"B",{});var D=H(n);c=z(D,i),D.forEach(p),a=z(f,`
		/ `),u=k(f,"B",{});var N=H(u);w=z(N,o),N.forEach(p)},m(f,h){A(f,e,h),m(e,r),A(f,l,h),A(f,n,h),m(n,c),A(f,a,h),A(f,u,h),m(u,w)},p(f,h){h&1&&t!==(t=f[0].start+"")&&me(r,t),h&1&&i!==(i=f[0].end+"")&&me(c,i),h&1&&o!==(o=f[0].total+"")&&me(w,o)},d(f){f&&(p(e),p(l),p(n),p(a),p(u))}}}function ht(s){let e;function t(n,i){return n[0].total>0?ut:ct}let r=t(s),l=r(s);return{c(){e=v("aside"),l.c(),this.h()},l(n){e=k(n,"ASIDE",{class:!0});var i=H(e);l.l(i),i.forEach(p),this.h()},h(){y(e,"class","text-sm leading-8 mr-6")},m(n,i){A(n,e,i),l.m(e,null)},p(n,[i]){r===(r=t(n))&&l?l.p(n,i):(l.d(1),l=r(n),l&&(l.c(),l.m(e,null)))},i:U,o:U,d(n){n&&p(e),l.d()}}}function ft(s,e,t){let r,{handler:l}=e;const n=l.getRowCount();return _e(s,n,i=>t(0,r=i)),s.$$set=i=>{"handler"in i&&t(2,l=i.handler)},[r,n,l]}class dt extends le{constructor(e){super(),ne(this,e,ft,ht,se,{handler:2})}}function gt(s){let e;return{c(){e=W("↕")},l(t){e=z(t,"↕")},m(t,r){A(t,e,r)},p:U,d(t){t&&p(e)}}}function pt(s){let e;function t(n,i){if(n[2].direction==="asc")return mt;if(n[2].direction==="desc")return _t}let r=t(s),l=r&&r(s);return{c(){l&&l.c(),e=ye()},l(n){l&&l.l(n),e=ye()},m(n,i){l&&l.m(n,i),A(n,e,i)},p(n,i){r!==(r=t(n))&&(l&&l.d(1),l=r&&r(n),l&&(l.c(),l.m(e.parentNode,e)))},d(n){n&&p(e),l&&l.d(n)}}}function _t(s){let e;return{c(){e=W("↑")},l(t){e=z(t,"↑")},m(t,r){A(t,e,r)},d(t){t&&p(e)}}}function mt(s){let e;return{c(){e=W("↓")},l(t){e=z(t,"↓")},m(t,r){A(t,e,r)},d(t){t&&p(e)}}}function bt(s){let e,t,r,l,n,i;const c=s[5].default,a=Xe(c,s,s[4],null);function u(f,h){return f[2].identifier===f[1]?pt:gt}let o=u(s),w=o(s);return{c(){e=v("th"),t=v("div"),a&&a.c(),r=L(),w.c(),this.h()},l(f){e=k(f,"TH",{class:!0});var h=H(e);t=k(h,"DIV",{class:!0});var D=H(t);a&&a.l(D),r=$(D),w.l(D),D.forEach(p),h.forEach(p),this.h()},h(){y(t,"class","flex h-full items-center justify-start gap-x-2"),y(e,"class","cursor-pointer select-none")},m(f,h){A(f,e,h),m(e,t),a&&a.m(t,null),m(t,r),w.m(t,null),l=!0,n||(i=G(e,"click",s[6]),n=!0)},p(f,[h]){a&&a.p&&(!l||h&16)&&Ze(a,c,f,f[4],l?et(c,f[4],h,null):xe(f[4]),null),o===(o=u(f))&&w?w.p(f,h):(w.d(1),w=o(f),w&&(w.c(),w.m(t,null)))},i(f){l||(q(a,f),l=!0)},o(f){J(a,f),l=!1},d(f){f&&p(e),a&&a.d(f),w.d(),n=!1,i()}}}function wt(s,e,t){let r,{$$slots:l={},$$scope:n}=e,{handler:i}=e,{orderBy:c}=e;const a=i.getSort();_e(s,a,o=>t(2,r=o));const u=()=>i.sort(c);return s.$$set=o=>{"handler"in o&&t(0,i=o.handler),"orderBy"in o&&t(1,c=o.orderBy),"$$scope"in o&&t(4,n=o.$$scope)},[i,c,r,a,n,l,u]}class vt extends le{constructor(e){super(),ne(this,e,wt,bt,se,{handler:0,orderBy:1})}}function kt(s){let e,t,r,l;return{c(){e=v("th"),t=v("input"),this.h()},l(n){e=k(n,"TH",{});var i=H(e);t=k(i,"INPUT",{class:!0,type:!0,placeholder:!0}),i.forEach(p),this.h()},h(){y(t,"class","input text-sm w-full"),y(t,"type","text"),y(t,"placeholder","Filter")},m(n,i){A(n,e,i),m(e,t),Pe(t,s[2]),r||(l=[G(t,"input",s[3]),G(t,"input",s[4])],r=!0)},p(n,[i]){i&4&&t.value!==n[2]&&Pe(t,n[2])},i:U,o:U,d(n){n&&p(e),r=!1,Se(l)}}}function yt(s,e,t){let{handler:r}=e,{filterBy:l}=e,n;function i(){n=this.value,t(2,n)}const c=()=>{l&&r.filter(n,l)};return s.$$set=a=>{"handler"in a&&t(0,r=a.handler),"filterBy"in a&&t(1,l=a.filterBy)},[r,l,n,i,c]}class Je extends le{constructor(e){super(),ne(this,e,yt,kt,se,{handler:0,filterBy:1})}}function Pt(s){let e,t,r;return{c(){e=v("input"),this.h()},l(l){e=k(l,"INPUT",{class:!0,type:!0,placeholder:!0}),this.h()},h(){y(e,"class","input sm:w-64 w-36"),y(e,"type","search"),y(e,"placeholder","Search...")},m(l,n){A(l,e,n),Pe(e,s[1]),t||(r=[G(e,"input",s[2]),G(e,"input",s[3])],t=!0)},p(l,[n]){n&2&&e.value!==l[1]&&Pe(e,l[1])},i:U,o:U,d(l){l&&p(e),t=!1,Se(r)}}}function Ct(s,e,t){let{handler:r}=e,l;function n(){l=this.value,t(1,l)}const i=()=>r.search(l);return s.$$set=c=>{"handler"in c&&t(0,r=c.handler)},[r,l,n,i]}class St extends le{constructor(e){super(),ne(this,e,Ct,Pt,se,{handler:0})}}function De(s,e,t){const r=s.slice();return r[5]=e[t],r}function Oe(s){let e,t=s[5]+"",r,l;return{c(){e=v("option"),r=W(t),l=L(),this.h()},l(n){e=k(n,"OPTION",{});var i=H(e);r=z(i,t),l=$(i),i.forEach(p),this.h()},h(){e.__value=s[5],Pe(e,e.__value)},m(n,i){A(n,e,i),m(e,r),m(e,l)},p:U,d(n){n&&p(e)}}}function Rt(s){let e,t,r,l,n,i=Q(s[2]),c=[];for(let a=0;a<i.length;a+=1)c[a]=Oe(De(s,i,a));return{c(){e=v("aside"),t=W(`Show
	`),r=v("select");for(let a=0;a<c.length;a+=1)c[a].c();this.h()},l(a){e=k(a,"ASIDE",{class:!0});var u=H(e);t=z(u,`Show
	`),r=k(u,"SELECT",{class:!0});var o=H(r);for(let w=0;w<c.length;w+=1)c[w].l(o);o.forEach(p),u.forEach(p),this.h()},h(){y(r,"class","select ml-2"),s[0]===void 0&&tt(()=>s[4].call(r)),y(e,"class","flex place-items-center")},m(a,u){A(a,e,u),m(e,t),m(e,r);for(let o=0;o<c.length;o+=1)c[o]&&c[o].m(r,null);Ne(r,s[0],!0),l||(n=G(r,"change",s[4]),l=!0)},p(a,[u]){if(u&4){i=Q(a[2]);let o;for(o=0;o<i.length;o+=1){const w=De(a,i,o);c[o]?c[o].p(w,u):(c[o]=Oe(w),c[o].c(),c[o].m(r,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=i.length}u&5&&Ne(r,a[0])},i:U,o:U,d(a){a&&p(e),ke(c,a),l=!1,n()}}}function Et(s,e,t){let r,{handler:l}=e;const n=l.getRowsPerPage();_e(s,n,a=>t(0,r=a));const i=[5,10,20,50,100];function c(){r=rt(this),n.set(r),t(2,i)}return s.$$set=a=>{"handler"in a&&t(3,l=a.handler)},[r,n,i,l,c]}class Ht extends le{constructor(e){super(),ne(this,e,Et,Rt,se,{handler:3})}}function Fe(s,e,t){const r=s.slice();return r[12]=e[t],r}function Ie(s){let e,t=(s[12]??"...")+"",r,l,n;function i(){return s[8](s[12])}return{c(){e=v("button"),r=W(t),this.h()},l(c){e=k(c,"BUTTON",{type:!0,class:!0});var a=H(e);r=z(a,t),a.forEach(p),this.h()},h(){y(e,"type","button"),y(e,"class","hover:variant-soft-primary"),K(e,"active",s[1]===s[12]),K(e,"ellipse",s[12]===null)},m(c,a){A(c,e,a),m(e,r),l||(n=G(e,"click",i),l=!0)},p(c,a){s=c,a&4&&t!==(t=(s[12]??"...")+"")&&me(r,t),a&6&&K(e,"active",s[1]===s[12]),a&4&&K(e,"ellipse",s[12]===null)},d(c){c&&p(e),l=!1,n()}}}function Tt(s){let e,t,r="←",l,n,i,c="→",a,u,o,w="←",f,h,D="→",N,Z,E=Q(s[2]),C=[];for(let d=0;d<E.length;d+=1)C[d]=Ie(Fe(s,E,d));return{c(){e=v("section"),t=v("button"),t.textContent=r,l=L();for(let d=0;d<C.length;d+=1)C[d].c();n=L(),i=v("button"),i.textContent=c,a=L(),u=v("section"),o=v("button"),o.textContent=w,f=L(),h=v("button"),h.textContent=D,this.h()},l(d){e=k(d,"SECTION",{class:!0});var S=H(e);t=k(S,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ve(t)!=="svelte-4wopud"&&(t.textContent=r),l=$(S);for(let j=0;j<C.length;j+=1)C[j].l(S);n=$(S),i=k(S,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ve(i)!=="svelte-qpr6ty"&&(i.textContent=c),S.forEach(p),a=$(d),u=k(d,"SECTION",{class:!0});var B=H(u);o=k(B,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ve(o)!=="svelte-1o27j1k"&&(o.textContent=w),f=$(B),h=k(B,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ve(h)!=="svelte-r4bvtf"&&(h.textContent=D),B.forEach(p),this.h()},h(){y(t,"type","button"),y(t,"class","hover:variant-soft-primary"),K(t,"disabled",s[1]===1),y(i,"type","button"),y(i,"class","hover:variant-soft-primary"),K(i,"disabled",s[1]===s[3]),y(e,"class","btn-group variant-ghost-surface [&>*+*]:border-surface-500 h-10 hidden lg:block"),y(o,"type","button"),y(o,"class","btn variant-ghost-surface mr-2 mb-2 hover:variant-soft-primary"),K(o,"disabled",s[1]===1),y(h,"type","button"),y(h,"class","btn variant-ghost-surface mb-2 hover:variant-soft-primary"),K(h,"disabled",s[1]===s[3]),y(u,"class","lg:hidden")},m(d,S){A(d,e,S),m(e,t),m(e,l);for(let B=0;B<C.length;B+=1)C[B]&&C[B].m(e,null);m(e,n),m(e,i),A(d,a,S),A(d,u,S),m(u,o),m(u,f),m(u,h),N||(Z=[G(t,"click",s[7]),G(i,"click",s[9]),G(o,"click",s[10]),G(h,"click",s[11])],N=!0)},p(d,[S]){if(S&2&&K(t,"disabled",d[1]===1),S&7){E=Q(d[2]);let B;for(B=0;B<E.length;B+=1){const j=Fe(d,E,B);C[B]?C[B].p(j,S):(C[B]=Ie(j),C[B].c(),C[B].m(e,n))}for(;B<C.length;B+=1)C[B].d(1);C.length=E.length}S&10&&K(i,"disabled",d[1]===d[3]),S&2&&K(o,"disabled",d[1]===1),S&10&&K(h,"disabled",d[1]===d[3])},i:U,o:U,d(d){d&&(p(e),p(a),p(u)),ke(C,d),N=!1,Se(Z)}}}function Nt(s,e,t){let r,l,n,{handler:i}=e;const c=i.getPageNumber();_e(s,c,N=>t(1,r=N));const a=i.getPageCount();_e(s,a,N=>t(3,n=N));const u=i.getPages({ellipsis:!0});_e(s,u,N=>t(2,l=N));const o=()=>i.setPage("previous"),w=N=>i.setPage(N),f=()=>i.setPage("next"),h=()=>i.setPage("previous"),D=()=>i.setPage("next");return s.$$set=N=>{"handler"in N&&t(0,i=N.handler)},[i,r,l,n,c,a,u,o,w,f,h,D]}class Bt extends le{constructor(e){super(),ne(this,e,Nt,Tt,se,{handler:0})}}async function Le(s){return await(await fetch(s)).json()}const Ve=s=>s==null||s==="",At=s=>!Ve(s),pe=(s,e)=>{const t=e??s.toString();if(typeof s=="string")return{callback:r=>r[s],identifier:t,key:s};if(typeof s=="function")return{callback:s,identifier:t,key:void 0};throw new Error(`Invalid field argument: ${String(s)}`)},be={isLike:(s,e)=>Y(s).indexOf(Y(e))>-1,isNotLike:(s,e)=>Y(s).indexOf(Y(e))===-1,startsWith:(s,e)=>Y(s).startsWith(Y(e)),endsWith:(s,e)=>Y(s).endsWith(Y(e)),isEqualTo:(s,e)=>Y(s)===Y(e),isNotEqualTo:(s,e)=>Y(s)!==Y(e),isGreaterThan:(s,e)=>ue(s)?!1:s>e,isGreaterThanOrEqualTo:(s,e)=>ue(s)?!1:s>=e,isLessThan:(s,e)=>ue(s)?!1:s<e,isLessThanOrEqualTo:(s,e)=>ue(s)?!1:s<=e,isBetween:(s,e)=>{if(ue(s))return!1;const[t,r]=e;return s>=t&&s<=r},isStrictlyBetween:(s,e)=>{if(ue(s))return!1;const[t,r]=e;return s>t&&s<r},isTrue:(s,e)=>s===!0,isFalse:(s,e)=>s===!1,isNull:(s,e)=>s==null,isNotNull:(s,e)=>s!=null,whereIn:(s,e=[])=>{if(ue(s)||e.length===0)return!1;for(const{value:t,comparator:r}of e)if(r(s,t))return!0;return!1},contains:(s,e)=>be.isLike(s,e)};function Y(s=null){return String(s).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function ue(s){if(s==null)return!0}class Dt{constructor(){_(this,"events",{change:[],clearFilters:[],clearSearch:[]});_(this,"triggerChange",re(0))}add(e,t){this.events[e].push(t)}trigger(e){for(const t of this.events[e])t();e==="change"&&this.triggerChange.update(t=>t+1)}}class Ot{constructor(e,t){_(this,"event");_(this,"rowsPerPage");_(this,"pageNumber");_(this,"search");_(this,"filters");_(this,"filterCount");_(this,"rawRows");_(this,"filteredRows");_(this,"pagedRows");_(this,"rowCount");_(this,"pages");_(this,"pagesWithEllipsis");_(this,"pageCount");_(this,"sort");_(this,"selected");_(this,"selectScope");_(this,"isAllSelected");this.event=new Dt,this.rowsPerPage=re(t.rowsPerPage),this.pageNumber=re(1),this.search=re({}),this.filters=re([]),this.filterCount=this.createFilterCount(),this.rawRows=re(e),this.filteredRows=this.createFilteredRows(),this.pagedRows=this.createPagedRows(),this.rowCount=this.createRowCount(),this.pages=this.createPages(),this.pagesWithEllipsis=this.createPagesWithEllipsis(),this.pageCount=this.createPageCount(),this.sort=re({}),this.selected=re([]),this.selectScope=re("all"),this.isAllSelected=this.createIsAllSelected()}createFilterCount(){return te(this.filters,e=>e.length)}createFilteredRows(){return te([this.rawRows,this.search,this.filters],([e,t,r])=>(t.value&&(e=e.filter(l=>(t.scope??Object.keys(l)).map(c=>{const{callback:a}=pe(c);return a}).some(c=>this.match(c(l),t.value))),this.pageNumber.set(1),this.selected.set([]),this.event.trigger("change")),r.length>0&&(r.forEach(l=>e=e.filter(n=>{const i=l.callback(n);return this.match(i,l.value,l.comparator)})),this.pageNumber.set(1),this.selected.set([]),this.event.trigger("change")),e))}match(e,t,r=null){if(Ve(t))return!0;if(!e&&r)return r(e,t);if(e){if(typeof e=="object")return Object.keys(e).some(l=>this.match(e[l],t,r))}else return be.isLike(e,t);return r?r(e,t):be.isLike(e,t)}createPagedRows(){return te([this.filteredRows,this.rowsPerPage,this.pageNumber],([e,t,r])=>t?e.slice((r-1)*t,r*t):e)}createRowCount(){return te([this.filteredRows,this.pageNumber,this.rowsPerPage],([e,t,r])=>{const l=e.length;return r?{total:l,start:t*r-r+1,end:Math.min(t*r,e.length)}:{total:l,start:1,end:l}})}createPages(){return te([this.rowsPerPage,this.filteredRows],([e,t])=>e?Array.from(Array(Math.ceil(t.length/e))).map((l,n)=>n+1):[1])}createPagesWithEllipsis(){return te([this.pages,this.pageNumber],([e,t])=>{if(e.length<=7)return e;const r=null,l=1,n=e.length;return t<=4?[...e.slice(0,5),r,n]:t<e.length-3?[l,r,...e.slice(t-2,t+1),r,n]:[l,r,...e.slice(e.length-5,e.length)]})}createPageCount(){return te(this.pages,e=>e.length)}createIsAllSelected(){return te([this.selected,this.pagedRows,this.filteredRows,this.selectScope],([e,t,r,l])=>{const n=l==="currentPage"?t.length:r.length;return n===e.length&&n!==0})}}class Ft{constructor(e){_(this,"rawRows");_(this,"event");_(this,"sort");_(this,"backup");this.rawRows=e.rawRows,this.event=e.event,this.sort=e.sort,this.backup=[]}set(e=null,t){if(!e)return;const r=X(this.sort),{identifier:l}=pe(e,t);r.identifier!==l&&this.sort.update(n=>n.direction=null),r.direction===null||r.direction==="desc"?this.asc(e,t):r.direction==="asc"&&this.desc(e,t)}asc(e,t){if(!e)return;const{identifier:r,callback:l,key:n}=pe(e,t);this.sort.set({identifier:r,callback:l,direction:"asc",key:n}),this.rawRows.update(i=>(i.sort((c,a)=>{const[u,o]=[l(c),l(a)];return u===o?0:u===null?1:o===null?-1:typeof u=="boolean"?u===!1?1:-1:typeof u=="string"?u.localeCompare(o):typeof u=="number"?u-o:typeof u=="object"?JSON.stringify(u).localeCompare(JSON.stringify(o)):String(u).localeCompare(String(o))}),i)),this.log({identifier:r,callback:l,direction:"asc"}),this.event.trigger("change")}desc(e,t){if(!e)return;const{identifier:r,callback:l,key:n}=pe(e,t);this.sort.set({identifier:r,callback:l,direction:"desc",key:n}),this.rawRows.update(i=>(i.sort((c,a)=>{const[u,o]=[l(c),l(a)];return u===o?0:u===null?1:o===null?-1:typeof o=="boolean"?o===!1?1:-1:typeof o=="string"?o.localeCompare(u):typeof o=="number"?o-u:typeof o=="object"?JSON.stringify(o).localeCompare(JSON.stringify(u)):String(o).localeCompare(String(u))}),i)),this.log({identifier:r,callback:l,direction:"desc"}),this.event.trigger("change")}apply(e=null){if(e)switch(e.direction){case"asc":return this.asc(e.orderBy);case"desc":return this.desc(e.orderBy);default:return this.set(e.orderBy)}else this.restore()}clear(){this.backup=[],this.sort.set({})}define(e,t="asc"){if(!e)return;const{identifier:r,callback:l,key:n}=pe(e);this.sort.set({identifier:r,callback:l,direction:t,key:n})}restore(){for(const e of this.backup){const{key:t,callback:r,direction:l}=e,n=t??r;this[l](n)}}log(e){if(this.backup=this.backup.filter(t=>t.identifier!==e.identifier),this.backup.length>=3){const[t,r,l]=this.backup;this.backup=[r,l,e]}else this.backup=[...this.backup,e]}}class It{constructor(e){_(this,"filteredRows");_(this,"pagedRows");_(this,"selected");_(this,"scope");_(this,"isAllSelected");_(this,"event");this.filteredRows=e.filteredRows,this.pagedRows=e.pagedRows,this.selected=e.selected,this.scope=e.selectScope,this.isAllSelected=e.isAllSelected,this.event=e.event}set(e){const t=X(this.selected);t.includes(e)?this.selected.set(t.filter(r=>r!==e)):this.selected.set([e,...t])}all(e=null){if(X(this.isAllSelected))return this.clear();const r=X(this.scope),l=r==="currentPage"?X(this.pagedRows):X(this.filteredRows);r==="currentPage"&&this.event.add("change",()=>this.clear()),e?this.selected.set(l.map(n=>n[e])):this.selected.set(l)}clear(){this.selected.set([])}}class Lt{constructor(e){_(this,"pageNumber");_(this,"rowCount");_(this,"rowsPerPage");_(this,"event");this.pageNumber=e.pageNumber,this.rowCount=e.rowCount,this.rowsPerPage=e.rowsPerPage,this.event=e.event}goto(e){this.pageNumber.update(t=>{const r=X(this.rowsPerPage);if(r){const l=X(this.rowCount).total;e>=1&&e<=Math.ceil(l/r)&&(t=e,this.event.trigger("change"))}return t})}previous(){const e=X(this.pageNumber)-1;this.goto(e)}next(){const e=X(this.pageNumber)+1;this.goto(e)}}class $t{constructor(e){_(this,"search");_(this,"event");this.search=e.search,this.event=e.event}set(e,t=null){this.search.update(r=>(r={value:e??"",scope:t??null},r))}clear(){this.search.set({value:null,scope:null}),this.event.trigger("change"),this.event.trigger("clearSearch")}}class jt{constructor(e){_(this,"filters");_(this,"event");_(this,"collection");this.filters=e.filters,this.event=e.event}set(e,t,r=null,l){const{callback:n,identifier:i,key:c}=pe(t,l),a={value:e,identifier:i,callback:n,comparator:r,key:c};this.filters.update(u=>(u=u.filter(o=>o.identifier!==i),At(e)&&u.push(a),u))}clear(){this.filters.set([]),this.event.trigger("change"),this.event.trigger("clearFilters")}get(){return this.collection?this.collection:(this.collection=this.createCollection(),this.collection)}createCollection(){return te(this.filters,e=>e.map(({value:t,callback:r,key:l,comparator:n})=>({value:t,filterBy:l??r,check:n?n.name:"isLike"})))}}class Mt{constructor(e,t,r){_(this,"filterHandler");_(this,"filterBy");_(this,"uid");_(this,"comparator");_(this,"callback");this.filterHandler=e,this.filterBy=t,this.uid="f_"+Math.random().toString(28).substring(2),this.comparator=r??be.isLike,this.callback=()=>null}set(e,t){t&&(this.comparator=t),this.filterHandler.set(e,this.filterBy,this.comparator,this.uid)}clear(){this.callback(),this.filterHandler.set(void 0,this.filterBy)}on(e,t){this.callback=t}}class Ut{constructor(e,t){_(this,"filterHandler");_(this,"criteria");_(this,"filterBy");_(this,"selected");this.filterHandler=e,this.filterBy=t,this.criteria=[],this.selected=re([])}set(e,t=be.isLike){if(this.criteria.find(r=>r.value===e)?this.criteria=this.criteria.filter(r=>r.value!==e):this.criteria=[{value:e,comparator:t},...this.criteria],this.criteria.length===0)return this.clear();this.filterHandler.set(this.criteria,this.filterBy,be.whereIn),this.selected.set(this.criteria.map(r=>r.value))}getSelected(){return this.selected}clear(){this.criteria=[],this.selected.set([]),this.filterHandler.set(void 0,this.filterBy,be.whereIn)}}class qt{constructor(e,t,r){_(this,"rawRows");_(this,"filteredRows");_(this,"callback");_(this,"precision");this.rawRows=e.rawRows,this.filteredRows=e.filteredRows,this.callback=pe(t).callback,this.precision=r.precision}distinct(e=null){const r=X(this.rawRows).map(i=>this.callback(i)),n=(e?e(r):r).reduce((i,c)=>(i[c]=(i[c]??0)+1,i),{});return Object.entries(n).map(([i,c])=>({value:i,count:c}))}avg(e=null){return te(this.filteredRows,t=>{if(t.length===0)return 0;const r=t.map(n=>this.callback(n)).filter(Boolean),l=e?e(r):r;return this.round(l.reduce((n,i)=>n+i,0)/l.length)})}sum(e=null){return te(this.filteredRows,t=>{const r=t.map(n=>this.callback(n)),l=e?e(r):r;return this.round(l.reduce((n,i)=>n+i,0))})}bounds(e=null){const r=X(this.rawRows).map(n=>this.callback(n)),l=e?e(r):r;return[Math.min(...l.filter(Boolean)),Math.max(...l.filter(Boolean))]}setPrecision(e){this.precision=e}round(e){if(this.precision===0)return Math.round(e);const t=Math.pow(10,this.precision);return Math.round((e+Number.EPSILON)*t)/t}}class Re{constructor(e=[],t={rowsPerPage:null}){_(this,"context");_(this,"sortHandler");_(this,"selectHandler");_(this,"pageHandler");_(this,"searchHandler");_(this,"filterHandler");_(this,"i18n");this.i18n=this.translate(t.i18n),this.context=new Ot(e,t),this.sortHandler=new Ft(this.context),this.selectHandler=new It(this.context),this.pageHandler=new Lt(this.context),this.searchHandler=new $t(this.context),this.filterHandler=new jt(this.context)}setRows(e){this.context.rawRows.set(e),this.context.event.trigger("change"),this.applySort()}getRows(){return this.context.pagedRows}getAllRows(){return this.context.filteredRows}getRowCount(){return this.context.rowCount}getRowsPerPage(){return this.context.rowsPerPage}getPages(e={ellipsis:!1}){return e.ellipsis?this.context.pagesWithEllipsis:this.context.pages}getPageCount(){return this.context.pageCount}getPageNumber(){return this.context.pageNumber}setPage(e){switch(e){case"previous":return this.pageHandler.previous();case"next":return this.pageHandler.next();default:return this.pageHandler.goto(e)}}search(e,t=null){this.searchHandler.set(e,t)}clearSearch(){this.searchHandler.clear()}sort(e,t){this.setPage(1),this.sortHandler.set(e,t)}sortAsc(e,t){this.setPage(1),this.sortHandler.asc(e,t)}sortDesc(e,t){this.setPage(1),this.sortHandler.desc(e,t)}getSort(){return this.context.sort}applySort(e=null){this.sortHandler.apply(e)}defineSort(e,t){this.sortHandler.define(e,t)}clearSort(){this.sortHandler.clear()}filter(e,t,r=null){this.filterHandler.set(e,t,r)}getFilters(){return this.filterHandler.get()}createFilter(e,t){return new Mt(this.filterHandler,e,t)}createAdvancedFilter(e){return new Ut(this.filterHandler,e)}getFilterCount(){return this.context.filterCount}clearFilters(){this.filterHandler.clear()}select(e){this.selectHandler.set(e)}getSelected(){return this.context.selected}selectAll(e={}){this.context.selectScope.set(e.scope==="currentPage"?"currentPage":"all"),this.selectHandler.all(e.selectBy??null)}isAllSelected(){return this.context.isAllSelected}on(e,t){this.context.event.add(e,t)}createCalculation(e,t=null){return new qt(this.context,e,{precision:(t==null?void 0:t.precision)??2})}translate(e){return{search:"Search...",show:"Show",entries:"entries",filter:"Filter",rowCount:"Showing {start} to {end} of {total} entries",noRows:"No entries found",previous:"Previous",next:"Next",...e}}update(e){console.log("%c%s","color:#e65100;background:#fff3e0;font-size:12px;border-radius:4px;padding:4px;text-align:center;","DataHandler.update(data) method is deprecated. Please use DataHandler.setRows(data) instead"),this.context.rawRows.set(e)}applySorting(e=null){this.applySort(e)}getSorted(){return this.getSort()}getTriggerChange(){return this.context.event.triggerChange}}function $e(s,e,t){const r=s.slice();return r[19]=e[t],r}function je(s,e,t){const r=s.slice();return r[22]=e[t],r}function Me(s,e,t){const r=s.slice();return r[22]=e[t],r}function Ue(s,e,t){const r=s.slice();return r[22]=e[t],r}function Wt(s){let e=s[22].replace(/_name/g," ").replace(/_/g," ")+"",t;return{c(){t=W(e)},l(r){t=z(r,e)},m(r,l){A(r,t,l)},p(r,l){l&1&&e!==(e=r[22].replace(/_name/g," ").replace(/_/g," ")+"")&&me(t,e)},d(r){r&&p(t)}}}function qe(s){let e,t;return e=new vt({props:{handler:s[1],orderBy:s[22],$$slots:{default:[Wt]},$$scope:{ctx:s}}}),{c(){he(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,l){de(e,r,l),t=!0},p(r,l){const n={};l&2&&(n.handler=r[1]),l&1&&(n.orderBy=r[22]),l&536870913&&(n.$$scope={dirty:l,ctx:r}),e.$set(n)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){J(e.$$.fragment,r),t=!1},d(r){ge(e,r)}}}function zt(s){let e,t;return e=new Je({props:{handler:s[1],filterBy:s[22]}}),{c(){he(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,l){de(e,r,l),t=!0},p(r,l){const n={};l&2&&(n.handler=r[1]),l&1&&(n.filterBy=r[22]),e.$set(n)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){J(e.$$.fragment,r),t=!1},d(r){ge(e,r)}}}function Gt(s){let e,t;return e=new Je({}),{c(){he(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,l){de(e,r,l),t=!0},p:U,i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){J(e.$$.fragment,r),t=!1},d(r){ge(e,r)}}}function We(s){let e,t,r,l;const n=[Gt,zt],i=[];function c(a,u){return a[22]==="image"?0:1}return e=c(s),t=i[e]=n[e](s),{c(){t.c(),r=ye()},l(a){t.l(a),r=ye()},m(a,u){i[e].m(a,u),A(a,r,u),l=!0},p(a,u){let o=e;e=c(a),e===o?i[e].p(a,u):(He(),J(i[o],1,1,()=>{i[o]=null}),Te(),t=i[e],t?t.p(a,u):(t=i[e]=n[e](a),t.c()),q(t,1),t.m(r.parentNode,r))},i(a){l||(q(t),l=!0)},o(a){J(t),l=!1},d(a){a&&p(r),i[e].d(a)}}}function Jt(s){let e,t=s[19][s[22]]+"",r;return{c(){e=v("td"),r=W(t),this.h()},l(l){e=k(l,"TD",{class:!0});var n=H(e);r=z(n,t),n.forEach(p),this.h()},h(){y(e,"class","text-justify indent-2 text-wrap")},m(l,n){A(l,e,n),m(e,r)},p(l,n){n&9&&t!==(t=l[19][l[22]]+"")&&me(r,t)},d(l){l&&p(e)}}}function Vt(s){let e,t,r,l,n,i,c;return{c(){e=v("td"),t=v("button"),r=v("img"),this.h()},l(a){e=k(a,"TD",{});var u=H(e);t=k(u,"BUTTON",{class:!0});var o=H(t);r=k(o,"IMG",{class:!0,src:!0,alt:!0}),o.forEach(p),u.forEach(p),this.h()},h(){y(r,"class","mx-auto break-words lg:max-w-32 lg:h-[10vh] object-cover"),Be(r.src,l=s[19][s[22]])||y(r,"src",l),y(r,"alt",n=s[22]),y(t,"class","z-20")},m(a,u){A(a,e,u),m(e,t),m(t,r),i||(c=G(t,"click",Ee(function(){nt(s[7](s[19][s[22]]))&&s[7](s[19][s[22]]).apply(this,arguments)})),i=!0)},p(a,u){s=a,u&9&&!Be(r.src,l=s[19][s[22]])&&y(r,"src",l),u&1&&n!==(n=s[22])&&y(r,"alt",n)},d(a){a&&p(e),i=!1,c()}}}function ze(s){let e;function t(n,i){return n[22]==="image"?Vt:Jt}let r=t(s),l=r(s);return{c(){l.c(),e=ye()},l(n){l.l(n),e=ye()},m(n,i){l.m(n,i),A(n,e,i)},p(n,i){r===(r=t(n))&&l?l.p(n,i):(l.d(1),l=r(n),l&&(l.c(),l.m(e.parentNode,e)))},d(n){n&&p(e),l.d(n)}}}function Ge(s){let e,t,r,l,n='<i class="fa-solid fa-pen-to-square text-2xl"></i>',i,c,a='<i class="fa-solid fa-xmark text-2xl"></i>',u,o,w,f=Q(s[0]),h=[];for(let E=0;E<f.length;E+=1)h[E]=ze(je(s,f,E));function D(){return s[9](s[19])}function N(){return s[10](s[19])}function Z(){return s[11](s[19])}return{c(){e=v("tr");for(let E=0;E<h.length;E+=1)h[E].c();t=L(),r=v("td"),l=v("button"),l.innerHTML=n,i=L(),c=v("button"),c.innerHTML=a,u=L(),this.h()},l(E){e=k(E,"TR",{});var C=H(e);for(let S=0;S<h.length;S+=1)h[S].l(C);t=$(C),r=k(C,"TD",{class:!0});var d=H(r);l=k(d,"BUTTON",{"data-svelte-h":!0}),ve(l)!=="svelte-vahs1s"&&(l.innerHTML=n),i=$(d),c=k(d,"BUTTON",{"data-svelte-h":!0}),ve(c)!=="svelte-j8zve3"&&(c.innerHTML=a),d.forEach(p),u=$(C),C.forEach(p),this.h()},h(){y(r,"class","flex flex-row gap-3 mx-2")},m(E,C){A(E,e,C);for(let d=0;d<h.length;d+=1)h[d]&&h[d].m(e,null);m(e,t),m(e,r),m(r,l),m(r,i),m(r,c),m(e,u),o||(w=[G(l,"click",Ee(D)),G(c,"click",Ee(N)),G(e,"click",Z)],o=!0)},p(E,C){if(s=E,C&137){f=Q(s[0]);let d;for(d=0;d<f.length;d+=1){const S=je(s,f,d);h[d]?h[d].p(S,C):(h[d]=ze(S),h[d].c(),h[d].m(e,t))}for(;d<h.length;d+=1)h[d].d(1);h.length=f.length}},d(E){E&&p(e),ke(h,E),o=!1,Se(w)}}}function Yt(s){let e,t,r,l,n,i,c,a,u,o,w,f,h,D,N,Z,E,C,d,S,B,j,P;r=new St({props:{handler:s[1]}}),n=new Ht({props:{handler:s[1]}});let I=Q(s[0]),T=[];for(let g=0;g<I.length;g+=1)T[g]=qe(Ue(s,I,g));const ie=g=>J(T[g],1,1,()=>{T[g]=null});let V=Q(s[0]),O=[];for(let g=0;g<V.length;g+=1)O[g]=We(Me(s,V,g));const Ye=g=>J(O[g],1,1,()=>{O[g]=null});let we=Q(s[3]),M=[];for(let g=0;g<we.length;g+=1)M[g]=Ge($e(s,we,g));return S=new dt({props:{handler:s[1]}}),j=new Bt({props:{handler:s[1]}}),{c(){e=v("div"),t=v("header"),he(r.$$.fragment),l=L(),he(n.$$.fragment),i=L(),c=v("table"),a=v("thead"),u=v("tr");for(let g=0;g<T.length;g+=1)T[g].c();o=L(),w=v("td"),f=L(),h=v("tr");for(let g=0;g<O.length;g+=1)O[g].c();D=L(),N=v("td"),Z=L(),E=v("tbody");for(let g=0;g<M.length;g+=1)M[g].c();C=L(),d=v("footer"),he(S.$$.fragment),B=L(),he(j.$$.fragment),this.h()},l(g){e=k(g,"DIV",{class:!0});var R=H(e);t=k(R,"HEADER",{class:!0});var F=H(t);fe(r.$$.fragment,F),l=$(F),fe(n.$$.fragment,F),F.forEach(p),i=$(R),c=k(R,"TABLE",{class:!0});var ae=H(c);a=k(ae,"THEAD",{});var oe=H(a);u=k(oe,"TR",{});var ce=H(u);for(let ee=0;ee<T.length;ee+=1)T[ee].l(ce);o=$(ce),w=k(ce,"TD",{}),H(w).forEach(p),ce.forEach(p),f=$(oe),h=k(oe,"TR",{});var b=H(h);for(let ee=0;ee<O.length;ee+=1)O[ee].l(b);D=$(b),N=k(b,"TD",{}),H(N).forEach(p),b.forEach(p),oe.forEach(p),Z=$(ae),E=k(ae,"TBODY",{});var x=H(E);for(let ee=0;ee<M.length;ee+=1)M[ee].l(x);x.forEach(p),ae.forEach(p),C=$(R),d=k(R,"FOOTER",{class:!0});var Ce=H(d);fe(S.$$.fragment,Ce),B=$(Ce),fe(j.$$.fragment,Ce),Ce.forEach(p),R.forEach(p),this.h()},h(){y(t,"class","flex justify-between gap-4"),y(c,"class","table table-hover table-compact w-full table-auto"),y(d,"class","flex justify-between"),y(e,"class","overflow-x-auto space-y-4")},m(g,R){A(g,e,R),m(e,t),de(r,t,null),m(t,l),de(n,t,null),m(e,i),m(e,c),m(c,a),m(a,u);for(let F=0;F<T.length;F+=1)T[F]&&T[F].m(u,null);m(u,o),m(u,w),m(a,f),m(a,h);for(let F=0;F<O.length;F+=1)O[F]&&O[F].m(h,null);m(h,D),m(h,N),m(c,Z),m(c,E);for(let F=0;F<M.length;F+=1)M[F]&&M[F].m(E,null);m(e,C),m(e,d),de(S,d,null),m(d,B),de(j,d,null),P=!0},p(g,[R]){const F={};R&2&&(F.handler=g[1]),r.$set(F);const ae={};if(R&2&&(ae.handler=g[1]),n.$set(ae),R&3){I=Q(g[0]);let b;for(b=0;b<I.length;b+=1){const x=Ue(g,I,b);T[b]?(T[b].p(x,R),q(T[b],1)):(T[b]=qe(x),T[b].c(),q(T[b],1),T[b].m(u,o))}for(He(),b=I.length;b<T.length;b+=1)ie(b);Te()}if(R&3){V=Q(g[0]);let b;for(b=0;b<V.length;b+=1){const x=Me(g,V,b);O[b]?(O[b].p(x,R),q(O[b],1)):(O[b]=We(x),O[b].c(),q(O[b],1),O[b].m(h,D))}for(He(),b=V.length;b<O.length;b+=1)Ye(b);Te()}if(R&249){we=Q(g[3]);let b;for(b=0;b<we.length;b+=1){const x=$e(g,we,b);M[b]?M[b].p(x,R):(M[b]=Ge(x),M[b].c(),M[b].m(E,null))}for(;b<M.length;b+=1)M[b].d(1);M.length=we.length}const oe={};R&2&&(oe.handler=g[1]),S.$set(oe);const ce={};R&2&&(ce.handler=g[1]),j.$set(ce)},i(g){if(!P){q(r.$$.fragment,g),q(n.$$.fragment,g);for(let R=0;R<I.length;R+=1)q(T[R]);for(let R=0;R<V.length;R+=1)q(O[R]);q(S.$$.fragment,g),q(j.$$.fragment,g),P=!0}},o(g){J(r.$$.fragment,g),J(n.$$.fragment,g),T=T.filter(Boolean);for(let R=0;R<T.length;R+=1)J(T[R]);O=O.filter(Boolean);for(let R=0;R<O.length;R+=1)J(O[R]);J(S.$$.fragment,g),J(j.$$.fragment,g),P=!1},d(g){g&&p(e),ge(r),ge(n),ke(T,g),ke(O,g),ke(M,g),ge(S),ge(j)}}}function Kt(s,e,t){let r,l=U,n=()=>(l(),l=lt(D,P=>t(3,r=P)),D);s.$$.on_destroy.push(()=>l());const i=it();let{endpoint:c=""}=e,{fields:a=[]}=e;const u=P=>typeof P!="string"?"":P.charAt(0).toUpperCase()+P.slice(1),o=P=>P.replace(/_/g," "),w=at();let f=[{}],h=new Re(f,{rowsPerPage:5}),D=h.getRows();n();const N=c.split("/").slice(-1)[0],Z=P=>{i.trigger({type:"confirm",title:"Delete "+P.name,body:"Are you sure you want to delete "+P.name+"?",response:I=>{I&&E(P)}})},E=P=>{fetch(c+"/"+P.id,{method:"DELETE",credentials:"include"}).then(I=>{I.ok?(i.close(),w.trigger({message:"Deleted "+P.name,background:"variant-filled-warning"}),Le(c).then(T=>{t(1,h=new Re(T,{rowsPerPage:5})),n(t(2,D=h.getRows()))})):(i.close(),w.trigger({message:"Failed to delete "+P.name,background:"variant-filled-error"}))})},C=P=>{i.clear();let I="",T={type:"confirm",buttonTextConfirm:"Edit",response:async ie=>{ie&&await Ae(`/dashboard/${N}/${P.id}`)}};for(const[ie,V]of Object.entries(P))switch(ie){case"id":break;case"name":T.title=u(V);break;case"image":I+=`<img class="mx-auto max-h-[35vh]" src="${V}" alt="${V}"/>`;break;case"duration":I+=`<h2 class="capitalize">${o(ie)}:</h2><p>${V} min.</p>`;break;case"layout":break;default:I+=`<h2 class="capitalize">${o(ie)}:</h2><p>${V}</p>`}T.body=I,i.trigger(T)},d=P=>{i.clear();let I={type:"image",image:P};i.trigger(I)};st(async()=>{f=await Le(c),t(1,h=new Re(f,{rowsPerPage:5})),n(t(2,D=h.getRows()))});const S=async P=>await Ae(`/dashboard/${N}/${P.id}`),B=P=>Z(P),j=P=>C(P);return s.$$set=P=>{"endpoint"in P&&t(8,c=P.endpoint),"fields"in P&&t(0,a=P.fields)},[a,h,D,r,N,Z,C,d,c,S,B,j]}class cr extends le{constructor(e){super(),ne(this,e,Kt,Yt,se,{endpoint:8,fields:0})}}function Qt(s){let e,t,r,l,n,i,c,a;return{c(){e=v("div"),t=v("h2"),r=W(s[0]),l=L(),n=v("div"),i=v("a"),c=v("i"),a=W("Add"),this.h()},l(u){e=k(u,"DIV",{class:!0});var o=H(e);t=k(o,"H2",{class:!0});var w=H(t);r=z(w,s[0]),w.forEach(p),l=$(o),n=k(o,"DIV",{class:!0});var f=H(n);i=k(f,"A",{href:!0,class:!0});var h=H(i);c=k(h,"I",{class:!0}),H(c).forEach(p),a=z(h,"Add"),h.forEach(p),f.forEach(p),o.forEach(p),this.h()},h(){y(t,"class","h1 text-start mb-4 w-full"),y(c,"class","fa-solid fa-plus mr-2"),y(i,"href",s[1]),y(i,"class","btn variant-filled h-fit w-fit mx-auto lg:btn-xl justify-end"),y(n,"class","flex flex-row"),y(e,"class","flex flex-row items-center gap-4")},m(u,o){A(u,e,o),m(e,t),m(t,r),m(e,l),m(e,n),m(n,i),m(i,c),m(i,a)},p(u,[o]){o&1&&me(r,u[0])},i:U,o:U,d(u){u&&p(e)}}}function Xt(s,e,t){let r;_e(s,ot,i=>t(2,r=i));let{title:l=""}=e,n=r.url+"/add";return s.$$set=i=>{"title"in i&&t(0,l=i.title)},[l,n]}class ur extends le{constructor(e){super(),ne(this,e,Xt,Qt,se,{title:0})}}export{ur as D,cr as a};
