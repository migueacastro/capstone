import{s as it,e as g,a as A,c as v,w as ne,g as O,b as H,f as b,o as d,A as Ae,i as X,h as n,B as Ce,x as fe,n as Ve,C as we,D as Be,k as Se,r as ct,t as Z,d as $,E as ge,j as de,R as De,I as Le,z as Oe,v as Pe,G as Me}from"../chunks/scheduler.Cvxp15X3.js";import{e as le}from"../chunks/each.CqMm39P8.js";import{S as ft,i as dt}from"../chunks/index.RxifS9Fo.js";import{s as ut,c as ht,a as _t,o as pt,b as mt,f as gt,d as vt,p as xe}from"../chunks/floating-ui.dom.s0Q-8zT8.js";import{g as bt}from"../chunks/stores.Cxagy6uu.js";import{g as wt}from"../chunks/stores.DkxrROnu.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.dsa4NXrV.js";import{r as kt,o as Te,m as Et,w as Ct,c as St,i as Ht,g as It,a as yt,b as Tt,n as Dt,p as Lt,f as Vt}from"../chunks/cinema.BkvfZdLH.js";import{g as qe}from"../chunks/entry.C_b26GiN.js";import{h as he}from"../chunks/moment.C5S46NFB.js";import{e as Ge}from"../chunks/public.Cb3FOUtJ.js";const Pt=(l,t)=>{let e=t;l.draggable=!0,l.style.cursor="grab";const s=o=>{o.dataTransfer.setData("text/plain",e)};return l.addEventListener("dragstart",s),{update(o){e=o},destroy(){l.removeEventListener("dragstart",s)}}},Mt=(l,t)=>{let e={dropEffect:"move",dragover_class:"droppable",...t},s=a=>{a.target.classList.add(e.dragover_class)},o=a=>{a.target.classList.remove(e.dragover_class)},i=a=>{a.preventDefault(),a.dataTransfer.dropEffect=e.dropEffect},r=a=>{a.preventDefault();const _=a.dataTransfer.getData("text/plain");a.target.classList.remove(e.dragover_class),e.on_dropzone(_,a)};l.addEventListener("dragenter",s),l.addEventListener("dragleave",o),l.addEventListener("dragover",i),l.addEventListener("drop",r)};function Ke(l,t,e){const s=l.slice();return s[42]=t[e],s}function Qe(l,t,e){const s=l.slice();return s[7]=t[e],s[45]=t,s[46]=e,s}function Je(l,t,e){const s=l.slice();return s[42]=t[e],s}function We(l,t,e){const s=l.slice();return s[49]=t[e],s}function Fe(l,t,e){const s=l.slice();return s[8]=t[e],s}function Xe(l,t,e){const s=l.slice();return s[6]=t[e],s}function Ye(l,t,e){const s=l.slice();return s[5]=t[e],s[57]=e,s}function Ze(l){let t,e=l[5].name+"",s,o;return{c(){t=g("option"),s=Z(e),this.h()},l(i){t=v(i,"OPTION",{});var r=H(t);s=$(r,e),r.forEach(b),this.h()},h(){t.__value=o=l[5].id,ge(t,t.__value)},m(i,r){X(i,t,r),n(t,s)},p(i,r){r[0]&16&&e!==(e=i[5].name+"")&&de(s,e),r[0]&16&&o!==(o=i[5].id)&&(t.__value=o,ge(t,t.__value))},d(i){i&&b(t)}}}function $e(l){let t,e=l[6].name+"",s,o;return{c(){t=g("option"),s=Z(e),this.h()},l(i){t=v(i,"OPTION",{});var r=H(t);s=$(r,e),r.forEach(b),this.h()},h(){t.__value=o=l[6].id,ge(t,t.__value)},m(i,r){X(i,t,r),n(t,s)},p(i,r){r[0]&1&&e!==(e=i[6].name+"")&&de(s,e),r[0]&1&&o!==(o=i[6].id)&&(t.__value=o,ge(t,t.__value))},d(i){i&&b(t)}}}function et(l){let t,e=l[8].name+"",s,o;return{c(){t=g("option"),s=Z(e),this.h()},l(i){t=v(i,"OPTION",{});var r=H(t);s=$(r,e),r.forEach(b),this.h()},h(){t.__value=o=l[8].id,ge(t,t.__value)},m(i,r){X(i,t,r),n(t,s)},p(i,r){r[0]&8&&e!==(e=i[8].name+"")&&de(s,e),r[0]&8&&o!==(o=i[8].id)&&(t.__value=o,ge(t,t.__value))},d(i){i&&b(t)}}}function tt(l){let t,e="Save",s,o,i="Discard",r,a;return{c(){t=g("button"),t.textContent=e,s=A(),o=g("button"),o.textContent=i,this.h()},l(_){t=v(_,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-ugv3a6"&&(t.textContent=e),s=O(_),o=v(_,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(o)!=="svelte-tgo2ip"&&(o.textContent=i),this.h()},h(){d(t,"class","btn variant-filled h4"),d(o,"class","btn variant-filled-error h4")},m(_,k){X(_,t,k),X(_,s,k),X(_,o,k),r||(a=[fe(t,"click",l[26]),fe(o,"click",l[27])],r=!0)},p:Ve,d(_){_&&(b(t),b(s),b(o)),r=!1,Be(a)}}}function lt(l){let t,e,s="Shifts",o,i,r=le(l[1]),a=[];for(let _=0;_<r.length;_+=1)a[_]=rt(Qe(l,r,_));return{c(){t=g("div"),e=g("h2"),e.textContent=s,o=A(),i=g("div");for(let _=0;_<a.length;_+=1)a[_].c();this.h()},l(_){t=v(_,"DIV",{class:!0});var k=H(t);e=v(k,"H2",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1wx94ud"&&(e.textContent=s),o=O(k),i=v(k,"DIV",{class:!0});var p=H(i);for(let C=0;C<a.length;C+=1)a[C].l(p);p.forEach(b),k.forEach(b),this.h()},h(){d(e,"class","h2 mb-3"),d(i,"class","flex flex-col items-center space-y-4"),d(t,"class","card flex flex-col h-[80%] p-4 shadow-lg animate-show")},m(_,k){X(_,t,k),n(t,e),n(t,o),n(t,i);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(i,null)},p(_,k){if(k[0]&115974){r=le(_[1]);let p;for(p=0;p<r.length;p+=1){const C=Qe(_,r,p);a[p]?a[p].p(C,k):(a[p]=rt(C),a[p].c(),a[p].m(i,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=r.length}},d(_){_&&b(t),we(a,_)}}}function st(l){let t,e,s,o,i,r=l[49].movie_name+"",a,_,k,p=he(l[49].start_time,"HH:mm").format("HH:mm")+"",C,y,D=he(l[49].end_time,"HH:mm").format("HH:mm")+"",M,x,z,E,S='<i class="fa-solid fa-xmark"></i>',L,w;function U(){return l[30](l[49])}return{c(){t=g("div"),e=g("div"),s=A(),o=g("div"),i=g("p"),a=Z(r),_=A(),k=g("p"),C=Z(p),y=Z(" - "),M=Z(D),x=A(),z=g("div"),E=g("button"),E.innerHTML=S,this.h()},l(P){t=v(P,"DIV",{class:!0});var R=H(t);e=v(R,"DIV",{class:!0}),H(e).forEach(b),s=O(R),o=v(R,"DIV",{class:!0});var I=H(o);i=v(I,"P",{class:!0});var se=H(i);a=$(se,r),se.forEach(b),_=O(I),k=v(I,"P",{});var Q=H(k);C=$(Q,p),y=$(Q," - "),M=$(Q,D),Q.forEach(b),x=O(I),z=v(I,"DIV",{class:!0});var ie=H(z);E=v(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(E)!=="svelte-c4elck"&&(E.innerHTML=S),ie.forEach(b),I.forEach(b),R.forEach(b),this.h()},h(){d(e,"class","card variant-filled-primary w-[7vh] rounded-r-none shadow-md"),d(i,"class","h3 font-bold"),d(E,"class","pointer-events-auto"),d(z,"class","flex flex-row justify-end"),d(o,"class","card flex flex-col p-3 rounded-l-none w-full shadow-md"),d(t,"class","flex flex-row lg:w-[30vh] pointer-events-none m-3")},m(P,R){X(P,t,R),n(t,e),n(t,s),n(t,o),n(o,i),n(i,a),n(o,_),n(o,k),n(k,C),n(k,y),n(k,M),n(o,x),n(o,z),n(z,E),L||(w=fe(E,"click",U),L=!0)},p(P,R){l=P,R[0]&4&&r!==(r=l[49].movie_name+"")&&de(a,r),R[0]&4&&p!==(p=he(l[49].start_time,"HH:mm").format("HH:mm")+"")&&de(C,p),R[0]&4&&D!==(D=he(l[49].end_time,"HH:mm").format("HH:mm")+"")&&de(M,D)},d(P){P&&b(t),L=!1,w()}}}function ot(l){let t,e=l[49].room==l[7].id&&l[49].weekday==l[8]&&st(l);return{c(){e&&e.c(),t=Pe()},l(s){e&&e.l(s),t=Pe()},m(s,o){e&&e.m(s,o),X(s,t,o)},p(s,o){s[49].room==s[7].id&&s[49].weekday==s[8]?e?e.p(s,o):(e=st(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(s){s&&b(t),e&&e.d(s)}}}function at(l){let t,e,s,o=l[42].name+"",i,r,a,_,k,p,C,y=l[42].duration+"",D,M,x,z,E;function S(){return l[31](l[42],l[7])}return{c(){t=g("button"),e=g("div"),s=g("p"),i=Z(o),r=A(),a=g("img"),k=A(),p=g("div"),C=g("p"),D=Z(y),M=Z(" Min"),x=A(),this.h()},l(L){t=v(L,"BUTTON",{class:!0});var w=H(t);e=v(w,"DIV",{class:!0});var U=H(e);s=v(U,"P",{class:!0});var P=H(s);i=$(P,o),P.forEach(b),r=O(U),a=v(U,"IMG",{src:!0,class:!0,alt:!0}),U.forEach(b),k=O(w),p=v(w,"DIV",{class:!0});var R=H(p);C=v(R,"P",{class:!0});var I=H(C);D=$(I,y),M=$(I," Min"),I.forEach(b),R.forEach(b),x=O(w),w.forEach(b),this.h()},h(){d(s,"class","h4 font-bold absolute top-[35%] left-3 z-10 text-white"),Me(a.src,_=l[42].image)||d(a,"src",_),d(a,"class","h-full object-cover w-full rounded-t-lg brightness-50 blur-sm"),d(a,"alt",""),d(e,"class","w-full h-[75%] rounded-b-none rounded-t-lg relative flex"),d(C,"class","text-nowrap text-center"),d(p,"class","card variant-filled-primary rounded-t-none w-full h-[25%] flex-row flex space-x-[75%] px-4 py-1"),d(t,"class","closeOnClick flex flex-col h-40 w-full shadow-lg")},m(L,w){X(L,t,w),n(t,e),n(e,s),n(s,i),n(e,r),n(e,a),n(t,k),n(t,p),n(p,C),n(C,D),n(C,M),n(t,x),z||(E=fe(t,"click",S),z=!0)},p(L,w){l=L,w[0]&1024&&o!==(o=l[42].name+"")&&de(i,o),w[0]&1024&&!Me(a.src,_=l[42].image)&&d(a,"src",_),w[0]&1024&&y!==(y=l[42].duration+"")&&de(D,y)},d(L){L&&b(t),z=!1,E()}}}function rt(l){let t,e,s,o=l[7].name+"",i,r,a,_,k=l[7].opens_at+"",p,C,y,D,M,x="Select an hour",z,E,S,L,w,U,P,R,I,se='<i class="fa-solid fa-plus"></i>',Q,ie,ee,J,oe,_e,pe,ce;function ke(){l[28].call(E,l[45],l[46])}function ve(){return l[29](l[7])}let ae=le(l[2]),G=[];for(let c=0;c<ae.length;c+=1)G[c]=ot(We(l,ae,c));let Y=le(l[10]),K=[];for(let c=0;c<Y.length;c+=1)K[c]=at(Je(l,Y,c));function be(...c){return l[32](l[7],...c)}return{c(){t=g("div"),e=g("div"),s=g("p"),i=Z(o),r=A(),a=g("p"),_=Z("Opens at "),p=Z(k),y=A(),D=g("div"),M=g("p"),M.textContent=x,z=A(),E=g("input"),S=A(),L=g("div"),U=A(),P=g("div");for(let c=0;c<G.length;c+=1)G[c].c();R=A(),I=g("button"),I.innerHTML=se,ie=A(),ee=g("div");for(let c=0;c<K.length;c+=1)K[c].c();oe=A(),this.h()},l(c){t=v(c,"DIV",{class:!0});var m=H(t);e=v(m,"DIV",{class:!0});var u=H(e);s=v(u,"P",{class:!0});var T=H(s);i=$(T,o),T.forEach(b),r=O(u),a=v(u,"P",{class:!0});var F=H(a);_=$(F,"Opens at "),p=$(F,k),F.forEach(b),y=O(u),D=v(u,"DIV",{class:!0,"data-popup":!0});var B=H(D);M=v(B,"P",{"data-svelte-h":!0}),ne(M)!=="svelte-7qkeux"&&(M.textContent=x),z=O(B),E=v(B,"INPUT",{type:!0,class:!0}),S=O(B),L=v(B,"DIV",{class:!0}),H(L).forEach(b),B.forEach(b),u.forEach(b),U=O(m),P=v(m,"DIV",{class:!0});var V=H(P);for(let W=0;W<G.length;W+=1)G[W].l(V);R=O(V),I=v(V,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(I)!=="svelte-1v7zzd6"&&(I.innerHTML=se),ie=O(V),ee=v(V,"DIV",{"data-popup":!0,class:!0});var N=H(ee);for(let W=0;W<K.length;W+=1)K[W].l(N);N.forEach(b),V.forEach(b),oe=O(m),m.forEach(b),this.h()},h(){d(s,"class","h3 font-bold capitalize"),d(a,"class","no-underline anchor"),d(E,"type","time"),d(E,"class","input"),d(L,"class","arrow variant-filled-primary"),d(D,"class","card p-4 shadow-md"),d(D,"data-popup",w="popupClick-room-"+l[7].id),d(e,"class","flex flex-row items-center space-x-4 p-4"),d(I,"class","m-4"),d(ee,"data-popup",J="popupAddShiftClick-room-"+l[7].id),d(ee,"class","card p-4 lg:w-[45vh] shadow-md w-[70%] mx-auto h-[40%] overflow-auto space-y-5"),d(P,"class","grid grid-cols-1 lg:grid-cols-3"),d(t,"class","card shadow-lg w-full p-5")},m(c,m){X(c,t,m),n(t,e),n(e,s),n(s,i),n(e,r),n(e,a),n(a,_),n(a,p),n(e,y),n(e,D),n(D,M),n(D,z),n(D,E),ge(E,l[7].opens_at),n(D,S),n(D,L),n(t,U),n(t,P);for(let u=0;u<G.length;u+=1)G[u]&&G[u].m(P,null);n(P,R),n(P,I),n(P,ie),n(P,ee);for(let u=0;u<K.length;u+=1)K[u]&&K[u].m(ee,null);n(t,oe),pe||(ce=[De(C=xe.call(null,a,{event:"click",target:`popupClick-room-${l[7].id}`,placement:"top"})),fe(E,"input",ke),fe(E,"input",ve),De(Q=xe.call(null,I,{event:"click",target:`popupAddShiftClick-room-${l[7].id}`,placement:"top",closeQuery:".closeOnClick"})),De(_e=Mt.call(null,t,{on_dropzone:be}))],pe=!0)},p(c,m){if(l=c,m[0]&2&&o!==(o=l[7].name+"")&&de(i,o),m[0]&2&&k!==(k=l[7].opens_at+"")&&de(p,k),C&&Le(C.update)&&m[0]&2&&C.update.call(null,{event:"click",target:`popupClick-room-${l[7].id}`,placement:"top"}),m[0]&2&&ge(E,l[7].opens_at),m[0]&2&&w!==(w="popupClick-room-"+l[7].id)&&d(D,"data-popup",w),m[0]&33030){ae=le(l[2]);let u;for(u=0;u<ae.length;u+=1){const T=We(l,ae,u);G[u]?G[u].p(T,m):(G[u]=ot(T),G[u].c(),G[u].m(P,R))}for(;u<G.length;u+=1)G[u].d(1);G.length=ae.length}if(Q&&Le(Q.update)&&m[0]&2&&Q.update.call(null,{event:"click",target:`popupAddShiftClick-room-${l[7].id}`,placement:"top",closeQuery:".closeOnClick"}),m[0]&17666){Y=le(l[10]);let u;for(u=0;u<Y.length;u+=1){const T=Je(l,Y,u);K[u]?K[u].p(T,m):(K[u]=at(T),K[u].c(),K[u].m(ee,null))}for(;u<K.length;u+=1)K[u].d(1);K.length=Y.length}m[0]&2&&J!==(J="popupAddShiftClick-room-"+l[7].id)&&d(ee,"data-popup",J),_e&&Le(_e.update)&&m[0]&258&&_e.update.call(null,{on_dropzone:be})},d(c){c&&b(t),we(G,c),we(K,c),pe=!1,Be(ce)}}}function At(l){let t,e="No movies available";return{c(){t=g("p"),t.textContent=e,this.h()},l(s){t=v(s,"P",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-1p04ipb"&&(t.textContent=e),this.h()},h(){d(t,"class","text-center")},m(s,o){X(s,t,o)},p:Ve,d(s){s&&b(t)}}}function Ot(l){let t,e=le(l[10]),s=[];for(let o=0;o<e.length;o+=1)s[o]=nt(Ke(l,e,o));return{c(){for(let o=0;o<s.length;o+=1)s[o].c();t=Pe()},l(o){for(let i=0;i<s.length;i+=1)s[i].l(o);t=Pe()},m(o,i){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(o,i);X(o,t,i)},p(o,i){if(i[0]&1024){e=le(o[10]);let r;for(r=0;r<e.length;r+=1){const a=Ke(o,e,r);s[r]?s[r].p(a,i):(s[r]=nt(a),s[r].c(),s[r].m(t.parentNode,t))}for(;r<s.length;r+=1)s[r].d(1);s.length=e.length}},d(o){o&&b(t),we(s,o)}}}function nt(l){let t,e,s,o=l[42].name+"",i,r,a,_,k,p,C,y=l[42].duration+"",D,M,x,z,E,S;return{c(){t=g("div"),e=g("div"),s=g("p"),i=Z(o),r=A(),a=g("img"),k=A(),p=g("div"),C=g("p"),D=Z(y),M=Z(" Min"),x=A(),this.h()},l(L){t=v(L,"DIV",{class:!0,draggable:!0});var w=H(t);e=v(w,"DIV",{class:!0});var U=H(e);s=v(U,"P",{class:!0});var P=H(s);i=$(P,o),P.forEach(b),r=O(U),a=v(U,"IMG",{src:!0,class:!0,alt:!0}),U.forEach(b),k=O(w),p=v(w,"DIV",{class:!0});var R=H(p);C=v(R,"P",{class:!0});var I=H(C);D=$(I,y),M=$(I," Min"),I.forEach(b),R.forEach(b),x=O(w),w.forEach(b),this.h()},h(){d(s,"class","h4 font-bold absolute top-[35%] left-3 z-10 text-white"),Me(a.src,_=l[42].image)||d(a,"src",_),d(a,"class","h-full object-cover w-full rounded-t-lg brightness-50 blur-sm"),d(a,"alt",""),d(e,"class","w-[full] h-[75%] rounded-b-none rounded-t-lg relative flex"),d(C,"class","text-nowrap text-center"),d(p,"class","card variant-filled-primary rounded-t-none w-full h-[25%] flex-row flex space-x-[75%] px-4 py-1"),d(t,"class","flex flex-col h-32 w-full shadow-lg"),d(t,"draggable","true")},m(L,w){X(L,t,w),n(t,e),n(e,s),n(s,i),n(e,r),n(e,a),n(t,k),n(t,p),n(p,C),n(C,D),n(C,M),n(t,x),E||(S=De(z=Pt.call(null,t,l[42].id)),E=!0)},p(L,w){l=L,w[0]&1024&&o!==(o=l[42].name+"")&&de(i,o),w[0]&1024&&!Me(a.src,_=l[42].image)&&d(a,"src",_),w[0]&1024&&y!==(y=l[42].duration+"")&&de(D,y),z&&Le(z.update)&&w[0]&1024&&z.update.call(null,l[42].id)},d(L){L&&b(t),E=!1,S()}}}function Bt(l){let t,e='<h2 class="h1 text-start mb-4 w-full">Schedule</h2>',s,o,i,r,a,_,k,p="City",C,y,D,M,x,z="Branch",E,S,L,w,U,P="Day",R,I,se,Q,ie,ee,J,oe,_e="Available Movies",pe,ce,ke="Drag and drop to add to shifts",ve,ae,G,Y,K,be,c=le(l[4]),m=[];for(let f=0;f<c.length;f+=1)m[f]=Ze(Ye(l,c,f));let u=le(l[0]),T=[];for(let f=0;f<u.length;f+=1)T[f]=$e(Xe(l,u,f));let F=le(l[3]),B=[];for(let f=0;f<F.length;f+=1)B[f]=et(Fe(l,F,f));let V=l[9]&&tt(l),N=l[1].length>0&&lt(l);function W(f,q){return f[10].length>0?Ot:At}let te=W(l),j=te(l);return{c(){t=g("div"),t.innerHTML=e,s=A(),o=g("div"),i=g("div"),r=g("div"),a=g("div"),_=g("label"),k=g("p"),k.textContent=p,C=A(),y=g("select");for(let f=0;f<m.length;f+=1)m[f].c();D=A(),M=g("label"),x=g("p"),x.textContent=z,E=A(),S=g("select");for(let f=0;f<T.length;f+=1)T[f].c();L=A(),w=g("label"),U=g("p"),U.textContent=P,R=A(),I=g("select");for(let f=0;f<B.length;f+=1)B[f].c();se=A(),Q=g("div"),V&&V.c(),ie=A(),N&&N.c(),ee=A(),J=g("div"),oe=g("h2"),oe.textContent=_e,pe=A(),ce=g("p"),ce.textContent=ke,ve=A(),ae=g("hr"),G=A(),Y=g("div"),j.c(),this.h()},l(f){t=v(f,"DIV",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-1hf1e66"&&(t.innerHTML=e),s=O(f),o=v(f,"DIV",{class:!0});var q=H(o);i=v(q,"DIV",{class:!0});var h=H(i);r=v(h,"DIV",{class:!0});var re=H(r);a=v(re,"DIV",{class:!0});var Ee=H(a);_=v(Ee,"LABEL",{class:!0});var He=H(_);k=v(He,"P",{"data-svelte-h":!0}),ne(k)!=="svelte-61eib5"&&(k.textContent=p),C=O(He),y=v(He,"SELECT",{class:!0,name:!0,id:!0});var Ne=H(y);for(let ue=0;ue<m.length;ue+=1)m[ue].l(Ne);Ne.forEach(b),He.forEach(b),D=O(Ee),M=v(Ee,"LABEL",{class:!0});var Ie=H(M);x=v(Ie,"P",{"data-svelte-h":!0}),ne(x)!=="svelte-1pptkos"&&(x.textContent=z),E=O(Ie),S=v(Ie,"SELECT",{class:!0,name:!0,id:!0});var ze=H(S);for(let ue=0;ue<T.length;ue+=1)T[ue].l(ze);ze.forEach(b),Ie.forEach(b),L=O(Ee),w=v(Ee,"LABEL",{class:!0});var ye=H(w);U=v(ye,"P",{"data-svelte-h":!0}),ne(U)!=="svelte-4g15e6"&&(U.textContent=P),R=O(ye),I=v(ye,"SELECT",{class:!0,name:!0,id:!0});var Re=H(I);for(let ue=0;ue<B.length;ue+=1)B[ue].l(Re);Re.forEach(b),ye.forEach(b),Ee.forEach(b),se=O(re),Q=v(re,"DIV",{class:!0});var Ue=H(Q);V&&V.l(Ue),Ue.forEach(b),re.forEach(b),ie=O(h),N&&N.l(h),h.forEach(b),ee=O(q),J=v(q,"DIV",{class:!0});var me=H(J);oe=v(me,"H2",{class:!0,"data-svelte-h":!0}),ne(oe)!=="svelte-178nfwv"&&(oe.textContent=_e),pe=O(me),ce=v(me,"P",{class:!0,"data-svelte-h":!0}),ne(ce)!=="svelte-1mpp1m8"&&(ce.textContent=ke),ve=O(me),ae=v(me,"HR",{class:!0}),G=O(me),Y=v(me,"DIV",{class:!0});var je=H(Y);j.l(je),je.forEach(b),me.forEach(b),q.forEach(b),this.h()},h(){d(t,"class","flex flex-row items-center gap-4"),d(y,"class","select lg:w-40"),d(y,"name",""),d(y,"id",""),l[5]===void 0&&Ae(()=>l[20].call(y)),d(_,"class","label text-start lg:indent-2 "),d(S,"class","select lg:w-40 "),d(S,"name",""),d(S,"id",""),l[6]===void 0&&Ae(()=>l[22].call(S)),d(M,"class","label text-start lg:indent-2"),d(I,"class","select lg:w-40"),d(I,"name",""),d(I,"id",""),l[8]===void 0&&Ae(()=>l[24].call(I)),d(w,"class","label text-start lg:indent-2"),d(a,"class","flex flex-col lg:flex-row lg:space-x-10 w-full"),d(Q,"class","flex flex-row space-x-3 mx-auto lg:ml-0"),d(r,"class","card flex flex-col items-start p-6 space-y-4 shadow-lg"),d(i,"class","flex flex-col lg:w-[75%] w-full space-y-14 "),d(oe,"class","h2 mb-2"),d(ce,"class","font-light mb-3"),d(ae,"class","mb-5"),d(Y,"class","flex flex-col space-y-6 items-center"),d(J,"class","hidden lg:flex card w-[25%] flex-col h-[100vh] p-4"),d(o,"class","flex flex-row space-x-14")},m(f,q){X(f,t,q),X(f,s,q),X(f,o,q),n(o,i),n(i,r),n(r,a),n(a,_),n(_,k),n(_,C),n(_,y);for(let h=0;h<m.length;h+=1)m[h]&&m[h].m(y,null);Ce(y,l[5],!0),n(a,D),n(a,M),n(M,x),n(M,E),n(M,S);for(let h=0;h<T.length;h+=1)T[h]&&T[h].m(S,null);Ce(S,l[6],!0),n(a,L),n(a,w),n(w,U),n(w,R),n(w,I);for(let h=0;h<B.length;h+=1)B[h]&&B[h].m(I,null);Ce(I,l[8],!0),n(r,se),n(r,Q),V&&V.m(Q,null),n(i,ie),N&&N.m(i,null),n(o,ee),n(o,J),n(J,oe),n(J,pe),n(J,ce),n(J,ve),n(J,ae),n(J,G),n(J,Y),j.m(Y,null),K||(be=[fe(y,"change",l[20]),fe(y,"change",l[21]),fe(S,"change",l[22]),fe(S,"change",l[23]),fe(I,"change",l[24]),fe(I,"change",l[25])],K=!0)},p(f,q){if(q[0]&16){c=le(f[4]);let h;for(h=0;h<c.length;h+=1){const re=Ye(f,c,h);m[h]?m[h].p(re,q):(m[h]=Ze(re),m[h].c(),m[h].m(y,null))}for(;h<m.length;h+=1)m[h].d(1);m.length=c.length}if(q[0]&48&&Ce(y,f[5]),q[0]&1){u=le(f[0]);let h;for(h=0;h<u.length;h+=1){const re=Xe(f,u,h);T[h]?T[h].p(re,q):(T[h]=$e(re),T[h].c(),T[h].m(S,null))}for(;h<T.length;h+=1)T[h].d(1);T.length=u.length}if(q[0]&65&&Ce(S,f[6]),q[0]&8){F=le(f[3]);let h;for(h=0;h<F.length;h+=1){const re=Fe(f,F,h);B[h]?B[h].p(re,q):(B[h]=et(re),B[h].c(),B[h].m(I,null))}for(;h<B.length;h+=1)B[h].d(1);B.length=F.length}q[0]&264&&Ce(I,f[8]),f[9]?V?V.p(f,q):(V=tt(f),V.c(),V.m(Q,null)):V&&(V.d(1),V=null),f[1].length>0?N?N.p(f,q):(N=lt(f),N.c(),N.m(i,null)):N&&(N.d(1),N=null),te===(te=W(f))&&j?j.p(f,q):(j.d(1),j=te(f),j&&(j.c(),j.m(Y,null)))},i:Ve,o:Ve,d(f){f&&(b(t),b(s),b(o)),we(m,f),we(T,f),we(B,f),V&&V.d(),N&&N.d(),j.d(),K=!1,Be(be)}}}function Nt(l,t,e){let s,o,i,r,a,_,k,p,C;Se(l,kt,c=>e(17,r=c)),Se(l,Te,c=>e(2,a=c)),Se(l,Et,c=>e(18,_=c)),Se(l,Ct,c=>e(3,k=c)),Se(l,St,c=>e(4,p=c)),Se(l,Ht,c=>e(19,C=c)),ut.set({computePosition:ht,autoUpdate:_t,offset:pt,shift:mt,flip:gt,arrow:vt});const y=bt(),D=wt(),M={type:"confirm",title:"Save changes?",body:"Are you sure you wish to proceed?",response:c=>{c&&(Q(),y.close())}},x={type:"confirm",title:"Discard changes?",body:"Are you sure you wish to proceed?",response:async c=>{c&&(y.close(),qe("/dashboard").then(()=>qe("/dashboard/schedule")))}};let z=!1,E,S,L,w,U;const P=async(c,m,u)=>{e(9,z=!0);let T=_.find(h=>c==h.id),F=r.find(h=>m==h.id),B=k.find(h=>u==h.id),V=a.filter(h=>h.room==F.id&&h.weekday==B.id),N=V[V.length-1],W,te,j,f=30;V.length>0?(j=he(N.end_time,"HH:mm"),W=j.clone(),W.add(f,"minutes")):W=he(F.opens_at,"HH:mm"),te=W.clone(),te.add(T.duration,"minutes"),parseInt(te.format("mm")%30)>0&&(f=30-parseInt(te.format("mm")),te.add(f,"minutes"));let q={id:U,movie:T.id,room:F.id,weekday:B.id,movie_name:T.name,start_time:W.format("HH:mm"),end_time:te.format("HH:mm")};U++,Te.set([...a,q])},R=(c,m)=>{e(9,z=!0);let u=c,T=r.find(j=>j.id==u.room),B=a.filter(j=>j.room==m&&j.weekday==u.weekday).sort((j,f)=>he(j.start_time,"HH:mm")-he(f.start_time,"HH:mm")),V,N,W=_.find(j=>j.id==u.movie),te=30;B.forEach((j,f)=>{f==0?(V=he(T.opens_at,"HH:mm"),N=V.clone().add(W.duration,"minutes")):(V=he(B[f-1].end_time,"HH:mm").add(30,"minutes"),N=V.clone().add(W.duration,"minutes")),parseInt(N.format("mm")%30)>0&&(te=30-parseInt(N.format("mm")),N.add(te,"minutes")),j.start_time=V.format("HH:mm"),j.end_time=N.format("HH:mm")}),Te.set(a),console.log(a)},I=c=>{e(9,z=!0);let m=c.id;Te.set(a.filter(u=>u.id!=m)),se(c.room)},se=c=>{let m=r.find(u=>u.id==c);for(let u of a.filter(T=>T.room==m.id))u.room==m.id&&R(u,m.id)},Q=async()=>{let c=Array.from(a),m=Array.from(r),u=`${Ge.PUBLIC_BACKEND_URL}/update-shifts`;const T=await fetch(u,{headers:{"Content-Type":"application/json"},method:"PATCH",body:JSON.stringify({list_shifts:c,list_rooms:m}),credentials:"include"});if(T.ok)D.trigger({message:"Shifts updated successfully",background:"variant-filled-success"});else{const F=await T.json();D.trigger({message:`Server error: ${F.message}`,background:"variant-filled-error"})}},ie=async()=>(await(await fetch(`${Ge.PUBLIC_BACKEND_URL}/get-last-shiftid`)).json()).last_shift_id;ct(async()=>{await It(),await yt(),await Tt(),await Dt(),await Lt(),await Vt(),U=await ie()+1,e(5,E),e(4,p),e(6,S),e(0,s),e(19,C),e(5,E),e(4,p),e(7,L),e(1,o),e(17,r),e(6,S),e(8,w),e(0,s),e(3,k),e(19,C),e(5,E),e(4,p),e(8,w),e(3,k)});function ee(){E=Oe(this),e(5,E),e(4,p)}const J=()=>{e(6,S=null),e(1,o=[])};function oe(){S=Oe(this),e(6,S),e(0,s),e(19,C),e(5,E),e(4,p),e(0,s),e(19,C),e(5,E),e(4,p)}const _e=()=>console.log(o);function pe(){w=Oe(this),e(8,w),e(3,k)}const ce=()=>console.log(w),ke=()=>y.trigger(M),ve=()=>y.trigger(x);function ae(c,m){c[m].opens_at=this.value,e(1,o),e(17,r),e(6,S),e(8,w),e(0,s),e(3,k),e(19,C),e(5,E),e(4,p)}const G=c=>se(c.id),Y=c=>I(c),K=(c,m)=>P(c.id,m.id,w),be=function(c,m){P(m,c.id,w)};return l.$$.update=()=>{l.$$.dirty[0]&48&&!E&&p.length>0&&e(5,E=p[0].id),l.$$.dirty[0]&524320&&e(0,s=C.filter(c=>{if(E&&c.city==E)return!0})),l.$$.dirty[0]&65&&!S&&s.length>0&&e(6,S=s[0].id),l.$$.dirty[0]&264&&!w&&k.length>0&&e(8,w=k[0].id),l.$$.dirty[0]&131392&&e(1,o=r.filter(c=>{if(S&&S!=={}&&c.branch==S&&w!=={})return!0})),l.$$.dirty[0]&356&&a.filter(c=>{if(S&&c.branch==S.id&&E&&S.city==E.id&&w&&c.weekday==w.id)return!0}),l.$$.dirty[0]&262448&&e(10,i=_.filter(c=>{let m=E,u=p.find(T=>T.id==m);if(u&&u.on_screen_movies)return u.on_screen_movies.includes(c.id)&&c.coming_soon==!1&&w!=={}})),l.$$.dirty[0]&130&&!L&&o.length>0&&e(7,L=o[0].id)},[s,o,a,k,p,E,S,L,w,z,i,y,M,x,P,I,se,r,_,C,ee,J,oe,_e,pe,ce,ke,ve,ae,G,Y,K,be]}class Ft extends ft{constructor(t){super(),dt(this,t,Nt,Bt,it,{},null,[-1,-1])}}export{Ft as component};
