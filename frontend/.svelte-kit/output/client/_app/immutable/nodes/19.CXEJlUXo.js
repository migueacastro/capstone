import{s as bo,L as qe,e as _t,c as wt,b as zt,f as Rt,M as Ll,i as nh,n as Rl,N as Qn,S as zp,r as rh,_ as Wp,a5 as Yp,O as ma,U as Nr,a3 as Li,T as zn,a as se,t as ai,w as Ve,g as ae,d as li,o as bt,h as et,j as zo,A as Zp,k as Il}from"../chunks/scheduler.Cvxp15X3.js";import{S as _o,i as wo,p as Ri,c as Ii,a as Pi,m as Ni,t as Bi,b as Ui,d as Hi,f as Xp}from"../chunks/index.RxifS9Fo.js";import{f as qp}from"../chunks/index.CqmR2dVa.js";import{C as Kp,D as Qp,E as Jp,F as tg,G as eg}from"../chunks/cinema.BkvfZdLH.js";import{h as Pl}from"../chunks/moment.C5S46NFB.js";import{g as va,a as ih}from"../chunks/spread.CgU5AtxT.js";var oh=(t=>(t.RENDER_FINISHED="render-finished",t.RESIZE="chart-resize",t.MOUSEOVER="chart-mouseover",t.MOUSEOUT="chart-mouseout",t))(oh||{}),sh=(t=>(t.SHOW="show-modal",t.HIDE="hide-modal",t))(sh||{}),ah=(t=>(t.UPDATE="model-update",t))(ah||{}),lh=(t=>(t.SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",t.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu",t.BUTTON_CLICK="toolbar-button-click",t.SHOW_TOOLTIP="toolbar-show-tooltip",t.HIDE_TOOLTIP="toolbar-hide-tooltip",t))(lh||{}),ch=(t=>(t.UPDATE="zoom-bar-update",t.SELECTION_START="zoom-bar-selection-start",t.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",t.SELECTION_END="zoom-bar-selection-end",t))(ch||{}),uh=(t=>(t.CHANGE="zoom-domain-change",t))(uh||{}),hh=(t=>(t.CANVAS_ZOOM_IN="canvas-zoom-in",t.CANVAS_ZOOM_OUT="canvas-zoom-out",t))(hh||{}),dh=(t=>(t.LABEL_MOUSEOVER="axis-label-mouseover",t.LABEL_MOUSEMOVE="axis-label-mousemove",t.LABEL_CLICK="axis-label-click",t.LABEL_MOUSEOUT="axis-label-mouseout",t.LABEL_FOCUS="axis-label-focus",t.LABEL_BLUR="axis-label-blur",t.RENDER_COMPLETE="axis-render-complete",t))(dh||{}),fh=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(fh||{}),ph=(t=>(t.WORD_MOUSEOVER="wordcloud-word-mouseover",t.WORD_MOUSEMOVE="wordcloud-word-mousemove",t.WORD_CLICK="wordcloud-word-click",t.WORD_MOUSEOUT="wordcloud-word-mouseout",t))(ph||{}),gh=(t=>(t.SLICE_MOUSEOVER="pie-slice-mouseover",t.SLICE_MOUSEMOVE="pie-slice-mousemove",t.SLICE_CLICK="pie-slice-click",t.SLICE_MOUSEOUT="pie-slice-mouseout",t))(gh||{}),mh=(t=>(t.ARC_MOUSEOVER="gauge-arc-mouseover",t.ARC_MOUSEMOVE="gauge-arc-mousemove",t.ARC_CLICK="gauge-arc-click",t.ARC_MOUSEOUT="gauge-arc-mouseout",t))(mh||{}),vh=(t=>(t.BAR_MOUSEOVER="bar-mouseover",t.BAR_MOUSEMOVE="bar-mousemove",t.BAR_CLICK="bar-click",t.BAR_MOUSEOUT="bar-mouseout",t))(vh||{}),yh=(t=>(t.BOX_MOUSEOVER="box-mouseover",t.BOX_MOUSEMOVE="box-mousemove",t.BOX_CLICK="box-click",t.BOX_MOUSEOUT="box-mouseout",t.OUTLIER_MOUSEOVER="outlier-mouseover",t.OUTLIER_MOUSEMOVE="outlier-mousemove",t.OUTLIER_CLICK="outlier-click",t.OUTLIER_MOUSEOUT="outlier-mouseout",t))(yh||{}),bh=(t=>(t.SCATTER_MOUSEOVER="scatter-mouseover",t.SCATTER_MOUSEMOVE="scatter-mousemove",t.SCATTER_CLICK="scatter-click",t.SCATTER_MOUSEOUT="scatter-mouseout",t))(bh||{}),_h=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(_h||{}),wh=(t=>(t.X_AXIS_MOUSEOVER="radar-x-axis-mouseover",t.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",t.X_AXIS_CLICK="radar-x-axis-click",t.X_AXIS_MOUSEOUT="radar-x-axis-mouseout",t))(wh||{}),xh=(t=>(t.NODE_MOUSEOVER="tree-node-mouseover",t.NODE_CLICK="tree-node-click",t.NODE_MOUSEOUT="tree-node-mouseout",t))(xh||{}),Th=(t=>(t.LEAF_MOUSEOVER="leaf-mouseover",t.LEAF_MOUSEMOVE="leaf-mousemove",t.LEAF_CLICK="leaf-click",t.LEAF_MOUSEOUT="leaf-mouseout",t))(Th||{}),Eh=(t=>(t.SHOW="show-tooltip",t.MOVE="move-tooltip",t.HIDE="hide-tooltip",t))(Eh||{}),Oh=(t=>(t.SHOW="show-threshold",t.HIDE="hide-threshold",t))(Oh||{}),Sh=(t=>(t.ITEM_HOVER="legend-item-onhover",t.ITEM_CLICK="legend-item-onclick",t.ITEM_MOUSEOUT="legend-item-onmouseout",t.ITEMS_UPDATE="legend-items-update",t))(Sh||{}),Mh=(t=>(t.CIRCLE_MOUSEOVER="circle-leaf-mouseover",t.CIRCLE_CLICK="circle-leaf-click",t.CIRCLE_MOUSEOUT="circle-leaf-mouseout",t.CIRCLE_MOUSEMOVE="circle-leaf-mousemove",t))(Mh||{}),Ah=(t=>(t.NODE_MOUSEOVER="alluvial-node-mouseover",t.NODE_CLICK="alluvial-node-click",t.NODE_MOUSEOUT="alluvial-node-mouseout",t.NODE_MOUSEMOVE="alluvial-node-mousemove",t.LINE_MOUSEOVER="alluvial-line-mouseover",t.LINE_CLICK="alluvial-line-click",t.LINE_MOUSEOUT="alluvial-line-mouseout",t.LINE_MOUSEMOVE="alluvial-line-mousemove",t))(Ah||{}),Ch=(t=>(t.METER_MOUSEOVER="meter-mouseover",t.METER_CLICK="meter-click",t.METER_MOUSEOUT="meter-mouseout",t.METER_MOUSEMOVE="meter-mousemove",t))(Ch||{}),$h=(t=>(t.HEATMAP_MOUSEOVER="heatmap-mouseover",t.HEATMAP_CLICK="heatmap-click",t.HEATMAP_MOUSEOUT="heatmap-mouseout",t.HEATMAP_MOUSEMOVE="hetmap-mousemove",t))($h||{}),kh=(t=>(t.CHOROPLETH_MOUSEOVER="choropleth-mouseover",t.CHOROPLETH_CLICK="choropleth-click",t.CHOROPLETH_MOUSEOUT="choropleth-mouseout",t.CHOROPLETH_MOUSEMOVE="choropleth-mousemove",t))(kh||{});const ng=Object.freeze(Object.defineProperty({__proto__:null,Alluvial:Ah,Area:fh,Axis:dh,Bar:vh,Boxplot:yh,CanvasZoom:hh,Chart:oh,Choropleth:kh,CirclePack:Mh,Gauge:mh,Heatmap:$h,Legend:Sh,Line:_h,Meter:Ch,Modal:sh,Model:ah,Pie:gh,Radar:wh,Scatter:bh,Threshold:Oh,Toolbar:lh,Tooltip:Eh,Tree:xh,Treemap:Th,WordCloud:ph,ZoomBar:ch,ZoomDomain:uh},Symbol.toStringTag,{value:"Module"})),S=ng;var ft=(t=>(t.HTML="html",t.SVG="svg",t))(ft||{}),Dh=(t=>(t.WHITE="white",t.G100="g100",t.G90="g90",t.G10="g10",t))(Dh||{}),Ut=(t=>(t.BACKGROUND="background",t.FILL="fill",t.STROKE="stroke",t.TOOLTIP="tooltip",t))(Ut||{}),A=(t=>(t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom",t))(A||{}),Le=(t=>(t.GRAPH_VIEW="graph_view",t.SLIDER_VIEW="slider_view",t))(Le||{}),xe=(t=>(t.END_LINE="end_line",t.MID_LINE="mid_line",t.FRONT_LINE="front_line",t.NONE="none",t))(xe||{}),Jt=(t=>(t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t))(Jt||{}),j=(t=>(t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio",t))(j||{}),Dr=(t=>(t.RIGHT="right",t.LEFT="left",t.TOP="top",t.BOTTOM="bottom",t))(Dr||{}),Ee=(t=>(t.LEFT="left",t.CENTER="center",t.RIGHT="right",t))(Ee||{}),Br=(t=>(t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t))(Br||{}),Lh=(t=>(t.TREE="tree",t.DENDROGRAM="dendrogram",t))(Lh||{}),kt=(t=>(t.ROW="row",t.COLUMN="column",t.ROW_REVERSE="row-reverse",t.COLUMN_REVERSE="column-reverse",t))(kt||{}),yt=(t=>(t.FIXED="fixed",t.PREFERRED="preferred",t.STRETCH="stretch",t))(yt||{}),xo=(t=>(t.CENTER="center",t))(xo||{}),Un=(t=>(t.GRID="grid",t.VERT_OR_HORIZ="vertOrHoriz",t.PIE="pie",t.DONUT="donut",t))(Un||{}),Rh=(t=>(t.SEMI="semi",t.FULL="full",t))(Rh||{}),_i=(t=>(t.ALWAYS="always",t.AUTO="auto",t.NEVER="never",t))(_i||{}),sn=(t=>(t.SCATTER="scatter",t.LINE="line",t.SIMPLE_BAR="simple-bar",t.STACKED_BAR="stacked-bar",t.GROUPED_BAR="grouped-bar",t.AREA="area",t.STACKED_AREA="stacked-area",t))(sn||{}),gt=(t=>(t.EXPORT_CSV="Export as CSV",t.EXPORT_PNG="Export as PNG",t.EXPORT_JPG="Export as JPG",t.ZOOM_IN="Zoom in",t.ZOOM_OUT="Zoom out",t.RESET_ZOOM="Reset zoom",t.MAKE_FULLSCREEN="Make fullscreen",t.EXIT_FULLSCREEN="Exit fullscreen",t.SHOW_AS_DATATABLE="Show as data-table",t.CUSTOM="Custom",t))(gt||{}),xs=(t=>(t.LEFT="left",t.RIGHT="right",t))(xs||{}),It=(t=>(t.CHECKBOX="checkbox",t.RADIUS="radius",t.AREA="area",t.SIZE="size",t.LINE="line",t.QUARTILE="quartile",t.ZOOM="zoom",t))(It||{}),Ih=(t=>(t.ON="on",t.AUTO="auto",t.OFF="off",t))(Ih||{}),ya=(t=>(t.DEFAULT="default",t.HOVERABLE="hoverable",t))(ya||{}),Ph=(t=>(t.geoEqualEarth="geoEqualEarth",t.geoAlbers="geoAlbers",t.geoConicEqualArea="geoConicEqualArea",t.geoConicEquidistant="geoConicEquidistant",t.geoEquirectangular="geoEquirectangular",t.geoMercator="geoMercator",t.geoNaturalEarth1="geoNaturalEarth1",t))(Ph||{}),Nh=(t=>(t["15seconds"]="15seconds",t.minute="minute",t["30minutes"]="30minutes",t.hourly="hourly",t.daily="daily",t.weekly="weekly",t.monthly="monthly",t.quarterly="quarterly",t.yearly="yearly",t))(Nh||{});function Wo(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}function fr(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):s;i=t.formattingValues[a]||t.formattingValues[s]}else{const s=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[s]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}function pr(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const s=o[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?ig(a,h=>h.test(s)):rg(a,h=>h.test(s));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}function rg(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ig(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function og(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let s=t.valueCallback?t.valueCallback(o[0]):o[0];s=n.valueCallback?n.valueCallback(s):s;const a=e.slice(i.length);return{value:s,rest:a}}}function ct(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}let sg={};function To(){return sg}function Ur(t,e){var n,r,i,o;const s=To(),a=(e==null?void 0:e.weekStartsOn)??((r=(n=e==null?void 0:e.locale)==null?void 0:n.options)==null?void 0:r.weekStartsOn)??s.weekStartsOn??((o=(i=s.locale)==null?void 0:i.options)==null?void 0:o.weekStartsOn)??0,l=ct(t),c=l.getDay(),u=(c<a?7:0)+c-a;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}const ag={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lg=(t,e,n)=>{let r;const i=ag[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},cg={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ug=(t,e,n,r)=>cg[t],hg={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dg={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fg={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pg={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gg={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mg={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vg=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},yg={ordinalNumber:vg,era:fr({values:hg,defaultWidth:"wide"}),quarter:fr({values:dg,defaultWidth:"wide",argumentCallback:t=>t-1}),month:fr({values:fg,defaultWidth:"wide"}),day:fr({values:pg,defaultWidth:"wide"}),dayPeriod:fr({values:gg,defaultWidth:"wide",formattingValues:mg,defaultFormattingWidth:"wide"})},bg=/^(\d+)(th|st|nd|rd)?/i,_g=/\d+/i,wg={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xg={any:[/^b/i,/^(a|c)/i]},Tg={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Eg={any:[/1/i,/2/i,/3/i,/4/i]},Og={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Sg={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mg={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ag={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Cg={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$g={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},kg={ordinalNumber:og({matchPattern:bg,parsePattern:_g,valueCallback:t=>parseInt(t,10)}),era:pr({matchPatterns:wg,defaultMatchWidth:"wide",parsePatterns:xg,defaultParseWidth:"any"}),quarter:pr({matchPatterns:Tg,defaultMatchWidth:"wide",parsePatterns:Eg,defaultParseWidth:"any",valueCallback:t=>t+1}),month:pr({matchPatterns:Og,defaultMatchWidth:"wide",parsePatterns:Sg,defaultParseWidth:"any"}),day:pr({matchPatterns:Mg,defaultMatchWidth:"wide",parsePatterns:Ag,defaultParseWidth:"any"}),dayPeriod:pr({matchPatterns:Cg,defaultMatchWidth:"any",parsePatterns:$g,defaultParseWidth:"any"})},Dg={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Lg={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rg={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ig={date:Wo({formats:Dg,defaultWidth:"full"}),time:Wo({formats:Lg,defaultWidth:"full"}),dateTime:Wo({formats:Rg,defaultWidth:"full"})},Bh={code:"en-US",formatDistance:lg,formatLong:Ig,formatRelative:ug,localize:yg,match:kg,options:{weekStartsOn:0,firstWeekContainsDate:1}};var Uh=typeof global=="object"&&global&&global.Object===Object&&global,Pg=typeof self=="object"&&self&&self.Object===Object&&self,Se=Uh||Pg||Function("return this")(),ge=Se.Symbol,Hh=Object.prototype,Ng=Hh.hasOwnProperty,Bg=Hh.toString,gr=ge?ge.toStringTag:void 0;function Ug(t){var e=Ng.call(t,gr),n=t[gr];try{t[gr]=void 0;var r=!0}catch{}var i=Bg.call(t);return r&&(e?t[gr]=n:delete t[gr]),i}var Hg=Object.prototype,Fg=Hg.toString;function Vg(t){return Fg.call(t)}var jg="[object Null]",Gg="[object Undefined]",Nl=ge?ge.toStringTag:void 0;function Sn(t){return t==null?t===void 0?Gg:jg:Nl&&Nl in Object(t)?Ug(t):Vg(t)}function Pe(t){return t!=null&&typeof t=="object"}var zg="[object Symbol]";function Eo(t){return typeof t=="symbol"||Pe(t)&&Sn(t)==zg}function Fh(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Yt=Array.isArray,Wg=1/0,Bl=ge?ge.prototype:void 0,Ul=Bl?Bl.toString:void 0;function Vh(t){if(typeof t=="string")return t;if(Yt(t))return Fh(t,Vh)+"";if(Eo(t))return Ul?Ul.call(t):"";var e=t+"";return e=="0"&&1/t==-Wg?"-0":e}function me(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function ba(t){return t}var Yg="[object AsyncFunction]",Zg="[object Function]",Xg="[object GeneratorFunction]",qg="[object Proxy]";function _a(t){if(!me(t))return!1;var e=Sn(t);return e==Zg||e==Xg||e==Yg||e==qg}var Yo=Se["__core-js_shared__"],Hl=function(){var t=/[^.]+$/.exec(Yo&&Yo.keys&&Yo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Kg(t){return!!Hl&&Hl in t}var Qg=Function.prototype,Jg=Qg.toString;function Mn(t){if(t!=null){try{return Jg.call(t)}catch{}try{return t+""}catch{}}return""}var tm=/[\\^$.*+?()[\]{}|]/g,em=/^\[object .+?Constructor\]$/,nm=Function.prototype,rm=Object.prototype,im=nm.toString,om=rm.hasOwnProperty,sm=RegExp("^"+im.call(om).replace(tm,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function am(t){if(!me(t)||Kg(t))return!1;var e=_a(t)?sm:em;return e.test(Mn(t))}function lm(t,e){return t==null?void 0:t[e]}function An(t,e){var n=lm(t,e);return am(n)?n:void 0}var Ts=An(Se,"WeakMap"),Fl=Object.create,cm=function(){function t(){}return function(e){if(!me(e))return{};if(Fl)return Fl(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function um(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function hm(){}function jh(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var dm=800,fm=16,pm=Date.now;function gm(t){var e=0,n=0;return function(){var r=pm(),i=fm-(r-n);if(n=r,i>0){if(++e>=dm)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function mm(t){return function(){return t}}var Fi=function(){try{var t=An(Object,"defineProperty");return t({},"",{}),t}catch{}}(),vm=Fi?function(t,e){return Fi(t,"toString",{configurable:!0,enumerable:!1,value:mm(e),writable:!0})}:ba,Gh=gm(vm);function ym(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function bm(t,e,n,r){for(var i=t.length,o=n+-1;++o<i;)if(e(t[o],o,t))return o;return-1}function _m(t){return t!==t}function wm(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function xm(t,e,n){return e===e?wm(t,e,n):bm(t,_m,n)}function Tm(t,e){var n=t==null?0:t.length;return!!n&&xm(t,e,0)>-1}var Em=9007199254740991,Om=/^(?:0|[1-9]\d*)$/;function wa(t,e){var n=typeof t;return e=e??Em,!!e&&(n=="number"||n!="symbol"&&Om.test(t))&&t>-1&&t%1==0&&t<e}function Oo(t,e,n){e=="__proto__"&&Fi?Fi(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Kr(t,e){return t===e||t!==t&&e!==e}var Sm=Object.prototype,Mm=Sm.hasOwnProperty;function zh(t,e,n){var r=t[e];(!(Mm.call(t,e)&&Kr(r,n))||n===void 0&&!(e in t))&&Oo(t,e,n)}function cr(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=void 0;l===void 0&&(l=t[a]),i?Oo(n,a,l):zh(n,a,l)}return n}var Vl=Math.max;function Wh(t,e,n){return e=Vl(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Vl(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),um(t,this,a)}}function xa(t,e){return Gh(Wh(t,e,ba),t+"")}var Am=9007199254740991;function Ta(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Am}function ur(t){return t!=null&&Ta(t.length)&&!_a(t)}function Cm(t,e,n){if(!me(n))return!1;var r=typeof e;return(r=="number"?ur(n)&&wa(e,n.length):r=="string"&&e in n)?Kr(n[e],t):!1}function $m(t){return xa(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,s&&Cm(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e})}var km=Object.prototype;function So(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||km;return t===n}function Dm(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Lm="[object Arguments]";function jl(t){return Pe(t)&&Sn(t)==Lm}var Yh=Object.prototype,Rm=Yh.hasOwnProperty,Im=Yh.propertyIsEnumerable,Jn=jl(function(){return arguments}())?jl:function(t){return Pe(t)&&Rm.call(t,"callee")&&!Im.call(t,"callee")};function Pm(){return!1}var Zh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Gl=Zh&&typeof module=="object"&&module&&!module.nodeType&&module,Nm=Gl&&Gl.exports===Zh,zl=Nm?Se.Buffer:void 0,Bm=zl?zl.isBuffer:void 0,tr=Bm||Pm,Um="[object Arguments]",Hm="[object Array]",Fm="[object Boolean]",Vm="[object Date]",jm="[object Error]",Gm="[object Function]",zm="[object Map]",Wm="[object Number]",Ym="[object Object]",Zm="[object RegExp]",Xm="[object Set]",qm="[object String]",Km="[object WeakMap]",Qm="[object ArrayBuffer]",Jm="[object DataView]",tv="[object Float32Array]",ev="[object Float64Array]",nv="[object Int8Array]",rv="[object Int16Array]",iv="[object Int32Array]",ov="[object Uint8Array]",sv="[object Uint8ClampedArray]",av="[object Uint16Array]",lv="[object Uint32Array]",xt={};xt[tv]=xt[ev]=xt[nv]=xt[rv]=xt[iv]=xt[ov]=xt[sv]=xt[av]=xt[lv]=!0;xt[Um]=xt[Hm]=xt[Qm]=xt[Fm]=xt[Jm]=xt[Vm]=xt[jm]=xt[Gm]=xt[zm]=xt[Wm]=xt[Ym]=xt[Zm]=xt[Xm]=xt[qm]=xt[Km]=!1;function cv(t){return Pe(t)&&Ta(t.length)&&!!xt[Sn(t)]}function Ea(t){return function(e){return t(e)}}var Xh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Lr=Xh&&typeof module=="object"&&module&&!module.nodeType&&module,uv=Lr&&Lr.exports===Xh,Zo=uv&&Uh.process,er=function(){try{var t=Lr&&Lr.require&&Lr.require("util").types;return t||Zo&&Zo.binding&&Zo.binding("util")}catch{}}(),Wl=er&&er.isTypedArray,Mo=Wl?Ea(Wl):cv,hv=Object.prototype,dv=hv.hasOwnProperty;function qh(t,e){var n=Yt(t),r=!n&&Jn(t),i=!n&&!r&&tr(t),o=!n&&!r&&!i&&Mo(t),s=n||r||i||o,a=s?Dm(t.length,String):[],l=a.length;for(var c in t)(e||dv.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||wa(c,l)))&&a.push(c);return a}function Kh(t,e){return function(n){return t(e(n))}}var fv=Kh(Object.keys,Object),pv=Object.prototype,gv=pv.hasOwnProperty;function Qh(t){if(!So(t))return fv(t);var e=[];for(var n in Object(t))gv.call(t,n)&&n!="constructor"&&e.push(n);return e}function Qr(t){return ur(t)?qh(t):Qh(t)}function mv(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var vv=Object.prototype,yv=vv.hasOwnProperty;function bv(t){if(!me(t))return mv(t);var e=So(t),n=[];for(var r in t)r=="constructor"&&(e||!yv.call(t,r))||n.push(r);return n}function Jr(t){return ur(t)?qh(t,!0):bv(t)}var _v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wv=/^\w*$/;function Oa(t,e){if(Yt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Eo(t)?!0:wv.test(t)||!_v.test(t)||e!=null&&t in Object(e)}var Hr=An(Object,"create");function xv(){this.__data__=Hr?Hr(null):{},this.size=0}function Tv(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ev="__lodash_hash_undefined__",Ov=Object.prototype,Sv=Ov.hasOwnProperty;function Mv(t){var e=this.__data__;if(Hr){var n=e[t];return n===Ev?void 0:n}return Sv.call(e,t)?e[t]:void 0}var Av=Object.prototype,Cv=Av.hasOwnProperty;function $v(t){var e=this.__data__;return Hr?e[t]!==void 0:Cv.call(e,t)}var kv="__lodash_hash_undefined__";function Dv(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Hr&&e===void 0?kv:e,this}function _n(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_n.prototype.clear=xv;_n.prototype.delete=Tv;_n.prototype.get=Mv;_n.prototype.has=$v;_n.prototype.set=Dv;function Lv(){this.__data__=[],this.size=0}function Ao(t,e){for(var n=t.length;n--;)if(Kr(t[n][0],e))return n;return-1}var Rv=Array.prototype,Iv=Rv.splice;function Pv(t){var e=this.__data__,n=Ao(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Iv.call(e,n,1),--this.size,!0}function Nv(t){var e=this.__data__,n=Ao(e,t);return n<0?void 0:e[n][1]}function Bv(t){return Ao(this.__data__,t)>-1}function Uv(t,e){var n=this.__data__,r=Ao(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function tn(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}tn.prototype.clear=Lv;tn.prototype.delete=Pv;tn.prototype.get=Nv;tn.prototype.has=Bv;tn.prototype.set=Uv;var Fr=An(Se,"Map");function Hv(){this.size=0,this.__data__={hash:new _n,map:new(Fr||tn),string:new _n}}function Fv(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Co(t,e){var n=t.__data__;return Fv(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Vv(t){var e=Co(this,t).delete(t);return this.size-=e?1:0,e}function jv(t){return Co(this,t).get(t)}function Gv(t){return Co(this,t).has(t)}function zv(t,e){var n=Co(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function en(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}en.prototype.clear=Hv;en.prototype.delete=Vv;en.prototype.get=jv;en.prototype.has=Gv;en.prototype.set=zv;var Wv="Expected a function";function Sa(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Wv);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Sa.Cache||en),n}Sa.Cache=en;var Yv=500;function Zv(t){var e=Sa(t,function(r){return n.size===Yv&&n.clear(),r}),n=e.cache;return e}var Xv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qv=/\\(\\)?/g,Kv=Zv(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Xv,function(n,r,i,o){e.push(i?o.replace(qv,"$1"):r||n)}),e});function Qv(t){return t==null?"":Vh(t)}function $o(t,e){return Yt(t)?t:Oa(t,e)?[t]:Kv(Qv(t))}var Jv=1/0;function ti(t){if(typeof t=="string"||Eo(t))return t;var e=t+"";return e=="0"&&1/t==-Jv?"-0":e}function Ma(t,e){e=$o(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[ti(e[n++])];return n&&n==r?t:void 0}function Hn(t,e,n){var r=t==null?void 0:Ma(t,e);return r===void 0?n:r}function Aa(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Yl=ge?ge.isConcatSpreadable:void 0;function ty(t){return Yt(t)||Jn(t)||!!(Yl&&t&&t[Yl])}function Jh(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=ty),i||(i=[]);++o<s;){var a=t[o];n(a)?Aa(i,a):r||(i[i.length]=a)}return i}var Ca=Kh(Object.getPrototypeOf,Object),ey="[object Object]",ny=Function.prototype,ry=Object.prototype,td=ny.toString,iy=ry.hasOwnProperty,oy=td.call(Object);function ed(t){if(!Pe(t)||Sn(t)!=ey)return!1;var e=Ca(t);if(e===null)return!0;var n=iy.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&td.call(n)==oy}function sy(){this.__data__=new tn,this.size=0}function ay(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function ly(t){return this.__data__.get(t)}function cy(t){return this.__data__.has(t)}var uy=200;function hy(t,e){var n=this.__data__;if(n instanceof tn){var r=n.__data__;if(!Fr||r.length<uy-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new en(r)}return n.set(t,e),this.size=n.size,this}function Te(t){var e=this.__data__=new tn(t);this.size=e.size}Te.prototype.clear=sy;Te.prototype.delete=ay;Te.prototype.get=ly;Te.prototype.has=cy;Te.prototype.set=hy;function dy(t,e){return t&&cr(e,Qr(e),t)}function fy(t,e){return t&&cr(e,Jr(e),t)}var nd=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Zl=nd&&typeof module=="object"&&module&&!module.nodeType&&module,py=Zl&&Zl.exports===nd,Xl=py?Se.Buffer:void 0,ql=Xl?Xl.allocUnsafe:void 0;function rd(t,e){if(e)return t.slice();var n=t.length,r=ql?ql(n):new t.constructor(n);return t.copy(r),r}function gy(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function id(){return[]}var my=Object.prototype,vy=my.propertyIsEnumerable,Kl=Object.getOwnPropertySymbols,$a=Kl?function(t){return t==null?[]:(t=Object(t),gy(Kl(t),function(e){return vy.call(t,e)}))}:id;function yy(t,e){return cr(t,$a(t),e)}var by=Object.getOwnPropertySymbols,od=by?function(t){for(var e=[];t;)Aa(e,$a(t)),t=Ca(t);return e}:id;function _y(t,e){return cr(t,od(t),e)}function sd(t,e,n){var r=e(t);return Yt(t)?r:Aa(r,n(t))}function Es(t){return sd(t,Qr,$a)}function ad(t){return sd(t,Jr,od)}var Os=An(Se,"DataView"),Ss=An(Se,"Promise"),Wn=An(Se,"Set"),Ql="[object Map]",wy="[object Object]",Jl="[object Promise]",tc="[object Set]",ec="[object WeakMap]",nc="[object DataView]",xy=Mn(Os),Ty=Mn(Fr),Ey=Mn(Ss),Oy=Mn(Wn),Sy=Mn(Ts),fe=Sn;(Os&&fe(new Os(new ArrayBuffer(1)))!=nc||Fr&&fe(new Fr)!=Ql||Ss&&fe(Ss.resolve())!=Jl||Wn&&fe(new Wn)!=tc||Ts&&fe(new Ts)!=ec)&&(fe=function(t){var e=Sn(t),n=e==wy?t.constructor:void 0,r=n?Mn(n):"";if(r)switch(r){case xy:return nc;case Ty:return Ql;case Ey:return Jl;case Oy:return tc;case Sy:return ec}return e});var My=Object.prototype,Ay=My.hasOwnProperty;function Cy(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Ay.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Vi=Se.Uint8Array;function ka(t){var e=new t.constructor(t.byteLength);return new Vi(e).set(new Vi(t)),e}function $y(t,e){var n=e?ka(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var ky=/\w*$/;function Dy(t){var e=new t.constructor(t.source,ky.exec(t));return e.lastIndex=t.lastIndex,e}var rc=ge?ge.prototype:void 0,ic=rc?rc.valueOf:void 0;function Ly(t){return ic?Object(ic.call(t)):{}}function ld(t,e){var n=e?ka(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Ry="[object Boolean]",Iy="[object Date]",Py="[object Map]",Ny="[object Number]",By="[object RegExp]",Uy="[object Set]",Hy="[object String]",Fy="[object Symbol]",Vy="[object ArrayBuffer]",jy="[object DataView]",Gy="[object Float32Array]",zy="[object Float64Array]",Wy="[object Int8Array]",Yy="[object Int16Array]",Zy="[object Int32Array]",Xy="[object Uint8Array]",qy="[object Uint8ClampedArray]",Ky="[object Uint16Array]",Qy="[object Uint32Array]";function Jy(t,e,n){var r=t.constructor;switch(e){case Vy:return ka(t);case Ry:case Iy:return new r(+t);case jy:return $y(t,n);case Gy:case zy:case Wy:case Yy:case Zy:case Xy:case qy:case Ky:case Qy:return ld(t,n);case Py:return new r;case Ny:case Hy:return new r(t);case By:return Dy(t);case Uy:return new r;case Fy:return Ly(t)}}function cd(t){return typeof t.constructor=="function"&&!So(t)?cm(Ca(t)):{}}var t1="[object Map]";function e1(t){return Pe(t)&&fe(t)==t1}var oc=er&&er.isMap,n1=oc?Ea(oc):e1,r1="[object Set]";function i1(t){return Pe(t)&&fe(t)==r1}var sc=er&&er.isSet,o1=sc?Ea(sc):i1,s1=1,a1=2,l1=4,ud="[object Arguments]",c1="[object Array]",u1="[object Boolean]",h1="[object Date]",d1="[object Error]",hd="[object Function]",f1="[object GeneratorFunction]",p1="[object Map]",g1="[object Number]",dd="[object Object]",m1="[object RegExp]",v1="[object Set]",y1="[object String]",b1="[object Symbol]",_1="[object WeakMap]",w1="[object ArrayBuffer]",x1="[object DataView]",T1="[object Float32Array]",E1="[object Float64Array]",O1="[object Int8Array]",S1="[object Int16Array]",M1="[object Int32Array]",A1="[object Uint8Array]",C1="[object Uint8ClampedArray]",$1="[object Uint16Array]",k1="[object Uint32Array]",vt={};vt[ud]=vt[c1]=vt[w1]=vt[x1]=vt[u1]=vt[h1]=vt[T1]=vt[E1]=vt[O1]=vt[S1]=vt[M1]=vt[p1]=vt[g1]=vt[dd]=vt[m1]=vt[v1]=vt[y1]=vt[b1]=vt[A1]=vt[C1]=vt[$1]=vt[k1]=!0;vt[d1]=vt[hd]=vt[_1]=!1;function Rr(t,e,n,r,i,o){var s,a=e&s1,l=e&a1,c=e&l1;if(n&&(s=i?n(t,r,i,o):n(t)),s!==void 0)return s;if(!me(t))return t;var u=Yt(t);if(u){if(s=Cy(t),!a)return jh(t,s)}else{var h=fe(t),f=h==hd||h==f1;if(tr(t))return rd(t,a);if(h==dd||h==ud||f&&!i){if(s=l||f?{}:cd(t),!a)return l?_y(t,fy(s,t)):yy(t,dy(s,t))}else{if(!vt[h])return i?t:{};s=Jy(t,h,a)}}o||(o=new Te);var d=o.get(t);if(d)return d;o.set(t,s),o1(t)?t.forEach(function(g){s.add(Rr(g,e,n,g,t,o))}):n1(t)&&t.forEach(function(g,m){s.set(m,Rr(g,e,n,m,t,o))});var p=c?l?ad:Es:l?Jr:Qr,v=u?void 0:p(t);return ym(v||t,function(g,m){v&&(m=g,g=t[m]),zh(s,m,Rr(g,e,n,m,t,o))}),s}var D1=1,L1=4;function ko(t){return Rr(t,D1|L1)}var R1="__lodash_hash_undefined__";function I1(t){return this.__data__.set(t,R1),this}function P1(t){return this.__data__.has(t)}function Vr(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new en;++e<n;)this.add(t[e])}Vr.prototype.add=Vr.prototype.push=I1;Vr.prototype.has=P1;function fd(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function pd(t,e){return t.has(e)}var N1=1,B1=2;function gd(t,e,n,r,i,o){var s=n&N1,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var h=-1,f=!0,d=n&B1?new Vr:void 0;for(o.set(t,e),o.set(e,t);++h<a;){var p=t[h],v=e[h];if(r)var g=s?r(v,p,h,e,t,o):r(p,v,h,t,e,o);if(g!==void 0){if(g)continue;f=!1;break}if(d){if(!fd(e,function(m,_){if(!pd(d,_)&&(p===m||i(p,m,n,r,o)))return d.push(_)})){f=!1;break}}else if(!(p===v||i(p,v,n,r,o))){f=!1;break}}return o.delete(t),o.delete(e),f}function U1(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function Da(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var H1=1,F1=2,V1="[object Boolean]",j1="[object Date]",G1="[object Error]",z1="[object Map]",W1="[object Number]",Y1="[object RegExp]",Z1="[object Set]",X1="[object String]",q1="[object Symbol]",K1="[object ArrayBuffer]",Q1="[object DataView]",ac=ge?ge.prototype:void 0,Xo=ac?ac.valueOf:void 0;function J1(t,e,n,r,i,o,s){switch(n){case Q1:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case K1:return!(t.byteLength!=e.byteLength||!o(new Vi(t),new Vi(e)));case V1:case j1:case W1:return Kr(+t,+e);case G1:return t.name==e.name&&t.message==e.message;case Y1:case X1:return t==e+"";case z1:var a=U1;case Z1:var l=r&H1;if(a||(a=Da),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=F1,s.set(t,e);var u=gd(a(t),a(e),r,i,o,s);return s.delete(t),u;case q1:if(Xo)return Xo.call(t)==Xo.call(e)}return!1}var t0=1,e0=Object.prototype,n0=e0.hasOwnProperty;function r0(t,e,n,r,i,o){var s=n&t0,a=Es(t),l=a.length,c=Es(e),u=c.length;if(l!=u&&!s)return!1;for(var h=l;h--;){var f=a[h];if(!(s?f in e:n0.call(e,f)))return!1}var d=o.get(t),p=o.get(e);if(d&&p)return d==e&&p==t;var v=!0;o.set(t,e),o.set(e,t);for(var g=s;++h<l;){f=a[h];var m=t[f],_=e[f];if(r)var w=s?r(_,m,f,e,t,o):r(m,_,f,t,e,o);if(!(w===void 0?m===_||i(m,_,n,r,o):w)){v=!1;break}g||(g=f=="constructor")}if(v&&!g){var E=t.constructor,x=e.constructor;E!=x&&"constructor"in t&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof x=="function"&&x instanceof x)&&(v=!1)}return o.delete(t),o.delete(e),v}var i0=1,lc="[object Arguments]",cc="[object Array]",ci="[object Object]",o0=Object.prototype,uc=o0.hasOwnProperty;function s0(t,e,n,r,i,o){var s=Yt(t),a=Yt(e),l=s?cc:fe(t),c=a?cc:fe(e);l=l==lc?ci:l,c=c==lc?ci:c;var u=l==ci,h=c==ci,f=l==c;if(f&&tr(t)){if(!tr(e))return!1;s=!0,u=!1}if(f&&!u)return o||(o=new Te),s||Mo(t)?gd(t,e,n,r,i,o):J1(t,e,l,n,r,i,o);if(!(n&i0)){var d=u&&uc.call(t,"__wrapped__"),p=h&&uc.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,g=p?e.value():e;return o||(o=new Te),i(v,g,n,r,o)}}return f?(o||(o=new Te),r0(t,e,n,r,i,o)):!1}function Do(t,e,n,r,i){return t===e?!0:t==null||e==null||!Pe(t)&&!Pe(e)?t!==t&&e!==e:s0(t,e,n,r,Do,i)}var a0=1,l0=2;function c0(t,e,n,r){var i=n.length,o=i;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var a=s[0],l=t[a],c=s[1];if(s[2]){if(l===void 0&&!(a in t))return!1}else{var u=new Te,h;if(!(h===void 0?Do(c,l,a0|l0,r,u):h))return!1}}return!0}function md(t){return t===t&&!me(t)}function u0(t){for(var e=Qr(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,md(i)]}return e}function vd(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function h0(t){var e=u0(t);return e.length==1&&e[0][2]?vd(e[0][0],e[0][1]):function(n){return n===t||c0(n,t,e)}}function d0(t,e){return t!=null&&e in Object(t)}function f0(t,e,n){e=$o(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var s=ti(e[r]);if(!(o=t!=null&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&Ta(i)&&wa(s,i)&&(Yt(t)||Jn(t)))}function p0(t,e){return t!=null&&f0(t,e,d0)}var g0=1,m0=2;function v0(t,e){return Oa(t)&&md(e)?vd(ti(t),e):function(n){var r=Hn(n,t);return r===void 0&&r===e?p0(n,t):Do(e,r,g0|m0)}}function y0(t){return function(e){return e==null?void 0:e[t]}}function b0(t){return function(e){return Ma(e,t)}}function _0(t){return Oa(t)?y0(ti(t)):b0(t)}function La(t){return typeof t=="function"?t:t==null?ba:typeof t=="object"?Yt(t)?v0(t[0],t[1]):h0(t):_0(t)}function w0(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[++i];if(n(o[l],l,o)===!1)break}return e}}var yd=w0();function Ms(t,e,n){(n!==void 0&&!Kr(t[e],n)||n===void 0&&!(e in t))&&Oo(t,e,n)}function As(t){return Pe(t)&&ur(t)}function Cs(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function x0(t){return cr(t,Jr(t))}function T0(t,e,n,r,i,o,s){var a=Cs(t,n),l=Cs(e,n),c=s.get(l);if(c){Ms(t,n,c);return}var u=o?o(a,l,n+"",t,e,s):void 0,h=u===void 0;if(h){var f=Yt(l),d=!f&&tr(l),p=!f&&!d&&Mo(l);u=l,f||d||p?Yt(a)?u=a:As(a)?u=jh(a):d?(h=!1,u=rd(l,!0)):p?(h=!1,u=ld(l,!0)):u=[]:ed(l)||Jn(l)?(u=a,Jn(a)?u=x0(a):(!me(a)||_a(a))&&(u=cd(l))):h=!1}h&&(s.set(l,u),i(u,l,r,o,s),s.delete(l)),Ms(t,n,u)}function bd(t,e,n,r,i){t!==e&&yd(e,function(o,s){if(i||(i=new Te),me(o))T0(t,e,s,n,bd,r,i);else{var a=r?r(Cs(t,s),o,s+"",t,e,i):void 0;a===void 0&&(a=o),Ms(t,s,a)}},Jr)}function _d(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var E0="[object Map]",O0="[object Set]",S0=Object.prototype,M0=S0.hasOwnProperty;function A0(t){if(t==null)return!0;if(ur(t)&&(Yt(t)||typeof t=="string"||typeof t.splice=="function"||tr(t)||Mo(t)||Jn(t)))return!t.length;var e=fe(t);if(e==E0||e==O0)return!t.size;if(So(t))return!Qh(t).length;for(var n in t)if(M0.call(t,n))return!1;return!0}var J=$m(function(t,e,n){bd(t,e,n)}),C0=1/0,$0=Wn&&1/Da(new Wn([,-0]))[1]==C0?function(t){return new Wn(t)}:hm,k0=200;function wd(t,e,n){var r=-1,i=Tm,o=t.length,s=!0,a=[],l=a;if(o>=k0){var c=e?null:$0(t);if(c)return Da(c);s=!1,i=pd,l=new Vr}else l=e?[]:a;t:for(;++r<o;){var u=t[r],h=e?e(u):u;if(u=u!==0?u:0,s&&h===h){for(var f=l.length;f--;)if(l[f]===h)continue t;e&&l.push(h),a.push(u)}else i(l,h,n)||(l!==a&&l.push(h),a.push(u))}return a}var D0=xa(function(t){var e=_d(t);return As(e)&&(e=void 0),wd(Jh(t,1,As,!0),La(e))});function jr(t){return t&&t.length?wd(t):[]}function wi(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function L0(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ra(t){let e,n,r;t.length!==2?(e=wi,n=(a,l)=>wi(t(a),l),r=(a,l)=>t(a)-l):(e=t===wi||t===L0?t:R0,n=t,r=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function s(a,l,c=0,u=a.length){const h=i(a,l,c,u-1);return h>c&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:i,center:s,right:o}}function R0(){return 0}function I0(t){return t===null?NaN:+t}const P0=Ra(wi),xd=P0.right;Ra(I0).center;function Yn(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}let hc=class extends Map{constructor(e,n=U0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(dc(this,e))}has(e){return super.has(dc(this,e))}set(e,n){return super.set(N0(this,e),n)}delete(e){return super.delete(B0(this,e))}};function dc({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function N0({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function B0({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function U0(t){return t!==null&&typeof t=="object"?t.valueOf():t}const H0=Math.sqrt(50),F0=Math.sqrt(10),V0=Math.sqrt(2);function ji(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=H0?10:o>=F0?5:o>=V0?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?ji(t,e,n*2):[a,l,c]}function Gi(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?ji(e,t,n):ji(t,e,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(i+c)/-s;else for(let c=0;c<a;++c)l[c]=(i+c)*s;return l}function nr(t,e,n){return e=+e,t=+t,n=+n,ji(t,e,n)[2]}function $s(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?nr(e,t,n):nr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function j0(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function G0(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}var z0={value:()=>{}};function Ia(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new xi(n)}function xi(t){this._=t}function W0(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}xi.prototype=Ia.prototype={constructor:xi,on:function(t,e){var n=this._,r=W0(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Y0(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=fc(n[i],t.name,e);else if(e==null)for(i in n)n[i]=fc(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new xi(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Y0(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function fc(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=z0,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ks="http://www.w3.org/1999/xhtml";const pc={svg:"http://www.w3.org/2000/svg",xhtml:ks,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lo(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),pc.hasOwnProperty(e)?{space:pc[e],local:t}:t}function Z0(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ks&&e.documentElement.namespaceURI===ks?e.createElement(t):e.createElementNS(n,t)}}function X0(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Td(t){var e=Lo(t);return(e.local?X0:Z0)(e)}function q0(){}function Pa(t){return t==null?q0:function(){return this.querySelector(t)}}function K0(t){typeof t!="function"&&(t=Pa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),l,c,u=0;u<s;++u)(l=o[u])&&(c=t.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new ue(r,this._parents)}function Q0(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function J0(){return[]}function Ed(t){return t==null?J0:function(){return this.querySelectorAll(t)}}function tb(t){return function(){return Q0(t.apply(this,arguments))}}function eb(t){typeof t=="function"?t=tb(t):t=Ed(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(r.push(t.call(l,l.__data__,c,s)),i.push(l));return new ue(r,i)}function Od(t){return function(){return this.matches(t)}}function Sd(t){return function(e){return e.matches(t)}}var nb=Array.prototype.find;function rb(t){return function(){return nb.call(this.children,t)}}function ib(){return this.firstElementChild}function ob(t){return this.select(t==null?ib:rb(typeof t=="function"?t:Sd(t)))}var sb=Array.prototype.filter;function ab(){return Array.from(this.children)}function lb(t){return function(){return sb.call(this.children,t)}}function cb(t){return this.selectAll(t==null?ab:lb(typeof t=="function"?t:Sd(t)))}function ub(t){typeof t!="function"&&(t=Od(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new ue(r,this._parents)}function Md(t){return new Array(t.length)}function hb(){return new ue(this._enter||this._groups.map(Md),this._parents)}function zi(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}zi.prototype={constructor:zi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function db(t){return function(){return t}}function fb(t,e,n,r,i,o){for(var s=0,a,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new zi(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function pb(t,e,n,r,i,o,s){var a,l,c=new Map,u=e.length,h=o.length,f=new Array(u),d;for(a=0;a<u;++a)(l=e[a])&&(f[a]=d=s.call(l,l.__data__,a,e)+"",c.has(d)?i[a]=l:c.set(d,l));for(a=0;a<h;++a)d=s.call(t,o[a],a,o)+"",(l=c.get(d))?(r[a]=l,l.__data__=o[a],c.delete(d)):n[a]=new zi(t,o[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(f[a])===l&&(i[a]=l)}function gb(t){return t.__data__}function mb(t,e){if(!arguments.length)return Array.from(this,gb);var n=e?pb:fb,r=this._parents,i=this._groups;typeof t!="function"&&(t=db(t));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],f=h.length,d=vb(t.call(u,u&&u.__data__,c,r)),p=d.length,v=a[c]=new Array(p),g=s[c]=new Array(p),m=l[c]=new Array(f);n(u,h,v,g,m,d,e);for(var _=0,w=0,E,x;_<p;++_)if(E=v[_]){for(_>=w&&(w=_+1);!(x=g[w])&&++w<p;);E._next=x||null}}return s=new ue(s,r),s._enter=a,s._exit=l,s}function vb(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yb(){return new ue(this._exit||this._groups.map(Md),this._parents)}function bb(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function _b(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=n[l],u=r[l],h=c.length,f=a[l]=new Array(h),d,p=0;p<h;++p)(d=c[p]||u[p])&&(f[p]=d);for(;l<i;++l)a[l]=n[l];return new ue(a,this._parents)}function wb(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function xb(t){t||(t=Tb);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),c,u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(e)}return new ue(i,this._parents).order()}function Tb(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Eb(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ob(){return Array.from(this)}function Sb(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Mb(){let t=0;for(const e of this)++t;return t}function Ab(){return!this.node()}function Cb(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function $b(t){return function(){this.removeAttribute(t)}}function kb(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Db(t,e){return function(){this.setAttribute(t,e)}}function Lb(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Rb(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ib(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Pb(t,e){var n=Lo(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?kb:$b:typeof e=="function"?n.local?Ib:Rb:n.local?Lb:Db)(n,e))}function Ad(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Nb(t){return function(){this.style.removeProperty(t)}}function Bb(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ub(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Hb(t,e,n){return arguments.length>1?this.each((e==null?Nb:typeof e=="function"?Ub:Bb)(t,e,n??"")):rr(this.node(),t)}function rr(t,e){return t.style.getPropertyValue(e)||Ad(t).getComputedStyle(t,null).getPropertyValue(e)}function Fb(t){return function(){delete this[t]}}function Vb(t,e){return function(){this[t]=e}}function jb(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Gb(t,e){return arguments.length>1?this.each((e==null?Fb:typeof e=="function"?jb:Vb)(t,e)):this.node()[t]}function Cd(t){return t.trim().split(/^|\s+/)}function Na(t){return t.classList||new $d(t)}function $d(t){this._node=t,this._names=Cd(t.getAttribute("class")||"")}$d.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function kd(t,e){for(var n=Na(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Dd(t,e){for(var n=Na(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function zb(t){return function(){kd(this,t)}}function Wb(t){return function(){Dd(this,t)}}function Yb(t,e){return function(){(e.apply(this,arguments)?kd:Dd)(this,t)}}function Zb(t,e){var n=Cd(t+"");if(arguments.length<2){for(var r=Na(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Yb:e?zb:Wb)(n,e))}function Xb(){this.textContent=""}function qb(t){return function(){this.textContent=t}}function Kb(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Qb(t){return arguments.length?this.each(t==null?Xb:(typeof t=="function"?Kb:qb)(t)):this.node().textContent}function Jb(){this.innerHTML=""}function t_(t){return function(){this.innerHTML=t}}function e_(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function n_(t){return arguments.length?this.each(t==null?Jb:(typeof t=="function"?e_:t_)(t)):this.node().innerHTML}function r_(){this.nextSibling&&this.parentNode.appendChild(this)}function i_(){return this.each(r_)}function o_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function s_(){return this.each(o_)}function a_(t){var e=typeof t=="function"?t:Td(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function l_(){return null}function c_(t,e){var n=typeof t=="function"?t:Td(t),r=e==null?l_:typeof e=="function"?e:Pa(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function u_(){var t=this.parentNode;t&&t.removeChild(this)}function h_(){return this.each(u_)}function d_(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function f_(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function p_(t){return this.select(t?f_:d_)}function g_(t){return arguments.length?this.property("__data__",t):this.node().__data__}function m_(t){return function(e){t.call(this,e,this.__data__)}}function v_(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function y_(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function b_(t,e,n){return function(){var r=this.__on,i,o=m_(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function __(t,e,n){var r=v_(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?b_:y_,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function Ld(t,e,n){var r=Ad(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function w_(t,e){return function(){return Ld(this,t,e)}}function x_(t,e){return function(){return Ld(this,t,e.apply(this,arguments))}}function T_(t,e){return this.each((typeof e=="function"?x_:w_)(t,e))}function*E_(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Rd=[null];function ue(t,e){this._groups=t,this._parents=e}function ei(){return new ue([[document.documentElement]],Rd)}function O_(){return this}ue.prototype=ei.prototype={constructor:ue,select:K0,selectAll:eb,selectChild:ob,selectChildren:cb,filter:ub,data:mb,enter:hb,exit:yb,join:bb,merge:_b,selection:O_,order:wb,sort:xb,call:Eb,nodes:Ob,node:Sb,size:Mb,empty:Ab,each:Cb,attr:Pb,style:Hb,property:Gb,classed:Zb,text:Qb,html:n_,raise:i_,lower:s_,append:a_,insert:c_,remove:h_,clone:p_,datum:g_,on:__,dispatch:T_,[Symbol.iterator]:E_};function S_(t){let e;for(;e=t.sourceEvent;)t=e;return t}function wn(t,e){if(t=S_(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Ba(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Id(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ni(){}var Gr=.7,Wi=1/Gr,Zn="\\s*([+-]?\\d+)\\s*",zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Re="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",M_=/^#([0-9a-f]{3,8})$/,A_=new RegExp(`^rgb\\(${Zn},${Zn},${Zn}\\)$`),C_=new RegExp(`^rgb\\(${Re},${Re},${Re}\\)$`),$_=new RegExp(`^rgba\\(${Zn},${Zn},${Zn},${zr}\\)$`),k_=new RegExp(`^rgba\\(${Re},${Re},${Re},${zr}\\)$`),D_=new RegExp(`^hsl\\(${zr},${Re},${Re}\\)$`),L_=new RegExp(`^hsla\\(${zr},${Re},${Re},${zr}\\)$`),gc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ba(ni,xn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:mc,formatHex:mc,formatHex8:R_,formatHsl:I_,formatRgb:vc,toString:vc});function mc(){return this.rgb().formatHex()}function R_(){return this.rgb().formatHex8()}function I_(){return Pd(this).formatHsl()}function vc(){return this.rgb().formatRgb()}function xn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=M_.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?yc(e):n===3?new re(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ui(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ui(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=A_.exec(t))?new re(e[1],e[2],e[3],1):(e=C_.exec(t))?new re(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=$_.exec(t))?ui(e[1],e[2],e[3],e[4]):(e=k_.exec(t))?ui(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=D_.exec(t))?wc(e[1],e[2]/100,e[3]/100,1):(e=L_.exec(t))?wc(e[1],e[2]/100,e[3]/100,e[4]):gc.hasOwnProperty(t)?yc(gc[t]):t==="transparent"?new re(NaN,NaN,NaN,0):null}function yc(t){return new re(t>>16&255,t>>8&255,t&255,1)}function ui(t,e,n,r){return r<=0&&(t=e=n=NaN),new re(t,e,n,r)}function P_(t){return t instanceof ni||(t=xn(t)),t?(t=t.rgb(),new re(t.r,t.g,t.b,t.opacity)):new re}function Ds(t,e,n,r){return arguments.length===1?P_(t):new re(t,e,n,r??1)}function re(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ba(re,Ds,Id(ni,{brighter(t){return t=t==null?Wi:Math.pow(Wi,t),new re(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Gr:Math.pow(Gr,t),new re(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new re(bn(this.r),bn(this.g),bn(this.b),Yi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bc,formatHex:bc,formatHex8:N_,formatRgb:_c,toString:_c}));function bc(){return`#${yn(this.r)}${yn(this.g)}${yn(this.b)}`}function N_(){return`#${yn(this.r)}${yn(this.g)}${yn(this.b)}${yn((isNaN(this.opacity)?1:this.opacity)*255)}`}function _c(){const t=Yi(this.opacity);return`${t===1?"rgb(":"rgba("}${bn(this.r)}, ${bn(this.g)}, ${bn(this.b)}${t===1?")":`, ${t})`}`}function Yi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function yn(t){return t=bn(t),(t<16?"0":"")+t.toString(16)}function wc(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new we(t,e,n,r)}function Pd(t){if(t instanceof we)return new we(t.h,t.s,t.l,t.opacity);if(t instanceof ni||(t=xn(t)),!t)return new we;if(t instanceof we)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new we(s,a,l,t.opacity)}function B_(t,e,n,r){return arguments.length===1?Pd(t):new we(t,e,n,r??1)}function we(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ba(we,B_,Id(ni,{brighter(t){return t=t==null?Wi:Math.pow(Wi,t),new we(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gr:Math.pow(Gr,t),new we(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new re(qo(t>=240?t-240:t+120,i,r),qo(t,i,r),qo(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new we(xc(this.h),hi(this.s),hi(this.l),Yi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Yi(this.opacity);return`${t===1?"hsl(":"hsla("}${xc(this.h)}, ${hi(this.s)*100}%, ${hi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function xc(t){return t=(t||0)%360,t<0?t+360:t}function hi(t){return Math.max(0,Math.min(1,t||0))}function qo(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ua=t=>()=>t;function U_(t,e){return function(n){return t+n*e}}function H_(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function F_(t){return(t=+t)==1?Nd:function(e,n){return n-e?H_(e,n,t):Ua(isNaN(e)?n:e)}}function Nd(t,e){var n=e-t;return n?U_(t,n):Ua(isNaN(t)?e:t)}const Zi=function t(e){var n=F_(e);function r(i,o){var s=n((i=Ds(i)).r,(o=Ds(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=Nd(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function V_(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function j_(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function G_(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Ro(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function z_(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function _e(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function W_(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ro(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Ls=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ko=new RegExp(Ls.source,"g");function Y_(t){return function(){return t}}function Z_(t){return function(e){return t(e)+""}}function Bd(t,e){var n=Ls.lastIndex=Ko.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(r=Ls.exec(t))&&(i=Ko.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:_e(r,i)})),n=Ko.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Z_(l[0].x):Y_(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function Ro(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ua(e):(n==="number"?_e:n==="string"?(r=xn(e))?(e=r,Zi):Bd:e instanceof xn?Zi:e instanceof Date?z_:j_(e)?V_:Array.isArray(e)?G_:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?W_:_e)(t,e)}function X_(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Tc=180/Math.PI,Ud={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hd(t,e,n,r,i,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Tc,skewX:Math.atan(l)*Tc,scaleX:s,scaleY:a}}var di;function q_(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ud:Hd(e.a,e.b,e.c,e.d,e.e,e.f)}function K_(t){return t==null||(di||(di=document.createElementNS("http://www.w3.org/2000/svg","g")),di.setAttribute("transform",t),!(t=di.transform.baseVal.consolidate()))?Ud:(t=t.matrix,Hd(t.a,t.b,t.c,t.d,t.e,t.f))}function Fd(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,u,h,f,d,p){if(c!==h||u!==f){var v=d.push("translate(",null,e,null,n);p.push({i:v-4,x:_e(c,h)},{i:v-2,x:_e(u,f)})}else(h||f)&&d.push("translate("+h+e+f+n)}function s(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:_e(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function a(c,u,h,f){c!==u?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:_e(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,f,d,p){if(c!==h||u!==f){var v=d.push(i(d)+"scale(",null,",",null,")");p.push({i:v-4,x:_e(c,h)},{i:v-2,x:_e(u,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=t(c),u=t(u),o(c.translateX,c.translateY,u.translateX,u.translateY,h,f),s(c.rotate,u.rotate,h,f),a(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(d){for(var p=-1,v=f.length,g;++p<v;)h[(g=f[p]).i]=g.x(d);return h.join("")}}}var Q_=Fd(q_,"px, ","px)","deg)"),J_=Fd(K_,", ",")",")"),ir=0,Mr=0,mr=0,Vd=1e3,Xi,Ar,qi=0,Tn=0,Io=0,Wr=typeof performance=="object"&&performance.now?performance:Date,jd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ha(){return Tn||(jd(tw),Tn=Wr.now()+Io)}function tw(){Tn=0}function Ki(){this._call=this._time=this._next=null}Ki.prototype=Gd.prototype={constructor:Ki,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ha():+n)+(e==null?0:+e),!this._next&&Ar!==this&&(Ar?Ar._next=this:Xi=this,Ar=this),this._call=t,this._time=n,Rs()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rs())}};function Gd(t,e,n){var r=new Ki;return r.restart(t,e,n),r}function ew(){Ha(),++ir;for(var t=Xi,e;t;)(e=Tn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ir}function Ec(){Tn=(qi=Wr.now())+Io,ir=Mr=0;try{ew()}finally{ir=0,rw(),Tn=0}}function nw(){var t=Wr.now(),e=t-qi;e>Vd&&(Io-=e,qi=t)}function rw(){for(var t,e=Xi,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Xi=n);Ar=t,Rs(r)}function Rs(t){if(!ir){Mr&&(Mr=clearTimeout(Mr));var e=t-Tn;e>24?(t<1/0&&(Mr=setTimeout(Ec,t-Wr.now()-Io)),mr&&(mr=clearInterval(mr))):(mr||(qi=Wr.now(),mr=setInterval(nw,Vd)),ir=1,jd(Ec))}}function Oc(t,e,n){var r=new Ki;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var iw=Ia("start","end","cancel","interrupt"),ow=[],zd=0,Sc=1,Is=2,Ti=3,Mc=4,Ps=5,Ei=6;function Po(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;sw(t,n,{name:e,index:r,group:i,on:iw,tween:ow,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:zd})}function Fa(t,e){var n=Me(t,e);if(n.state>zd)throw new Error("too late; already scheduled");return n}function Ne(t,e){var n=Me(t,e);if(n.state>Ti)throw new Error("too late; already running");return n}function Me(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function sw(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Gd(o,0,n.time);function o(c){n.state=Sc,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,h,f,d;if(n.state!==Sc)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Ti)return Oc(s);d.state===Mc?(d.state=Ei,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=Ei,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(Oc(function(){n.state===Ti&&(n.state=Mc,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Is,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Is){for(n.state=Ti,i=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Ps,1),h=-1,f=i.length;++h<f;)i[h].call(t,u);n.state===Ps&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Ei,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Ns(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>Is&&r.state<Ps,r.state=Ei,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function aw(t){return this.each(function(){Ns(this,t)})}function lw(t,e){var n,r;return function(){var i=Ne(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function cw(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ne(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function uw(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Me(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?lw:cw)(n,t,e))}function Va(t,e,n){var r=t._id;return t.each(function(){var i=Ne(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Me(i,r).value[e]}}function Wd(t,e){var n;return(typeof e=="number"?_e:e instanceof xn?Zi:(n=xn(e))?(e=n,Zi):Bd)(t,e)}function hw(t){return function(){this.removeAttribute(t)}}function dw(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fw(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function pw(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function gw(t,e,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function mw(t,e,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function vw(t,e){var n=Lo(t),r=n==="transform"?J_:Wd;return this.attrTween(t,typeof e=="function"?(n.local?mw:gw)(n,r,Va(this,"attr."+t,e)):e==null?(n.local?dw:hw)(n):(n.local?pw:fw)(n,r,e))}function yw(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function bw(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function _w(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&bw(t,o)),n}return i._value=e,i}function ww(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&yw(t,o)),n}return i._value=e,i}function xw(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Lo(t);return this.tween(n,(r.local?_w:ww)(r,e))}function Tw(t,e){return function(){Fa(this,t).delay=+e.apply(this,arguments)}}function Ew(t,e){return e=+e,function(){Fa(this,t).delay=e}}function Ow(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Tw:Ew)(e,t)):Me(this.node(),e).delay}function Sw(t,e){return function(){Ne(this,t).duration=+e.apply(this,arguments)}}function Mw(t,e){return e=+e,function(){Ne(this,t).duration=e}}function Aw(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Sw:Mw)(e,t)):Me(this.node(),e).duration}function Cw(t,e){if(typeof e!="function")throw new Error;return function(){Ne(this,t).ease=e}}function $w(t){var e=this._id;return arguments.length?this.each(Cw(e,t)):Me(this.node(),e).ease}function kw(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ne(this,t).ease=n}}function Dw(t){if(typeof t!="function")throw new Error;return this.each(kw(this._id,t))}function Lw(t){typeof t!="function"&&(t=Od(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new Ke(r,this._parents,this._name,this._id)}function Rw(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=e[a],c=n[a],u=l.length,h=s[a]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;a<r;++a)s[a]=e[a];return new Ke(s,this._parents,this._name,this._id)}function Iw(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Pw(t,e,n){var r,i,o=Iw(e)?Fa:Ne;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function Nw(t,e){var n=this._id;return arguments.length<2?Me(this.node(),n).on.on(t):this.each(Pw(n,t,e))}function Bw(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Uw(){return this.on("end.remove",Bw(this._id))}function Hw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Pa(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,c=o[s]=new Array(l),u,h,f=0;f<l;++f)(u=a[f])&&(h=t.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,Po(c[f],e,n,f,c,Me(u,n)));return new Ke(o,this._parents,e,n)}function Fw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ed(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=t.call(u,u.__data__,h,l),d,p=Me(u,n),v=0,g=f.length;v<g;++v)(d=f[v])&&Po(d,e,n,v,f,p);o.push(f),s.push(u)}return new Ke(o,s,e,n)}var Vw=ei.prototype.constructor;function jw(){return new Vw(this._groups,this._parents)}function Gw(t,e){var n,r,i;return function(){var o=rr(this,t),s=(this.style.removeProperty(t),rr(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function Yd(t){return function(){this.style.removeProperty(t)}}function zw(t,e,n){var r,i=n+"",o;return function(){var s=rr(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function Ww(t,e,n){var r,i,o;return function(){var s=rr(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),rr(this,t))),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}function Yw(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var l=Ne(this,t),c=l.on,u=l.value[o]==null?a||(a=Yd(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}function Zw(t,e,n){var r=(t+="")=="transform"?Q_:Wd;return e==null?this.styleTween(t,Gw(t,r)).on("end.style."+t,Yd(t)):typeof e=="function"?this.styleTween(t,Ww(t,r,Va(this,"style."+t,e))).each(Yw(this._id,t)):this.styleTween(t,zw(t,r,e),n).on("end.style."+t,null)}function Xw(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function qw(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Xw(t,s,n)),r}return o._value=e,o}function Kw(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,qw(t,e,n??""))}function Qw(t){return function(){this.textContent=t}}function Jw(t){return function(){var e=t(this);this.textContent=e??""}}function tx(t){return this.tween("text",typeof t=="function"?Jw(Va(this,"text",t)):Qw(t==null?"":t+""))}function ex(t){return function(e){this.textContent=t.call(this,e)}}function nx(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&ex(i)),e}return r._value=t,r}function rx(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,nx(t))}function ix(){for(var t=this._name,e=this._id,n=Zd(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var u=Me(l,e);Po(l,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ke(r,this._parents,t,n)}function ox(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var c=Ne(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&o()})}var sx=0;function Ke(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Zd(){return++sx}var je=ei.prototype;Ke.prototype={constructor:Ke,select:Hw,selectAll:Fw,selectChild:je.selectChild,selectChildren:je.selectChildren,filter:Lw,merge:Rw,selection:jw,transition:ix,call:je.call,nodes:je.nodes,node:je.node,size:je.size,empty:je.empty,each:je.each,on:Nw,attr:vw,attrTween:xw,style:Zw,styleTween:Kw,text:tx,textTween:rx,remove:Uw,tween:uw,delay:Ow,duration:Aw,ease:$w,easeVarying:Dw,end:ox,[Symbol.iterator]:je[Symbol.iterator]};function Xd(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ax={time:null,delay:0,duration:250,ease:Xd};function lx(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function cx(t){var e,n;t instanceof Ke?(e=t._id,t=t._name):(e=Zd(),(n=ax).time=Ha(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&Po(l,t,e,c,s,n||lx(l,e));return new Ke(r,this._parents,t,e)}ei.prototype.interrupt=aw;ei.prototype.transition=cx;function ux(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Qi(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function or(t){return t=Qi(Math.abs(t)),t?t[1]:NaN}function hx(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function dx(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var fx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yr(t){if(!(e=fx.exec(t)))throw new Error("invalid format: "+t);var e;return new ja({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Yr.prototype=ja.prototype;function ja(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ja.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function px(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var qd;function gx(t,e){var n=Qi(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(qd=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Qi(t,Math.max(0,e+o-1))[0]}function Ac(t,e){var n=Qi(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Cc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ux,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ac(t*100,e),r:Ac,s:gx,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $c(t){return t}var kc=Array.prototype.map,Dc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function mx(t){var e=t.grouping===void 0||t.thousands===void 0?$c:hx(kc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?$c:dx(kc.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=Yr(h);var f=h.fill,d=h.align,p=h.sign,v=h.symbol,g=h.zero,m=h.width,_=h.comma,w=h.precision,E=h.trim,x=h.type;x==="n"?(_=!0,x="g"):Cc[x]||(w===void 0&&(w=12),E=!0,x="g"),(g||f==="0"&&d==="=")&&(g=!0,f="0",d="=");var T=v==="$"?n:v==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",O=v==="$"?r:/[%p]/.test(x)?s:"",M=Cc[x],P=/[defgprs%]/.test(x);w=w===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function I(k){var W=T,L=O,H,at,nt;if(x==="c")L=M(k)+L,k="";else{k=+k;var G=k<0||1/k<0;if(k=isNaN(k)?l:M(Math.abs(k),w),E&&(k=px(k)),G&&+k==0&&p!=="+"&&(G=!1),W=(G?p==="("?p:a:p==="-"||p==="("?"":p)+W,L=(x==="s"?Dc[8+qd/3]:"")+L+(G&&p==="("?")":""),P){for(H=-1,at=k.length;++H<at;)if(nt=k.charCodeAt(H),48>nt||nt>57){L=(nt===46?i+k.slice(H+1):k.slice(H))+L,k=k.slice(0,H);break}}}_&&!g&&(k=e(k,1/0));var Q=W.length+k.length+L.length,X=Q<m?new Array(m-Q+1).join(f):"";switch(_&&g&&(k=e(X+k,X.length?m-L.length:1/0),X=""),d){case"<":k=W+k+L+X;break;case"=":k=W+X+k+L;break;case"^":k=X.slice(0,Q=X.length>>1)+W+k+L+X.slice(Q);break;default:k=X+W+k+L;break}return o(k)}return I.toString=function(){return h+""},I}function u(h,f){var d=c((h=Yr(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(or(f)/3)))*3,v=Math.pow(10,-p),g=Dc[8+p/3];return function(m){return d(v*m)+g}}return{format:c,formatPrefix:u}}var fi,Ga,Kd;vx({thousands:",",grouping:[3],currency:["$",""]});function vx(t){return fi=mx(t),Ga=fi.format,Kd=fi.formatPrefix,fi}function yx(t){return Math.max(0,-or(Math.abs(t)))}function bx(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(or(e)/3)))*3-or(Math.abs(t)))}function _x(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,or(e)-or(t))+1}function ri(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Lc=Symbol("implicit");function za(){var t=new hc,e=[],n=[],r=Lc;function i(o){let s=t.get(o);if(s===void 0){if(r!==Lc)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new hc;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return za(e,n).unknown(r)},ri.apply(i,arguments),i}function wx(t){return function(){return t}}function xx(t){return+t}var Rc=[0,1];function Fn(t){return t}function Bs(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:wx(isNaN(e)?NaN:.5)}function Tx(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ex(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=Bs(i,r),o=n(s,o)):(r=Bs(r,i),o=n(o,s)),function(a){return o(r(a))}}function Ox(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Bs(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var l=xd(t,a,1,r)-1;return o[l](i[l](a))}}function Wa(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Qd(){var t=Rc,e=Rc,n=Ro,r,i,o,s=Fn,a,l,c;function u(){var f=Math.min(t.length,e.length);return s!==Fn&&(s=Tx(t[0],t[f-1])),a=f>2?Ox:Ex,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?o:(l||(l=a(t.map(r),e,n)))(r(s(f)))}return h.invert=function(f){return s(i((c||(c=a(e,t.map(r),_e)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,xx),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=X_,u()},h.clamp=function(f){return arguments.length?(s=f?!0:Fn,u()):s!==Fn},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(o=f,h):o},function(f,d){return r=f,i=d,u()}}function Jd(){return Qd()(Fn,Fn)}function Sx(t,e,n,r){var i=$s(t,e,n),o;switch(r=Yr(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=bx(i,s))&&(r.precision=o),Kd(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=_x(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=yx(i))&&(r.precision=o-(r.type==="%")*2);break}}return Ga(r)}function Mx(t){var e=t.domain;return t.ticks=function(n){var r=e();return Gi(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Sx(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],l,c,u=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);u-- >0;){if(c=nr(s,a,n),c===l)return r[i]=s,r[o]=a,e(r);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function Ji(){var t=Jd();return t.copy=function(){return Wa(t,Ji())},ri.apply(t,arguments),Mx(t)}function Cr(t,e,n){this.k=t,this.x=e,this.y=n}Cr.prototype={constructor:Cr,scale:function(t){return t===1?this:new Cr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Cr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Cr.prototype;const ne="cds",We={opacity:{unselected:.05,selected:.4}},an={ticks:{number:7,rotateIfSmallerThan:30,verticalSpaceRatio:2.5,horizontalSpaceRatio:3.5},ratio:{reference:"value",compareTo:"marker"},paddingRatio:.1,hover:{rectanglePadding:4}},Ic={duration:1e3,ease:Xd,zoomLevel:3},Ax={circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},depth:2},Cx={pairingOptions:{"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1}},$x={defaultBins:10},Bt={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"},color:{barWidth:300,barHeight:8,axisYTranslation:10}},Qo={opacity:{unselected:.3,selected:1},weight:{selected:2,unselected:1}},vr={radiusOffset:-15,innerRadius:2,padAngle:.007,hoverArc:{outerRadiusOffset:3},xOffset:30,yOffset:20,yOffsetCallout:10,callout:{minSliceDegree:5,offsetX:15,offsetY:12,horizontalLineLength:8,textMargin:2}},Pc={default:{size:24}},Nc={defaultOffset:4,horizontalOffset:10},Bc={default:{duration:300},pie_slice_mouseover:{duration:100},pie_slice_mouseout:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},ce={height:{[Le.GRAPH_VIEW]:32,[Le.SLIDER_VIEW]:10},spacerHeight:8,handleWidth:5,handleBarWidth:1,handleBarHeight:12},kx=[{type:It.RADIUS,name:"Radius"},{type:It.AREA,name:"Poor area"},{type:It.AREA,name:"Satisfactory area"},{type:It.AREA,name:"Great area"},{type:It.QUARTILE,name:"Quartiles"}],Vn={type:xe.END_LINE,threshold:16,numCharacter:14},Dx={code:typeof navigator<"u"&&(navigator==null?void 0:navigator.language)||"en-US",number:(t,e=(navigator==null?void 0:navigator.language)||"en-US")=>t.toLocaleString(e),date:(t,e=(navigator==null?void 0:navigator.language)||"en-US",n={},r=null)=>r||t.toLocaleDateString(e,n),time:(t,e=(navigator==null?void 0:navigator.language)||"en-US",n={},r=null)=>r||t.toLocaleTimeString(e,n),optionsObject:{"15seconds":{primary:{"MMM d, pp":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"MMM d, h:mm:ss.SSS a":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},secondary:{pp:{hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"h:mm:ss.SSS a":{hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},type:"time"},minute:{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},"30minutes":{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},hourly:{primary:{"MMM d, hh a":{month:"short",day:"numeric",hour:"2-digit",hourCycle:"h12"}},secondary:{"hh a":{hour:"2-digit",hourCycle:"h12"}},type:"time"},daily:{primary:{"MMM d":{month:"short",day:"numeric"}},secondary:{d:{day:"numeric"}},type:"date"},weekly:{primary:{"eee, MMM d":{weekday:"short",month:"short",day:"numeric"}},secondary:{eee:{weekday:"short"}},type:"date"},monthly:{primary:{"MMM yyyy":{month:"short",year:"numeric"}},secondary:{MMM:{month:"short"}},type:"date"},quarterly:{primary:{},secondary:{},type:"date"},yearly:{primary:{yyyy:{year:"numeric"}},secondary:{yyyy:{year:"numeric"}},type:"date"}},translations:{group:"Group",total:"Total",meter:{title:""},tabularRep:{title:"Tabular representation",downloadAsCSV:"Download as CSV"},toolbar:{exportAsCSV:"Export to CSV",exportAsJPG:"Export to JPG",exportAsPNG:"Export to PNG",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",moreOptions:"More options",makeFullScreen:"Make fullscreen",exitFullScreen:"Exit fullscreen",showAsTable:"Show as table"}}},Lx={enabled:!0,position:Dr.BOTTOM,clickable:!0,truncation:Vn,alignment:Ee.LEFT,order:null,additionalItems:[]},Rx={x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},Ix={enabled:!0},tf={enabled:!0,showTotal:!0,truncation:Vn,groupLabel:"Group"},ef={top:{visible:!0,includeZero:!0,truncation:Vn},bottom:{visible:!0,includeZero:!0,truncation:Vn},left:{visible:!0,includeZero:!0,truncation:Vn},right:{visible:!0,includeZero:!0,truncation:Vn}},No={addSpaceOnEdges:1,showDayName:!1,localeObject:Bh,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}};let nf=!1;try{nf=typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}catch(t){console.warn("Fullscreen capabilities check failed: ",t.message)}const Zt={width:null,height:null,resizable:!0,theme:Dh.WHITE,tooltip:tf,legend:Lx,locale:Dx,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:[{type:gt.SHOW_AS_DATATABLE},...nf?[{type:gt.MAKE_FULLSCREEN}]:[],{type:gt.EXPORT_CSV},{type:gt.EXPORT_PNG},{type:gt.EXPORT_JPG}]}},rf=J({},Zt,{thematic:{projection:Ph.geoNaturalEarth1}}),ii=J({},Zt,{axes:ef,timeScale:No,grid:Rx,ruler:Ix,zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:Le.GRAPH_VIEW}}}),En=J({},ii,{bars:{maxWidth:16,spacingFactor:.25},timeScale:J(No,{addSpaceOnEdges:1})}),Px=J({},En,{}),Nx=J({},En,{}),Bx=J({},En,{bars:J({},En.bars,{dividerSize:1.5})}),Ux=J({},En,{}),Ya=J({},ii,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),Hx=Ya,of=J({},Ya,{points:{radius:3,filled:!1,enabled:!0}}),sf=J({},of,{timeScale:J(No,{addSpaceOnEdges:0})}),Fx=sf,Vx=J({},ii,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:t=>{const e=Math.min(t.width,t.height);return[e*3/400,e*25/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:It.RADIUS,name:"Radius"}]}}),jx=J({},ii,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:It.AREA,name:"Poor area"},{type:It.AREA,name:"Satisfactory area"},{type:It.AREA,name:"Great area"},{type:It.QUARTILE,name:"Quartiles"}]}}),Gx=J({},En,{bars:{dividerSize:1.5},timeScale:J(No,{addSpaceOnEdges:0})}),zx=J({},Zt,{tooltip:J({},tf,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:t=>{const e=Math.min(t.width,t.height);return[e*20/400,e*75/400]},wordMapsTo:"word"}}),af=J({},Zt,{pie:{labels:{formatter:null,enabled:!0},alignment:Ee.LEFT,sortFunction:null,valueMapsTo:"value"}}),Wx=J({},Zt,{legend:{enabled:!1},gauge:{type:Rh.SEMI,arcWidth:16,deltaArrow:{size:t=>t/8,enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:t=>t/8,valueFontSize:t=>t/2.5,alignment:Ee.LEFT}}),Yx=J({},af,{donut:{center:{numberFontSize:t=>`${Math.min(t/100*24,24)}px`,titleFontSize:t=>`${Math.min(t/100*15,15)}px`,titleYPosition:t=>Math.min(t/80*20,20)},alignment:Ee.LEFT}}),lf=J({},Zt,{legend:{enabled:!1,clickable:!1},meter:{showLabels:!0,proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}}),Zx=J({},lf,{legend:{enabled:!0}}),Xx=J({},Zt,{radar:{axes:{angle:"key",value:"value"},alignment:Ee.LEFT},tooltip:{gridline:{enabled:!0}}}),qx=J({},En,{comboChartTypes:[]}),Kx=J({tree:{type:Lh.TREE}},Zt,{}),Qx=J({},Zt,{data:J(Zt.data,{groupMapsTo:"name"})}),Jx=J({},Zt,Ax,{data:J(Zt.data,{groupMapsTo:"name"})}),tT=J({},Zt,{alluvial:{data:J(Zt.data,{groupMapsTo:"source"}),nodeAlignment:Ee.CENTER,nodePadding:24,monochrome:!1,nodes:[]}}),eT=J({},Zt,{axes:ef,heatmap:{divider:{state:Ih.AUTO},colorLegend:{type:"linear"}}}),nT=J({},rf,{choropleth:{colorLegend:{type:"linear"}}}),cf={alluvialChart:tT,areaChart:sf,axisChart:ii,boxplotChart:Ux,bubbleChart:Vx,bulletChart:jx,chart:Zt,circlePackChart:Jx,choroplethChart:nT,comboChart:qx,donutChart:Yx,gaugeChart:Wx,groupedBarChart:Nx,heatmapChart:eT,histogramChart:Gx,lineChart:of,lollipopChart:Hx,meterChart:lf,pieChart:af,proportionalMeterChart:Zx,radarChart:Xx,scatterChart:Ya,simpleBarChart:Px,stackedAreaChart:Fx,stackedBarChart:Bx,thematicChart:rf,treeChart:Kx,treemapChart:Qx,wordCloudChart:zx};function rT(t,e,n){let r=null;return function(...i){const o=this;o.mousePosition=wn(i[0],n),clearTimeout(r),r=setTimeout(function(){t.apply(o,i)},e)}}function uf(t,e){var n;const r=ko(t),i=Object.keys(e.axes||{});(n=e==null?void 0:e.toolbar)!=null&&n.controls&&delete r.toolbar.controls,i.length===0&&delete r.axes;for(const o in r.axes)if(i.includes(o)){const s=e.axes[o];if((s.primary||s.secondary)&&console.warn("`primary` & `secondary` are no longer needed for axis configurations. Read more here https://charts.carbondesignsystem.com/"),s.mapsTo==null){const l=s.scaleType;l==null?s.mapsTo="value":l===j.TIME?s.mapsTo="date":l===j.LABELS&&(s.mapsTo="key")}}else delete r.axes[o];return hf(r,e),J(r,e)}function ze(t){if(!t)return;const e=/translate\([0-9]+\.?[0-9]*,[0-9]+\.?[0-9]*\)/,n=t.getAttribute("transform").match(e);if(!n)return null;if(n[0]){const r=n[0].replace(/translate\(/,"").replace(/\)/,"").split(",");return{tx:r[0],ty:r[1]}}return null}function Zr(t,e,n){if(n>t.length)return t;if(e===xe.MID_LINE)return t.substr(0,n/2)+"..."+t.substr(-n/2);if(e===xe.FRONT_LINE)return"..."+t.substr(-n);if(e===xe.END_LINE)return t.substr(0,n)+"..."}function hf(t,e){const n=y(t,"legend","additionalItems"),r=y(e,"legend","additionalItems");if(n&&r){const i=r.map(a=>a.type),o=n.map(a=>a.type),s=kx.filter(a=>o.includes(a.type)&&!i.includes(a.type));t.legend.additionalItems=s,e.legend.additionalItems=D0(s,r,"name")}}const y=(t,...e)=>{let n=t;if(n){for(const r of e)if(n[r]!==null&&n[r]!==void 0)n=n[r];else return null;return n}return null},df=(t,e)=>e===Jt.HORIZONTAL?{y0:t.x0,y1:t.x1,x0:t.y0,x1:t.y1}:t,Za=(t,e)=>{const{x0:n,x1:r,y0:i,y1:o}=df(t,e);return`M${n},${i}L${n},${o}L${r},${o}L${r},${i}L${n},${i}`};function Xn(t,e,n){return n===Jt.VERTICAL?[t,e]:[e,t]}const ff=6048e5,iT=864e5,pf=6e4,gf=36e5;function Uc(t){const e=ct(t);return e.setHours(0,0,0,0),e}function Hc(t){const e=ct(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function mf(t,e){const n=Uc(t),r=Uc(e),i=+n-Hc(n),o=+r-Hc(r);return Math.round((i-o)/iT)}function Oe(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function oT(t){const e=ct(t),n=Oe(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function sT(t){const e=ct(t);return mf(e,oT(e))+1}function to(t){return Ur(t,{weekStartsOn:1})}function vf(t){const e=ct(t),n=e.getFullYear(),r=Oe(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=to(r),o=Oe(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const s=to(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function aT(t){const e=vf(t),n=Oe(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),to(n)}function lT(t){const e=ct(t),n=+to(e)-+aT(e);return Math.round(n/ff)+1}function yf(t,e){var n,r,i,o;const s=ct(t),a=s.getFullYear(),l=To(),c=(e==null?void 0:e.firstWeekContainsDate)??((r=(n=e==null?void 0:e.locale)==null?void 0:n.options)==null?void 0:r.firstWeekContainsDate)??l.firstWeekContainsDate??((o=(i=l.locale)==null?void 0:i.options)==null?void 0:o.firstWeekContainsDate)??1,u=Oe(t,0);u.setFullYear(a+1,0,c),u.setHours(0,0,0,0);const h=Ur(u,e),f=Oe(t,0);f.setFullYear(a,0,c),f.setHours(0,0,0,0);const d=Ur(f,e);return s.getTime()>=h.getTime()?a+1:s.getTime()>=d.getTime()?a:a-1}function cT(t,e){var n,r,i,o;const s=To(),a=(e==null?void 0:e.firstWeekContainsDate)??((r=(n=e==null?void 0:e.locale)==null?void 0:n.options)==null?void 0:r.firstWeekContainsDate)??s.firstWeekContainsDate??((o=(i=s.locale)==null?void 0:i.options)==null?void 0:o.firstWeekContainsDate)??1,l=yf(t,e),c=Oe(t,0);return c.setFullYear(l,0,a),c.setHours(0,0,0,0),Ur(c,e)}function uT(t,e){const n=ct(t),r=+Ur(n,e)-+cT(n,e);return Math.round(r/ff)+1}function mt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const rn={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return mt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):mt(n+1,2)},d(t,e){return mt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return mt(t.getHours()%12||12,e.length)},H(t,e){return mt(t.getHours(),e.length)},m(t,e){return mt(t.getMinutes(),e.length)},s(t,e){return mt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return mt(i,e.length)}},Rn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fc={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return rn.y(t,e)},Y:function(t,e,n,r){const i=yf(t,r),o=i>0?i:1-i;if(e==="YY"){const s=o%100;return mt(s,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):mt(o,e.length)},R:function(t,e){const n=vf(t);return mt(n,e.length)},u:function(t,e){const n=t.getFullYear();return mt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return mt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return mt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return rn.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return mt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=uT(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):mt(i,e.length)},I:function(t,e,n){const r=lT(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):mt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):rn.d(t,e)},D:function(t,e,n){const r=sT(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):mt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return mt(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return mt(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return mt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Rn.noon:r===0?i=Rn.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Rn.evening:r>=12?i=Rn.afternoon:r>=4?i=Rn.morning:i=Rn.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return rn.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):rn.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):mt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):mt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):rn.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):rn.s(t,e)},S:function(t,e){return rn.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return jc(r);case"XXXX":case"XX":return pn(r);case"XXXXX":case"XXX":default:return pn(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return jc(r);case"xxxx":case"xx":return pn(r);case"xxxxx":case"xxx":default:return pn(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Vc(r,":");case"OOOO":default:return"GMT"+pn(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Vc(r,":");case"zzzz":default:return"GMT"+pn(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return mt(r,e.length)},T:function(t,e,n){const r=t.getTime();return mt(r,e.length)}};function Vc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),o=r%60;return o===0?n+String(i):n+String(i)+e+mt(o,2)}function jc(t,e){return t%60===0?(t>0?"-":"+")+mt(Math.abs(t)/60,2):pn(t,e)}function pn(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=mt(Math.trunc(r/60),2),o=mt(r%60,2);return n+i+e+o}const Gc=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},bf=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},hT=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Gc(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Gc(r,e)).replace("{{time}}",bf(i,e))},dT={p:bf,P:hT},fT=/^D+$/,pT=/^Y+$/,gT=["D","DD","YY","YYYY"];function mT(t){return fT.test(t)}function vT(t){return pT.test(t)}function yT(t,e,n){const r=bT(t,e,n);if(console.warn(r),gT.includes(t))throw new RangeError(r)}function bT(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function _T(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function wT(t){if(!_T(t)&&typeof t!="number")return!1;const e=ct(t);return!isNaN(Number(e))}const xT=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,TT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ET=/^'([^]*?)'?$/,OT=/''/g,ST=/[a-zA-Z]/;function Us(t,e,n){var r,i,o,s,a,l,c,u;const h=To(),f=(n==null?void 0:n.locale)??h.locale??Bh,d=(n==null?void 0:n.firstWeekContainsDate)??((i=(r=n==null?void 0:n.locale)==null?void 0:r.options)==null?void 0:i.firstWeekContainsDate)??h.firstWeekContainsDate??((s=(o=h.locale)==null?void 0:o.options)==null?void 0:s.firstWeekContainsDate)??1,p=(n==null?void 0:n.weekStartsOn)??((l=(a=n==null?void 0:n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??h.weekStartsOn??((u=(c=h.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,v=ct(t);if(!wT(v))throw new RangeError("Invalid time value");let g=e.match(TT).map(_=>{const w=_[0];if(w==="p"||w==="P"){const E=dT[w];return E(_,f.formatLong)}return _}).join("").match(xT).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const w=_[0];if(w==="'")return{isToken:!1,value:MT(_)};if(Fc[w])return{isToken:!0,value:_};if(w.match(ST))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:_}});f.localize.preprocessor&&(g=f.localize.preprocessor(v,g));const m={firstWeekContainsDate:d,weekStartsOn:p,locale:f};return g.map(_=>{if(!_.isToken)return _.value;const w=_.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&vT(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&mT(w))&&yT(w,e,String(t));const E=Fc[w[0]];return E(v,w,f.localize,m)}).join("")}function MT(t){const e=t.match(ET);return e?e[1].replace(OT,"'"):t}const Jo=[["15seconds",15*1e3],["minute",60*1e3],["30minutes",30*60*1e3],["hourly",60*60*1e3],["daily",24*60*60*1e3],["monthly",30*24*60*60*1e3],["quarterly",3*30*24*60*60*1e3],["yearly",12*30*24*60*60*1e3]];function _f(t,e,n,r,i){const o=e===0,s=Number(Us(new Date(t),"c"))===2,a=Number(Us(new Date(t),"q"))===1,l=e!==0?n[e-1]:null;switch(r){case"15seconds":return o||pi(t)||yr(t,l)||on(t);case"minute":return o||pi(t)||yr(t,l)||on(t);case"30minutes":return o||pi(t)||yr(t,l)||on(t);case"hourly":return o||pi(t)||yr(t,l)||on(t);case"daily":return i?o||s||on(t):o||yr(t,l)||on(t);case"weekly":return o||s||on(t);case"monthly":return o||on(t);case"quarterly":return o||a;case"yearly":return!1;default:throw new Error(`${r} is not a valid time interval.`)}}function Hs(t,e,n,r,i,o){const s=i.showDayName,a=r==="daily"&&s?"weekly":r,l=new Date(t),c=y(i,"timeIntervalFormats")[a],u=y(c,"primary"),h=y(c,"secondary"),f=_f(t,e,n,r,s);let d=f?u:h;r==="15seconds"&&l.getMilliseconds()!==0&&(d=d.replace("pp","h:mm:ss.SSS a"));const p=i.localeObject,{code:v,optionsObject:g}=o,m=g[r].type,_=g[r][f?"primary":"secondary"][d];if(r==="quarterly"||!_){const w=Us(l,d,{locale:p}).split("").map(E=>{const x=Number(E);return E!==" "&&!Number.isNaN(x)?x.toLocaleString(v):E});return o[m](l,v,{},w.join(""))}else return o[m](l,v,_)}function eo(t){const e=new Date(t);return{M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds()}}function AT(t){if(t)return t.slice(1).map((e,n)=>e-t[n])}function CT(t){const e=Jo.reduce((n,[,r],i)=>{const o=Jo[n][1],s=Math.abs(o-t),a=Math.abs(r-t);return s<a?n:i},0);return Jo[e][0]}function Fs(t,e){if(Nh[e])return e;if(t.length===1)return"15seconds";const n=AT(t),r=G0(n);return CT(r)}function pi(t){const{s:e,m:n,H:r}=eo(t);return r===0&&n===0&&e===0}function yr(t,e){const n=eo(t).M,r=eo(e).M;return n!==r}function on(t){const{M:e,d:n,s:r,m:i,H:o}=eo(t);return e===1&&n===1&&o===0&&i===0&&r===0}function zc(t){return t===void 0?"":t.toISOString()}var $t=(t=>(t.GRAPHICS_DOCUMENT="graphics-document",t.GRAPHICS_OBJECT="graphics-object",t.GRAPHICS_SYMBOL="graphics-symbol",t.GROUP="group",t.DOCUMENT="document",t.CHECKBOX="checkbox",t.BUTTON="button",t.MENU="menu",t.MENU_ITEM="menuitem",t.IMG="img",t))($t||{});function $T(t,e){return t&&yd(t,e,Qr)}function kT(t,e){return function(n,r){if(n==null)return n;if(!ur(n))return t(n,r);for(var i=n.length,o=-1,s=Object(n);++o<i&&r(s[o],o,s)!==!1;);return n}}var wf=kT($T);function dt(t){return function(){return t}}function Xa(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function DT(t,e,n,r){for(var i=-1,o=t==null?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function LT(t,e,n,r){return wf(t,function(i,o,s){e(r,i,n(i),s)}),r}function RT(t,e){return function(n,r){var i=Yt(n)?DT:LT,o={};return i(n,t,La(r),o)}}function IT(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}var PT=Object.prototype,NT=PT.hasOwnProperty,BT=RT(function(t,e,n){NT.call(t,n)?t[n].push(e):Oo(t,n,[e])});function UT(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function HT(t){return t}var FT=Array.prototype,VT=FT.slice;function ts(t){return()=>t}function jT(t,e,n){let r;for(;;){const i=nr(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function GT(t){return Math.max(1,Math.ceil(Math.log(UT(t))/Math.LN2)+1)}function zT(){var t=HT,e=Yn,n=GT;function r(i){Array.isArray(i)||(i=Array.from(i));var o,s=i.length,a,l,c=new Array(s);for(o=0;o<s;++o)c[o]=t(i[o],o,i);var u=e(c),h=u[0],f=u[1],d=n(c,h,f);if(!Array.isArray(d)){const w=f,E=+d;if(e===Yn&&([h,f]=jT(h,f,E)),d=Gi(h,f,E),d[0]<=h&&(l=nr(h,f,E)),d[d.length-1]>=f)if(w>=f&&e===Yn){const x=nr(h,f,E);isFinite(x)&&(x>0?f=(Math.floor(f/x)+1)*x:x<0&&(f=(Math.ceil(f*-x)+1)/-x))}else d.pop()}for(var p=d.length,v=0,g=p;d[v]<=h;)++v;for(;d[g-1]>f;)--g;(v||g<p)&&(d=d.slice(v,g),p=g-v);var m=new Array(p+1),_;for(o=0;o<=p;++o)_=m[o]=[],_.x0=o>0?d[o-1]:h,_.x1=o<p?d[o]:f;if(isFinite(l)){if(l>0)for(o=0;o<s;++o)(a=c[o])!=null&&h<=a&&a<=f&&m[Math.min(p,Math.floor((a-h)/l))].push(i[o]);else if(l<0){for(o=0;o<s;++o)if((a=c[o])!=null&&h<=a&&a<=f){const w=Math.floor((h-a)*l);m[Math.min(p,w+(d[w]<=a))].push(i[o])}}}else for(o=0;o<s;++o)(a=c[o])!=null&&h<=a&&a<=f&&m[xd(d,a,0,p)].push(i[o]);return m}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:ts(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:ts([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:ts(Array.isArray(i)?VT.call(i):i),r):n},r}function Wc(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,a=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Yc(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function WT(t,e){return t[e]}function YT(t){const e=[];return e.key=t,e}function es(){var t=dt([]),e=Yc,n=Wc,r=WT;function i(o){var s=Array.from(t.apply(this,arguments),YT),a,l=s.length,c=-1,u;for(const h of o)for(a=0,++c;a<l;++a)(s[a][c]=[0,+r(h,s[a].key,c,o)]).data=h;for(a=0,u=Xa(e(s));a<l;++a)s[u[a]].index=a;return n(s,u),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:dt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:dt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?Yc:typeof o=="function"?o:dt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??Wc,i):n},i}function ZT(t,e){if((l=t.length)>0)for(var n,r=0,i,o,s,a,l,c=t[e[0]].length;r<c;++r)for(s=a=0,n=0;n<l;++n)(o=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=s,i[1]=s+=o):o<0?(i[1]=a,i[0]=a+=o):(i[0]=0,i[1]=o)}function XT(t){const e=t.trim();return["=","+","-","@","	","\r"].includes(e.charAt(0))?` ${e}`:/[,\"\n]/.test(e)?`"${e}"`:e}class xf{constructor(e){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=e}formatTable({headers:e,cells:n}){const r=this.getOptions(),{code:i,date:o,number:s}=y(r,"locale"),a=y(r,"tabularRepModal","tableHeadingFormatter"),l=y(r,"tabularRepModal","tableCellFormatter"),{cartesianScales:c}=this.services,u=c==null?void 0:c.getDomainAxisScaleType();let h;return u===j.TIME&&(h=f=>o(f,i,{month:"short",day:"numeric",year:"numeric"})),[typeof a=="function"?a(e):e,...typeof l=="function"?l(n):n.map(f=>{h&&(f[1]=h(f[1]));for(const d in f){const p=f[d];typeof p=="number"&&(f[d]=s(p,i))}return f})]}getAllDataFromDomain(e){if(!this.getData())return null;const n=this.getOptions();let r=this.getData();const i=this.getDataGroups(),{groupMapsTo:o}=y(n,"data"),s=y(n,"axes");return e&&(r=r.filter(a=>e.includes(a[o]))),s&&Object.keys(s).forEach(a=>{const l=s[a].mapsTo,c=s[a].scaleType;if((c===j.LINEAR||c===j.LOG)&&(r=r.map(u=>({...u,[l]:u[l]===null?u[l]:Number(u[l])}))),l&&s[a].domain)if(c===j.LABELS)r=r.filter(u=>s[a].domain.includes(u[l]));else{const[u,h]=s[a].domain;r=r.filter(f=>!(l in f)||f[l]>=u&&f[l]<=h)}}),r.filter(a=>i.find(l=>l.name===a[o]))}getDisplayData(e){if(!this.get("data"))return null;const{ACTIVE:n}=Bt.items.status,r=this.getDataGroups(e),{groupMapsTo:i}=this.getOptions().data;return this.getAllDataFromDomain(e).filter(o=>r.find(s=>s.name===o[i]&&s.status===n))}getData(){return this.get("data")}isDataEmpty(){return!this.getData().length}setData(e){const n=this.sanitize(ko(e)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),n}getDataGroups(e){return y(this.getOptions(),"data","loading")?[]:e?this.get("dataGroups").filter(n=>e.includes(n.name)):this.get("dataGroups")}getActiveDataGroups(e){const{ACTIVE:n}=Bt.items.status;return this.getDataGroups(e).filter(r=>r.status===n)}getDataGroupNames(e){return this.getDataGroups(e).map(n=>n.name)}getActiveDataGroupNames(e){return this.getActiveDataGroups(e).map(n=>n.name)}aggregateBinDataByGroup(e){return BT(e,"group")}getBinConfigurations(){const e=this.getDisplayData(),n=this.getOptions(),r=this.services.cartesianScales.getMainXAxisPosition(),i=this.services.cartesianScales.getDomainIdentifier(),o=n.axes[r],{groupMapsTo:s}=n.data,{bins:a=$x.defaultBins}=o,l=Array.isArray(a),c=zT().value(d=>d[i]).thresholds(a)(e);if(l)c[c.length-1].x1=a[a.length-1];else{const d=c[0].x1-c[0].x0;c[c.length-1].x1=+c[c.length-1].x0+d}const u=l?[a[0],a[a.length-1]]:[c[0].x0,c[c.length-1].x1],h=Array.from(new Set(e.map(d=>d[s]))),f=[];return c.forEach(d=>{const p=`${d.x0}-${d.x1}`,v=this.aggregateBinDataByGroup(d);h.forEach(g=>{f.push({group:g,key:p,value:v[g]||0,bin:d.x0})})}),{bins:c,binsDomain:u}}getBinnedStackedData(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getActiveDataGroupNames(),{bins:i}=this.getBinConfigurations(),o=this.getDataValuesGroupedByKeys({bins:i});return es().keys(r)(o).map((s,a)=>Object.keys(s).filter(l=>!isNaN(l)).map(l=>{const c=s[l];return c[n]=r[a],c}))}getGroupedData(e){const n=this.getDisplayData(e),r={},{groupMapsTo:i}=this.getOptions().data;return n.map(o=>{const s=o[i];r[s]!==null&&r[s]!==void 0?r[s].push(o):r[s]=[o]}),Object.keys(r).map(o=>({name:o,data:r[o]}))}getStackKeys({bins:e=null,groups:n=null}={bins:null,groups:null}){const r=this.getOptions(),i=this.getDisplayData(n);let o;e?o=e.map(l=>`${l.x0}:${l.x1}`):o=jr(i.map(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return l[c]instanceof Date?zc(l[c]):l[c]&&typeof l[c].toString=="function"?l[c].toString():l[c]}));const s=this.services.cartesianScales.domainAxisPosition,a=r.axes[s].scaleType;return a===j.TIME?o.sort((l,c)=>{const u=new Date(l),h=new Date(c);return u-h}):(a===j.LOG||a===j.LINEAR)&&o.sort((l,c)=>l-c),o}getDataValuesGroupedByKeys({bins:e=null,groups:n=null}){const r=this.getOptions(),{groupMapsTo:i}=r.data,o=this.getDisplayData(n),s=this.getDataGroupNames(),a=this.getStackKeys({bins:e,groups:n});return e?a.map(l=>{const[c,u]=l.split(":"),h={x0:c,x1:u},f=e.find(d=>d.x0.toString()===c.toString());return s.forEach(d=>{h[d]=f.filter(p=>p[i]===d).length}),h}):a.map(l=>{const c={sharedStackKey:l};return s.forEach(u=>{const h=o.find(d=>{const p=this.services.cartesianScales.getDomainIdentifier(d);return d[i]===u&&Object.prototype.hasOwnProperty.call(d,p)&&(d[p]instanceof Date?zc(d[p])===l:d[p].toString()===l)}),f=this.services.cartesianScales.getRangeIdentifier(c);c[u]=h?h[f]:null}),c})}getStackedData({percentage:e=!1,groups:n=null,divergent:r=!1}){const i=this.getOptions(),{groupMapsTo:o}=i.data,s=this.getActiveDataGroupNames(n),a=this.getDataValuesGroupedByKeys({groups:n});if(e){const l=IT(a.map(c=>[c.sharedStackKey,0]));a.forEach(c=>{s.forEach(u=>{l[c.sharedStackKey]+=c[u]})}),a.forEach(c=>{s.forEach(u=>{const h=l[c.sharedStackKey];l[c.sharedStackKey]?c[u]=c[u]/h*100:c[u]=0})})}return(r?es().offset(ZT):es()).keys(s)(a).map((l,c)=>Object.keys(l).filter(u=>!isNaN(u)).map(u=>{const h=l[u];return h[o]=s[c],h}))}getOptions(){return this.state.options}set(e,n){this.state=Object.assign({},this.state,e);const r=Object.assign({skipUpdate:!1,animate:!0},n);r.skipUpdate||this.update(r.animate)}get(e){return e?this.state[e]:this.state}setOptions(e){const n=this.getOptions();hf(n,e),this.set({options:J(n,e)})}update(e=!0){this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent(S.Model.UPDATE,{animate:e}))}toggleDataLabel(e){const{ACTIVE:n,DISABLED:r}=Bt.items.status,i=this.getDataGroups(),o=i.some(c=>c.status===r),s=i.filter(c=>c.status===n);if(o)if(s.length===1&&s[0].name===e)i.forEach((c,u)=>{i[u].status=n});else{const c=i.findIndex(u=>u.name===e);i[c].status=i[c].status===r?n:r}else i.forEach((c,u)=>{i[u].status=c.name===e?n:r});const a=i.filter(c=>c.status===n),l=this.getOptions();i.some(c=>c.status===r)?l.data.selectedGroups=a.map(c=>c.name):l.data.selectedGroups=[],this.services.events.dispatchEvent(S.Legend.ITEMS_UPDATE,{dataGroups:i}),this.set({dataGroups:i})}getIsFilled(e,n,r,i){const o=this.getOptions();return o.getIsFilled?o.getIsFilled(e,n,r,i):i}getFillColor(e,n,r){const i=this.getOptions(),o=y(this.colorScale,e);return i.getFillColor?i.getFillColor(e,n,r,o):o}getStrokeColor(e,n,r){const i=this.getOptions(),o=y(this.colorScale,e);return i.getStrokeColor?i.getStrokeColor(e,n,r,o):o}isUserProvidedColorScaleValid(){const e=y(this.getOptions(),"color","scale"),n=this.getDataGroups();return e==null||Object.keys(e).length==0?!1:n.some(r=>Object.keys(e).includes(r.name))}getColorClassName(e){const n=this.colorClassNames(e.dataGroupName);let r=e.originalClassName;return e.classNameTypes.forEach(i=>r=e.originalClassName?`${r} ${i}-${n}`:`${i}-${n}`),r||""}getStatus(){return null}getAllDataGroupsNames(){return this.allDataGroups}transformToTabularData(e){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://charts.carbondesignsystem.com/");const n=[],{datasets:r,labels:i}=e;return r.forEach(o=>{o.data.forEach((s,a)=>{let l;const c=y(o,"label");if(c===null){const h=y(i,a);h?l=h:l="Ungrouped"}else l=c;const u={group:l,key:i[a]};isNaN(s)?(u.value=s.value,u.date=s.date):u.value=s,n.push(u)})}),n}getTabularDataArray(){return[]}exportToCSV(){const e=this.getTabularDataArray().map(o=>o.map(s=>`"${(s==="&ndash;"?"–":s).split(/[,;'"`]/).map(a=>XT(a)).join("")}"`)).map(o=>o.join(",")).join(`
`),n=this.getOptions();let r="myChart";const i=y(n,"fileDownload","fileName");typeof i=="function"?r=i("csv"):typeof i=="string"&&(r=i),this.services.files.downloadCSV(e,`${r}.csv`)}getTabularData(e){return Array.isArray(e)?e:this.transformToTabularData(e)}sanitize(e){return e=this.getTabularData(e),e}updateAllDataGroups(){this.allDataGroups?this.getDataGroupNames().forEach(e=>{this.allDataGroups.indexOf(e)===-1&&this.allDataGroups.push(e)}):this.allDataGroups=this.getDataGroupNames()}generateDataGroups(e){const{groupMapsTo:n}=this.getOptions().data,{ACTIVE:r,DISABLED:i}=Bt.items.status,o=this.getOptions(),s=jr(e.map(l=>l[n]));o.data.selectedGroups.length&&(o.data.selectedGroups.every(l=>s.includes(l))||(o.data.selectedGroups=[]));const a=l=>!o.data.selectedGroups.length||o.data.selectedGroups.includes(l)?r:i;return s.map(l=>({name:l,status:a(l)}))}setCustomColorScale(){if(!this.isUserProvidedColorScaleValid())return;const e=this.getOptions(),n=y(e,"color","scale");Object.keys(n).forEach(r=>{this.allDataGroups.includes(r)||console.warn(`"${r}" does not exist in data groups.`)}),this.allDataGroups.filter(r=>n[r]).forEach(r=>this.colorScale[r]=n[r])}setColorClassNames(){const e=y(this.getOptions(),"color","pairing");let n=y(e,"numberOfVariants");(!n||n<this.allDataGroups.length)&&(n=this.allDataGroups.length);let r=y(e,"option");const i=Cx.pairingOptions,o=n>5?14:n,s=`${o}-color`;r=r<=i[s]?r:1;const a=this.allDataGroups.map((l,c)=>`${o}-${r}-${c%14+1}`);this.colorClassNames=za().range(a).domain(this.allDataGroups)}}class qT extends xf{constructor(e){super(e),this.axisFlavor=ya.DEFAULT}assignRangeAndDomains(){const{cartesianScales:e}=this.services,n=this.getOptions(),r=e.isDualAxes(),i={primaryDomain:e.domainAxisPosition,primaryRange:e.rangeAxisPosition,secondaryDomain:null,secondaryRange:null};return r&&(i.secondaryDomain=e.secondaryDomainAxisPosition,i.secondaryRange=e.secondaryRangeAxisPosition),Object.keys(i).forEach(o=>{const s=i[o];e.scales[s]?i[o]={position:s,label:e.getScaleLabel(s),identifier:y(n,"axes",s,"mapsTo")}:i[o]=null}),i}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{primaryDomain:i,primaryRange:o,secondaryDomain:s,secondaryRange:a}=this.assignRangeAndDomains(),{number:l,code:c}=y(this.getOptions(),"locale"),u=["Group",i.label,o.label,...s?[s.label]:[],...a?[a.label]:[]],h=e.map(f=>[f[r],f[i.identifier]===null?"&ndash;":f[i.identifier],f[o.identifier]===null||isNaN(f[o.identifier])?"&ndash;":l(f[o.identifier],c),...s?[f[s.identifier]===null?"&ndash;":f[s.identifier]]:[],...a?[f[a.identifier]===null||isNaN(f[a.identifier])?"&ndash;":f[a.identifier]]:[]]);return super.formatTable({headers:u,cells:h})}setData(e){let n;if(e&&(n=super.setData(e),y(this.getOptions(),"zoomBar",A.TOP,"enabled"))){const r=y(this.getOptions(),"zoomBar",A.TOP,"data");this.setZoomBarData(r)}return n}setZoomBarData(e){const n=e?this.sanitize(ko(e)):this.getDisplayData();let r=n;const{cartesianScales:i}=this.services;if(n&&i.domainAxisPosition&&i.rangeAxisPosition){const o=i.getDomainIdentifier(),s=i.getRangeIdentifier();let a=n.map(l=>l[o].getTime());a=jr(a).sort(),r=a.map(l=>{let c=0;const u={};return n.forEach(h=>{h[o].getTime()===l&&(c+=h[s])}),u[o]=new Date(l),u[s]=c,u})}this.set({zoomBarData:r})}getZoomBarData(){return this.get("zoomBarData")}sanitizeDateValues(e){const n=this.getOptions();if(!n.axes)return e;const r=[];return Object.keys(A).forEach(i=>{const o=A[i],s=n.axes[o];if(s&&s.scaleType===j.TIME){const a=s.mapsTo;(a!==null||a!==void 0)&&r.push(a)}}),r.length>0&&e.forEach(i=>{r.forEach(o=>{y(i,o,"getTime")===null&&(i[o]=new Date(i[o]))})}),e}sanitize(e){return e=super.sanitize(e),e=this.sanitizeDateValues(e),e}}var KT=/\s/;function QT(t){for(var e=t.length;e--&&KT.test(t.charAt(e)););return e}var JT=/^\s+/;function tE(t){return t&&t.slice(0,QT(t)+1).replace(JT,"")}var Zc=NaN,eE=/^[-+]0x[0-9a-f]+$/i,nE=/^0b[01]+$/i,rE=/^0o[0-7]+$/i,iE=parseInt;function qn(t){if(typeof t=="number")return t;if(Eo(t))return Zc;if(me(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=me(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=tE(t);var n=nE.test(t);return n||rE.test(t)?iE(t.slice(2),n?2:8):eE.test(t)?Zc:+t}var ns=function(){return Se.Date.now()},oE="Expected a function",sE=Math.max,aE=Math.min;function lE(t,e,n){var r,i,o,s,a,l,c=0,u=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(oE);e=qn(e)||0,me(n)&&(u=!!n.leading,h="maxWait"in n,o=h?sE(qn(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f);function d(T){var O=r,M=i;return r=i=void 0,c=T,s=t.apply(M,O),s}function p(T){return c=T,a=setTimeout(m,e),u?d(T):s}function v(T){var O=T-l,M=T-c,P=e-O;return h?aE(P,o-M):P}function g(T){var O=T-l,M=T-c;return l===void 0||O>=e||O<0||h&&M>=o}function m(){var T=ns();if(g(T))return _(T);a=setTimeout(m,v(T))}function _(T){return a=void 0,f&&r?d(T):(r=i=void 0,s)}function w(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function E(){return a===void 0?s:_(ns())}function x(){var T=ns(),O=g(T);if(r=arguments,i=this,l=T,O){if(a===void 0)return p(l);if(h)return clearTimeout(a),a=setTimeout(m,e),d(l)}return a===void 0&&(a=setTimeout(m,e)),s}return x.cancel=w,x.flush=E,x}function cE(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function D(t){return typeof t=="string"?new ue([[document.querySelector(t)]],[document.documentElement]):new ue([[t]],Rd)}function qa(){var t=za().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,a=!1,l=0,c=0,u=.5;delete t.unknown;function h(){var f=e().length,d=i<r,p=d?i:r,v=d?r:i;o=(v-p)/Math.max(1,f-l+c*2),a&&(o=Math.floor(o)),p+=(v-p-o*(f-l))*u,s=o*(1-l),a&&(p=Math.round(p),s=Math.round(s));var g=cE(f).map(function(m){return p+o*m});return n(d?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,h()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(f){return arguments.length?(a=!!f,h()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),h()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},t.copy=function(){return qa(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},ri.apply(h(),arguments)}function Tf(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}const rs=new Date,is=new Date;function Dt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let c;do l.push(c=new Date(+o)),e(o,a),t(o);while(c<o&&o<s);return l},i.filter=o=>Dt(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(rs.setTime(+o),is.setTime(+s),t(rs),t(is),Math.floor(n(rs,is))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const no=Dt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);no.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Dt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):no);no.range;const Ye=1e3,pe=Ye*60,Ze=pe*60,Qe=Ze*24,Ka=Qe*7,Xc=Qe*30,os=Qe*365,jn=Dt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ye)},(t,e)=>(e-t)/Ye,t=>t.getUTCSeconds());jn.range;const Qa=Dt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ye)},(t,e)=>{t.setTime(+t+e*pe)},(t,e)=>(e-t)/pe,t=>t.getMinutes());Qa.range;const uE=Dt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*pe)},(t,e)=>(e-t)/pe,t=>t.getUTCMinutes());uE.range;const Ja=Dt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ye-t.getMinutes()*pe)},(t,e)=>{t.setTime(+t+e*Ze)},(t,e)=>(e-t)/Ze,t=>t.getHours());Ja.range;const hE=Dt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ze)},(t,e)=>(e-t)/Ze,t=>t.getUTCHours());hE.range;const oi=Dt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*pe)/Qe,t=>t.getDate()-1);oi.range;const tl=Dt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Qe,t=>t.getUTCDate()-1);tl.range;const dE=Dt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Qe,t=>Math.floor(t/Qe));dE.range;function Cn(t){return Dt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*pe)/Ka)}const Bo=Cn(0),ro=Cn(1),fE=Cn(2),pE=Cn(3),sr=Cn(4),gE=Cn(5),mE=Cn(6);Bo.range;ro.range;fE.range;pE.range;sr.range;gE.range;mE.range;function $n(t){return Dt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Ka)}const Ef=$n(0),io=$n(1),vE=$n(2),yE=$n(3),ar=$n(4),bE=$n(5),_E=$n(6);Ef.range;io.range;vE.range;yE.range;ar.range;bE.range;_E.range;const el=Dt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());el.range;const wE=Dt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());wE.range;const Je=Dt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Je.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Je.range;const On=Dt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());On.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});On.range;function xE(t,e,n,r,i,o){const s=[[jn,1,Ye],[jn,5,5*Ye],[jn,15,15*Ye],[jn,30,30*Ye],[o,1,pe],[o,5,5*pe],[o,15,15*pe],[o,30,30*pe],[i,1,Ze],[i,3,3*Ze],[i,6,6*Ze],[i,12,12*Ze],[r,1,Qe],[r,2,2*Qe],[n,1,Ka],[e,1,Xc],[e,3,3*Xc],[t,1,os]];function a(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const d=h&&typeof h.range=="function"?h:l(c,u,h),p=d?d.range(c,+u+1):[];return f?p.reverse():p}function l(c,u,h){const f=Math.abs(u-c)/h,d=Ra(([,,g])=>g).right(s,f);if(d===s.length)return t.every($s(c/os,u/os,h));if(d===0)return no.every(Math.max($s(c,u,h),1));const[p,v]=s[f/s[d-1][2]<s[d][2]/f?d-1:d];return p.every(v)}return[a,l]}const[TE,EE]=xE(Je,el,Bo,oi,Ja,Qa);function ss(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function as(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function br(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function OE(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=_r(i),u=wr(i),h=_r(o),f=wr(o),d=_r(s),p=wr(s),v=_r(a),g=wr(a),m=_r(l),_=wr(l),w={a:G,A:Q,b:X,B:lt,c:null,d:eu,e:eu,f:ZE,g:iO,G:sO,H:zE,I:WE,j:YE,L:Of,m:XE,M:qE,p:Y,q:tt,Q:iu,s:ou,S:KE,u:QE,U:JE,V:tO,w:eO,W:nO,x:null,X:null,y:rO,Y:oO,Z:aO,"%":ru},E={a:ot,A:Ot,b:q,B,c:null,d:nu,e:nu,f:hO,g:wO,G:TO,H:lO,I:cO,j:uO,L:Mf,m:dO,M:fO,p:z,q:rt,Q:iu,s:ou,S:pO,u:gO,U:mO,V:vO,w:yO,W:bO,x:null,X:null,y:_O,Y:xO,Z:EO,"%":ru},x={a:I,A:k,b:W,B:L,c:H,d:Jc,e:Jc,f:FE,g:Qc,G:Kc,H:tu,I:tu,j:NE,L:HE,m:PE,M:BE,p:P,q:IE,Q:jE,s:GE,S:UE,u:$E,U:kE,V:DE,w:CE,W:LE,x:at,X:nt,y:Qc,Y:Kc,Z:RE,"%":VE};w.x=T(n,w),w.X=T(r,w),w.c=T(e,w),E.x=T(n,E),E.X=T(r,E),E.c=T(e,E);function T($,U){return function(Z){var C=[],ht=-1,K=0,St=$.length,Tt,V,st;for(Z instanceof Date||(Z=new Date(+Z));++ht<St;)$.charCodeAt(ht)===37&&(C.push($.slice(K,ht)),(V=qc[Tt=$.charAt(++ht)])!=null?Tt=$.charAt(++ht):V=Tt==="e"?" ":"0",(st=U[Tt])&&(Tt=st(Z,V)),C.push(Tt),K=ht+1);return C.push($.slice(K,ht)),C.join("")}}function O($,U){return function(Z){var C=br(1900,void 0,1),ht=M(C,$,Z+="",0),K,St;if(ht!=Z.length)return null;if("Q"in C)return new Date(C.Q);if("s"in C)return new Date(C.s*1e3+("L"in C?C.L:0));if(U&&!("Z"in C)&&(C.Z=0),"p"in C&&(C.H=C.H%12+C.p*12),C.m===void 0&&(C.m="q"in C?C.q:0),"V"in C){if(C.V<1||C.V>53)return null;"w"in C||(C.w=1),"Z"in C?(K=as(br(C.y,0,1)),St=K.getUTCDay(),K=St>4||St===0?io.ceil(K):io(K),K=tl.offset(K,(C.V-1)*7),C.y=K.getUTCFullYear(),C.m=K.getUTCMonth(),C.d=K.getUTCDate()+(C.w+6)%7):(K=ss(br(C.y,0,1)),St=K.getDay(),K=St>4||St===0?ro.ceil(K):ro(K),K=oi.offset(K,(C.V-1)*7),C.y=K.getFullYear(),C.m=K.getMonth(),C.d=K.getDate()+(C.w+6)%7)}else("W"in C||"U"in C)&&("w"in C||(C.w="u"in C?C.u%7:"W"in C?1:0),St="Z"in C?as(br(C.y,0,1)).getUTCDay():ss(br(C.y,0,1)).getDay(),C.m=0,C.d="W"in C?(C.w+6)%7+C.W*7-(St+5)%7:C.w+C.U*7-(St+6)%7);return"Z"in C?(C.H+=C.Z/100|0,C.M+=C.Z%100,as(C)):ss(C)}}function M($,U,Z,C){for(var ht=0,K=U.length,St=Z.length,Tt,V;ht<K;){if(C>=St)return-1;if(Tt=U.charCodeAt(ht++),Tt===37){if(Tt=U.charAt(ht++),V=x[Tt in qc?U.charAt(ht++):Tt],!V||(C=V($,Z,C))<0)return-1}else if(Tt!=Z.charCodeAt(C++))return-1}return C}function P($,U,Z){var C=c.exec(U.slice(Z));return C?($.p=u.get(C[0].toLowerCase()),Z+C[0].length):-1}function I($,U,Z){var C=d.exec(U.slice(Z));return C?($.w=p.get(C[0].toLowerCase()),Z+C[0].length):-1}function k($,U,Z){var C=h.exec(U.slice(Z));return C?($.w=f.get(C[0].toLowerCase()),Z+C[0].length):-1}function W($,U,Z){var C=m.exec(U.slice(Z));return C?($.m=_.get(C[0].toLowerCase()),Z+C[0].length):-1}function L($,U,Z){var C=v.exec(U.slice(Z));return C?($.m=g.get(C[0].toLowerCase()),Z+C[0].length):-1}function H($,U,Z){return M($,e,U,Z)}function at($,U,Z){return M($,n,U,Z)}function nt($,U,Z){return M($,r,U,Z)}function G($){return s[$.getDay()]}function Q($){return o[$.getDay()]}function X($){return l[$.getMonth()]}function lt($){return a[$.getMonth()]}function Y($){return i[+($.getHours()>=12)]}function tt($){return 1+~~($.getMonth()/3)}function ot($){return s[$.getUTCDay()]}function Ot($){return o[$.getUTCDay()]}function q($){return l[$.getUTCMonth()]}function B($){return a[$.getUTCMonth()]}function z($){return i[+($.getUTCHours()>=12)]}function rt($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var U=T($+="",w);return U.toString=function(){return $},U},parse:function($){var U=O($+="",!1);return U.toString=function(){return $},U},utcFormat:function($){var U=T($+="",E);return U.toString=function(){return $},U},utcParse:function($){var U=O($+="",!0);return U.toString=function(){return $},U}}}var qc={"-":"",_:" ",0:"0"},Pt=/^\s*\d+/,SE=/^%/,ME=/[\\^$*+?|[\]().{}]/g;function ut(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function AE(t){return t.replace(ME,"\\$&")}function _r(t){return new RegExp("^(?:"+t.map(AE).join("|")+")","i")}function wr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function CE(t,e,n){var r=Pt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function $E(t,e,n){var r=Pt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function kE(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function DE(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function LE(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Kc(t,e,n){var r=Pt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Qc(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function RE(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function IE(t,e,n){var r=Pt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function PE(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Jc(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function NE(t,e,n){var r=Pt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function tu(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function BE(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function UE(t,e,n){var r=Pt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function HE(t,e,n){var r=Pt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function FE(t,e,n){var r=Pt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function VE(t,e,n){var r=SE.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function jE(t,e,n){var r=Pt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function GE(t,e,n){var r=Pt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function eu(t,e){return ut(t.getDate(),e,2)}function zE(t,e){return ut(t.getHours(),e,2)}function WE(t,e){return ut(t.getHours()%12||12,e,2)}function YE(t,e){return ut(1+oi.count(Je(t),t),e,3)}function Of(t,e){return ut(t.getMilliseconds(),e,3)}function ZE(t,e){return Of(t,e)+"000"}function XE(t,e){return ut(t.getMonth()+1,e,2)}function qE(t,e){return ut(t.getMinutes(),e,2)}function KE(t,e){return ut(t.getSeconds(),e,2)}function QE(t){var e=t.getDay();return e===0?7:e}function JE(t,e){return ut(Bo.count(Je(t)-1,t),e,2)}function Sf(t){var e=t.getDay();return e>=4||e===0?sr(t):sr.ceil(t)}function tO(t,e){return t=Sf(t),ut(sr.count(Je(t),t)+(Je(t).getDay()===4),e,2)}function eO(t){return t.getDay()}function nO(t,e){return ut(ro.count(Je(t)-1,t),e,2)}function rO(t,e){return ut(t.getFullYear()%100,e,2)}function iO(t,e){return t=Sf(t),ut(t.getFullYear()%100,e,2)}function oO(t,e){return ut(t.getFullYear()%1e4,e,4)}function sO(t,e){var n=t.getDay();return t=n>=4||n===0?sr(t):sr.ceil(t),ut(t.getFullYear()%1e4,e,4)}function aO(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ut(e/60|0,"0",2)+ut(e%60,"0",2)}function nu(t,e){return ut(t.getUTCDate(),e,2)}function lO(t,e){return ut(t.getUTCHours(),e,2)}function cO(t,e){return ut(t.getUTCHours()%12||12,e,2)}function uO(t,e){return ut(1+tl.count(On(t),t),e,3)}function Mf(t,e){return ut(t.getUTCMilliseconds(),e,3)}function hO(t,e){return Mf(t,e)+"000"}function dO(t,e){return ut(t.getUTCMonth()+1,e,2)}function fO(t,e){return ut(t.getUTCMinutes(),e,2)}function pO(t,e){return ut(t.getUTCSeconds(),e,2)}function gO(t){var e=t.getUTCDay();return e===0?7:e}function mO(t,e){return ut(Ef.count(On(t)-1,t),e,2)}function Af(t){var e=t.getUTCDay();return e>=4||e===0?ar(t):ar.ceil(t)}function vO(t,e){return t=Af(t),ut(ar.count(On(t),t)+(On(t).getUTCDay()===4),e,2)}function yO(t){return t.getUTCDay()}function bO(t,e){return ut(io.count(On(t)-1,t),e,2)}function _O(t,e){return ut(t.getUTCFullYear()%100,e,2)}function wO(t,e){return t=Af(t),ut(t.getUTCFullYear()%100,e,2)}function xO(t,e){return ut(t.getUTCFullYear()%1e4,e,4)}function TO(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ar(t):ar.ceil(t),ut(t.getUTCFullYear()%1e4,e,4)}function EO(){return"+0000"}function ru(){return"%"}function iu(t){return+t}function ou(t){return Math.floor(+t/1e3)}var In,Cf;OO({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function OO(t){return In=OE(t),Cf=In.format,In.parse,In.utcFormat,In.utcParse,In}function SO(t){return new Date(t)}function MO(t){return t instanceof Date?+t:+new Date(+t)}function $f(t,e,n,r,i,o,s,a,l,c){var u=Jd(),h=u.invert,f=u.domain,d=c(".%L"),p=c(":%S"),v=c("%I:%M"),g=c("%I %p"),m=c("%a %d"),_=c("%b %d"),w=c("%B"),E=c("%Y");function x(T){return(l(T)<T?d:a(T)<T?p:s(T)<T?v:o(T)<T?g:r(T)<T?i(T)<T?m:_:n(T)<T?w:E)(T)}return u.invert=function(T){return new Date(h(T))},u.domain=function(T){return arguments.length?f(Array.from(T,MO)):f().map(SO)},u.ticks=function(T){var O=f();return t(O[0],O[O.length-1],T??10)},u.tickFormat=function(T,O){return O==null?x:c(O)},u.nice=function(T){var O=f();return(!T||typeof T.range!="function")&&(T=e(O[0],O[O.length-1],T??10)),T?f(Tf(O,T)):u},u.copy=function(){return Wa(u,$f(t,e,n,r,i,o,s,a,l,c))},u}function kf(){return ri.apply($f(TE,EE,Je,el,Bo,oi,Ja,Qa,jn,Cf).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const su=Math.abs,Vt=Math.atan2,fn=Math.cos,AO=Math.max,ls=Math.min,De=Math.sin,Gn=Math.sqrt,Wt=1e-12,Xr=Math.PI,oo=Xr/2,CO=2*Xr;function $O(t){return t>1?0:t<-1?Xr:Math.acos(t)}function au(t){return t>=1?oo:t<=-1?-oo:Math.asin(t)}function Df(t){this._context=t}Df.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function nl(t){return new Df(t)}function ln(){}function Lf(t){this._context=t}Lf.prototype={areaStart:ln,areaEnd:ln,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function kO(t){return new Lf(t)}function DO(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const LO=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function Xe(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function so(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function RO(t){const e=so(t,"border-left-width"),n=so(t,"border-right-width");return t.clientWidth+e+n}function IO(t){const e=so(t,"border-top-width"),n=so(t,"border-bottom-width");return t.clientHeight+e+n}function Rf(t,e={}){const n=e.width||RO(t),r=e.height||IO(t);return{width:n,height:r}}function PO(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const le=16384;function NO(t){(t.width>le||t.height>le)&&(t.width>le&&t.height>le?t.width>t.height?(t.height*=le/t.width,t.width=le):(t.width*=le/t.height,t.height=le):t.width>le?(t.height*=le/t.width,t.width=le):(t.width*=le/t.height,t.height=le))}function ao(t){return new Promise((e,n)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function BO(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function UO(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),o=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),i.appendChild(o),o.appendChild(t),BO(i)}const ie=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||ie(n,e)};function HO(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function FO(t){return Xe(t).map(e=>{const n=t.getPropertyValue(e),r=t.getPropertyPriority(e);return`${e}: ${n}${r?" !important":""};`}).join(" ")}function VO(t,e,n){const r=`.${t}:${e}`,i=n.cssText?HO(n):FO(n);return document.createTextNode(`${r}{${i}}`)}function lu(t,e,n){const r=window.getComputedStyle(t,n),i=r.getPropertyValue("content");if(i===""||i==="none")return;const o=LO();try{e.className=`${e.className} ${o}`}catch{return}const s=document.createElement("style");s.appendChild(VO(o,n,r)),e.appendChild(s)}function jO(t,e){lu(t,e,":before"),lu(t,e,":after")}const cu="application/font-woff",uu="image/jpeg",GO={woff:cu,woff2:cu,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:uu,jpeg:uu,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function zO(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function rl(t){const e=zO(t).toLowerCase();return GO[e]||""}function WO(t){return t.split(/,/)[1]}function Vs(t){return t.search(/^(data:)/)!==-1}function YO(t,e){return`data:${e};base64,${t}`}async function If(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((o,s)=>{const a=new FileReader;a.onerror=s,a.onloadend=()=>{try{o(n({res:r,result:a.result}))}catch(l){s(l)}},a.readAsDataURL(i)})}const cs={};function ZO(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function il(t,e,n){const r=ZO(t,e,n.includeQueryParams);if(cs[r]!=null)return cs[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const o=await If(t,n.fetchRequestInit,({res:s,result:a})=>(e||(e=s.headers.get("Content-Type")||""),WO(a)));i=YO(o,e)}catch(o){i=n.imagePlaceholder||"";let s=`Failed to fetch resource: ${t}`;o&&(s=typeof o=="string"?o:o.message),s&&console.warn(s)}return cs[r]=i,i}async function XO(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):ao(e)}async function qO(t,e){if(t.currentSrc){const o=document.createElement("canvas"),s=o.getContext("2d");o.width=t.clientWidth,o.height=t.clientHeight,s==null||s.drawImage(t,0,0,o.width,o.height);const a=o.toDataURL();return ao(a)}const n=t.poster,r=rl(n),i=await il(n,r,e);return ao(i)}async function KO(t){var e;try{if(!((e=t==null?void 0:t.contentDocument)===null||e===void 0)&&e.body)return await Uo(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)}async function QO(t,e){return ie(t,HTMLCanvasElement)?XO(t):ie(t,HTMLVideoElement)?qO(t,e):ie(t,HTMLIFrameElement)?KO(t):t.cloneNode(!1)}const JO=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT";async function tS(t,e,n){var r,i;let o=[];return JO(t)&&t.assignedNodes?o=Xe(t.assignedNodes()):ie(t,HTMLIFrameElement)&&!((r=t.contentDocument)===null||r===void 0)&&r.body?o=Xe(t.contentDocument.body.childNodes):o=Xe(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),o.length===0||ie(t,HTMLVideoElement)||await o.reduce((s,a)=>s.then(()=>Uo(a,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function eS(t,e){const n=e.style;if(!n)return;const r=window.getComputedStyle(t);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):Xe(r).forEach(i=>{let o=r.getPropertyValue(i);i==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),ie(t,HTMLIFrameElement)&&i==="display"&&o==="inline"&&(o="block"),i==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),n.setProperty(i,o,r.getPropertyPriority(i))})}function nS(t,e){ie(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),ie(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function rS(t,e){if(ie(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function iS(t,e){return ie(e,Element)&&(eS(t,e),jO(t,e),nS(t,e),rS(t,e)),e}async function oS(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let o=0;o<n.length;o++){const s=n[o].getAttribute("xlink:href");if(s){const a=t.querySelector(s),l=document.querySelector(s);!a&&l&&!r[s]&&(r[s]=await Uo(l,e,!0))}}const i=Object.values(r);if(i.length){const o="http://www.w3.org/1999/xhtml",s=document.createElementNS(o,"svg");s.setAttribute("xmlns",o),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const a=document.createElementNS(o,"defs");s.appendChild(a);for(let l=0;l<i.length;l++)a.appendChild(i[l]);t.appendChild(s)}return t}async function Uo(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>QO(r,e)).then(r=>tS(t,r,e)).then(r=>iS(t,r)).then(r=>oS(r,e))}const Pf=/url\((['"]?)([^'"]+?)\1\)/g,sS=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,aS=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function lS(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function cS(t){const e=[];return t.replace(Pf,(n,r,i)=>(e.push(i),n)),e.filter(n=>!Vs(n))}async function uS(t,e,n,r,i){try{const o=n?DO(e,n):e,s=rl(e);let a;return i||(a=await il(o,s,r)),t.replace(lS(e),`$1${a}$3`)}catch{}return t}function hS(t,{preferredFontFormat:e}){return e?t.replace(aS,n=>{for(;;){const[r,,i]=sS.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function Nf(t){return t.search(Pf)!==-1}async function Bf(t,e,n){if(!Nf(t))return t;const r=hS(t,n);return cS(r).reduce((i,o)=>i.then(s=>uS(s,o,e,n)),Promise.resolve(r))}async function gi(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const o=await Bf(i,null,n);return e.style.setProperty(t,o,e.style.getPropertyPriority(t)),!0}return!1}async function dS(t,e){await gi("background",t,e)||await gi("background-image",t,e),await gi("mask",t,e)||await gi("mask-image",t,e)}async function fS(t,e){const n=ie(t,HTMLImageElement);if(!(n&&!Vs(t.src))&&!(ie(t,SVGImageElement)&&!Vs(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await il(r,rl(r),e);await new Promise((o,s)=>{t.onload=o,t.onerror=s;const a=t;a.decode&&(a.decode=o),a.loading==="lazy"&&(a.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function pS(t,e){const n=Xe(t.childNodes).map(r=>Uf(r,e));await Promise.all(n).then(()=>t)}async function Uf(t,e){ie(t,Element)&&(await dS(t,e),await fS(t,e),await pS(t,e))}function gS(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const hu={};async function du(t){let e=hu[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},hu[t]=e,e}async function fu(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let s=o.replace(r,"$1");return s.startsWith("https://")||(s=new URL(s,t.url).href),If(s,e.fetchRequestInit,({result:a})=>(n=n.replace(o,`url(${a})`),[o,a]))});return Promise.all(i).then(()=>n)}function pu(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(i,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(s,"gi");for(;;){let l=o.exec(r);if(l===null){if(l=a.exec(r),l===null)break;o.lastIndex=a.lastIndex}else a.lastIndex=o.lastIndex;e.push(l[0])}return e}async function mS(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{Xe(i.cssRules||[]).forEach((o,s)=>{if(o.type===CSSRule.IMPORT_RULE){let a=s+1;const l=o.href,c=du(l).then(u=>fu(u,e)).then(u=>pu(u).forEach(h=>{try{i.insertRule(h,h.startsWith("@import")?a+=1:i.cssRules.length)}catch(f){console.error("Error inserting rule from remote css",{rule:h,error:f})}})).catch(u=>{console.error("Error loading remote css",u.toString())});r.push(c)}})}catch(o){const s=t.find(a=>a.href==null)||document.styleSheets[0];i.href!=null&&r.push(du(i.href).then(a=>fu(a,e)).then(a=>pu(a).forEach(l=>{s.insertRule(l,i.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",o)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{Xe(i.cssRules||[]).forEach(o=>{n.push(o)})}catch(o){console.error(`Error while reading CSS rules from ${i.href}`,o)}}),n))}function vS(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Nf(e.style.getPropertyValue("src")))}async function yS(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Xe(t.ownerDocument.styleSheets),r=await mS(n,e);return vS(r)}async function bS(t,e){const n=await yS(t,e);return(await Promise.all(n.map(r=>{const i=r.parentStyleSheet?r.parentStyleSheet.href:null;return Bf(r.cssText,i,e)}))).join(`
`)}async function _S(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await bS(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function wS(t,e={}){const{width:n,height:r}=Rf(t,e),i=await Uo(t,e,!0);return await _S(i,e),await Uf(i,e),gS(i,e),await UO(i,n,r)}async function Hf(t,e={}){const{width:n,height:r}=Rf(t,e),i=await wS(t,e),o=await ao(i),s=document.createElement("canvas"),a=s.getContext("2d"),l=e.pixelRatio||PO(),c=e.canvasWidth||n,u=e.canvasHeight||r;return s.width=c*l,s.height=u*l,e.skipAutoScale||NO(s),s.style.width=`${c}`,s.style.height=`${u}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,s.width,s.height)),a.drawImage(o,0,0,s.width,s.height),s}async function xS(t,e={}){return(await Hf(t,e)).toDataURL()}async function TS(t,e={}){return(await Hf(t,e)).toDataURL("image/jpeg",e.quality||1)}let nn=class{constructor(e,n){this.model=e,this.services=n,this.init()}init(){}update(){}setModel(e){this.model=e}setServices(e){this.services=e}};const ES="DONT_STYLE_ME_css_styles_verifier";class R extends nn{constructor(e,n){super(e,n)}static getHTMLElementSize(e){return{width:e.clientWidth,height:e.clientHeight}}static getSVGElementSize(e,n={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}){e.attr||(e=D(e));const r={width:0,height:0},i=f=>{f&&Object.keys(r).forEach(d=>{if(f[d]){const p=f[d],v=parseFloat(p);p&&v>r[d]&&(""+p).indexOf("%")===-1&&(r[d]=v)}})},o={width:e.attr("width"),height:e.attr("height")},s=e.node();let a,l,c,u;try{typeof s.getBBox=="function"&&(a=s.getBBox(),l={width:a.width,height:a.height})}catch(f){console.error(f)}try{typeof(s==null?void 0:s.getBoundingClientRect)=="function"&&(c=s.getBoundingClientRect(),u={width:c.width,height:c.height})}catch(f){console.error(f)}let h;if(s instanceof SVGSVGElement&&(h={width:s.clientWidth,height:s.clientHeight}),n){if(n.useAttrs&&(i(o),r.width>0&&r.height>0))return r;if(n.useClientDimensions&&(i(h),r.width>0&&r.height>0))return h;if(n.useBBox&&(i(l),r.width>0&&r.height>0))return l;if(n.useBoundingRect&&(i(u),r.width>0&&r.height>0))return u}try{const f={width:y(e.node(),"width","baseVal","value"),height:y(e.node(),"height","baseVal","value")};i(f)}catch{i(h),i(l),i(o)}return r}static appendOrSelect(e,n){const r=e.select(`${n}`);if(r.empty()){let i=n.split("#"),o,s;return i.length===2?(o=i[0],i=i[1].split("."),s=i[0]):(i=n.split("."),o=i[0]),e.append(o).attr("id",s).attr("class",i.slice(1).join(" "))}return r}init(){this.initializeID(),this.styleHolderElement(),this.addMainContainer(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()}getChartID(){return this.chartID}getElementOffset(e,n=!1){const r={left:0,top:0},i=e.getBoundingClientRect(),o=n?{left:0,top:0}:this.getHolder().getBoundingClientRect();try{r.left=i.left-o.left,r.top=i.top-o.top}catch(s){console.error(s)}return r}generateElementIDString(e){return`chart-${this.chartID}-${e}`}initializeID(){this.chartID=Math.floor((1+Math.random())*281474976710656).toString(16)}addMainContainer(){const e=this.model.getOptions(),n=y(e,"style","prefix"),r=D(this.getHolder()).append("div").classed(`${ne}--${n}--chart-wrapper`,!0).attr("id",`chart-${this.getChartID()}`).style("height","100%").style("width","100%");r.append("g").attr("class",ES),this.mainContainer=r.node()}update(){this.styleHolderElement()}styleHolderElement(){const e=this.getHolder(),{width:n,height:r,theme:i}=this.model.getOptions();n!==this.width&&(e.style.width=n,this.width=n),r!==this.height&&(e.style.height=r,this.height=r),D(this.getHolder()).classed(`${ne}--chart-holder`,!0).attr("data-carbon-theme",i)}getHolder(){return this.model.get("holder")}exportToJPG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=D(r);i.classed("filled",!0),TS(this.getMainContainer(),{quality:1,filter:o=>!(o.classList&&o.classList.contains("cds--cc--toolbar"))}).then(function(o){var s;let a="myChart";const l=y(n,"fileDownload","fileName");typeof l=="function"?a=l("jpg"):typeof l=="string"&&(a=l),(s=e.services.files)==null||s.downloadImage(o,`${a}.jpg`),i.classed("filled",!1)})}exportToPNG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=D(r);i.classed("filled",!0),xS(this.getMainContainer(),{quality:1,filter:o=>!(o.classList&&o.classList.contains("cds--cc--toolbar"))}).then(function(o){var s;let a="myChart";const l=y(n,"fileDownload","fileName");typeof l=="function"?a=l("png"):typeof l=="string"&&(a=l),(s=e.services.files)==null||s.downloadImage(o,`${a}.png`),i.classed("filled",!1)}).catch(function(o){console.error("oops, something went wrong!",o)})}isFullScreenMode(){return D(this.getHolder()).classed("fullscreen")}toggleFullscreen(){const e=this.getHolder();D(e).classed("fullscreen")&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}handleFullscreenChange(){document.addEventListener("fullscreenchange",()=>{const e=D(this.getHolder()),n=e.classed("fullscreen");e.classed("fullscreen",!n)})}setSVGMaxHeight(){if(!this.model.getOptions().height){const{height:e}=R.getSVGElementSize(D(this.mainContainer),{useBBox:!0}),n=D(this.mainContainer).attr("class"),r=D(this.mainContainer).selectAll(`.${n} > svg`);let i=0;r.nodes().forEach(function(o){i+=Number(R.getSVGElementSize(D(o),{useBBox:!0}).height)}),i<=e?D(this.mainContainer).attr("height",i):D(this.mainContainer).attr("height","100%")}}getMainContainer(){return this.mainContainer}addHolderListeners(){const e=this.getHolder();e&&D(e).on("mouseover",()=>{var n;(n=this.services.events)==null||n.dispatchEvent(S.Chart.MOUSEOVER)}).on("mouseout",()=>{var n;(n=this.services.events)==null||n.dispatchEvent(S.Chart.MOUSEOUT)})}addResizeListener(){const e=this.getHolder();if(!e)return;let n=e.clientWidth,r=e.clientHeight;const i=lE(()=>{var o;e&&(Math.abs(n-e.clientWidth)>1||Math.abs(r-e.clientHeight)>1)&&(n=e.clientWidth,r=e.clientHeight,(o=this.services.events)==null||o.dispatchEvent(S.Chart.RESIZE))},12.5);new ResizeObserver(i).observe(e)}}let js=class Ff extends nn{static appendOrUpdateLinearGradient(e){let n=e.svg.select(`defs linearGradient#${e.id}`);n.empty()&&(n=e.svg.append("defs").append("linearGradient").attr("id",e.id).attr("x1",e.x1).attr("x2",e.x2).attr("y1",e.y1).attr("y2",e.y2)),n.selectAll("stop").remove(),n.selectAll("stop").data(e.stops).enter().append("stop").attr("offset",r=>r.offset).style("stop-color",r=>r.color).style("stop-opacity",r=>r.opacity)}static getOffsetRatio(e){return(Math.abs(e[1])*100/Math.abs(e[0]-e[1])).toFixed(2)+"%"}static getStops(e,n){const r=e[0]<0&&e[1]>0;let i=[{offset:"0%",color:n,opacity:"0.6"},{offset:"80%",color:n,opacity:"0"}];return r&&(i=[{offset:"0%",color:n,opacity:"0.6"},{offset:Ff.getOffsetRatio(e),color:n,opacity:"0"},{offset:"100%",color:n,opacity:"0.6"}]),i}};function OS(t,e,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}function SS(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=qn(n),n=n===n?n:0),e!==void 0&&(e=qn(e),e=e===e?e:0),OS(qn(t),e,n)}var MS="Expected a function";function AS(t,e,n){if(typeof t!="function")throw new TypeError(MS);return setTimeout(function(){t.apply(void 0,n)},e)}xa(function(t,e,n){return AS(t,qn(e)||0,n)});function CS(t,e){return Do(t,e)}function $S(t,e){var n;return wf(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}function kS(t,e,n){var r=Yt(t)?fd:$S;return r(t,La(e))}function DS(t){return t}var Oi=1,Si=2,Gs=3,$r=4,gu=1e-6;function LS(t){return"translate("+t+",0)"}function RS(t){return"translate(0,"+t+")"}function IS(t){return e=>+t(e)}function PS(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function NS(){return!this.__axis}function Ho(t,e){var n=[],r=null,i=null,o=6,s=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===Oi||t===$r?-1:1,u=t===$r||t===Si?"x":"y",h=t===Oi||t===Gs?LS:RS;function f(d){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),v=i??(e.tickFormat?e.tickFormat.apply(e,n):DS),g=Math.max(o,0)+a,m=e.range(),_=+m[0]+l,w=+m[m.length-1]+l,E=(e.bandwidth?PS:IS)(e.copy(),l),x=d.selection?d.selection():d,T=x.selectAll(".domain").data([null]),O=x.selectAll(".tick").data(p,e).order(),M=O.exit(),P=O.enter().append("g").attr("class","tick"),I=O.select("line"),k=O.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),O=O.merge(P),I=I.merge(P.append("line").attr("stroke","currentColor").attr(u+"2",c*o)),k=k.merge(P.append("text").attr("fill","currentColor").attr(u,c*g).attr("dy",t===Oi?"0em":t===Gs?"0.71em":"0.32em")),d!==x&&(T=T.transition(d),O=O.transition(d),I=I.transition(d),k=k.transition(d),M=M.transition(d).attr("opacity",gu).attr("transform",function(W){return isFinite(W=E(W))?h(W+l):this.getAttribute("transform")}),P.attr("opacity",gu).attr("transform",function(W){var L=this.parentNode.__axis;return h((L&&isFinite(L=L(W))?L:E(W))+l)})),M.remove(),T.attr("d",t===$r||t===Si?s?"M"+c*s+","+_+"H"+l+"V"+w+"H"+c*s:"M"+l+","+_+"V"+w:s?"M"+_+","+c*s+"V"+l+"H"+w+"V"+c*s:"M"+_+","+l+"H"+w),O.attr("opacity",1).attr("transform",function(W){return h(E(W)+l)}),I.attr(u+"2",c*o),k.attr(u,c*g).text(v),x.filter(NS).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Si?"start":t===$r?"end":"middle"),x.each(function(){this.__axis=E})}return f.scale=function(d){return arguments.length?(e=d,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),f):r&&r.slice()},f.tickFormat=function(d){return arguments.length?(i=d,f):i},f.tickSize=function(d){return arguments.length?(o=s=+d,f):o},f.tickSizeInner=function(d){return arguments.length?(o=+d,f):o},f.tickSizeOuter=function(d){return arguments.length?(s=+d,f):s},f.tickPadding=function(d){return arguments.length?(a=+d,f):a},f.offset=function(d){return arguments.length?(l=+d,f):l},f}function BS(t){return Ho(Oi,t)}function US(t){return Ho(Si,t)}function Vf(t){return Ho(Gs,t)}function jf(t){return Ho($r,t)}const zs={capture:!0,passive:!1};function Ws(t){t.preventDefault(),t.stopImmediatePropagation()}function HS(t){var e=t.document.documentElement,n=D(t).on("dragstart.drag",Ws,zs);"onselectstart"in e?n.on("selectstart.drag",Ws,zs):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function FS(t,e){var n=t.document.documentElement,r=D(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ws,zs),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const VS=t=>+t,us=t=>()=>t;function jS(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function GS(t){t.stopImmediatePropagation()}function hs(t){t.preventDefault(),t.stopImmediatePropagation()}var mu={name:"drag"},ds={name:"space"},Pn={name:"handle"},Nn={name:"center"};const{abs:vu,max:jt,min:Gt}=Math;function yu(t){return[+t[0],+t[1]]}function bu(t){return[yu(t[0]),yu(t[1])]}var Mi={name:"x",handles:["w","e"].map(lo),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},fs={name:"y",handles:["n","s"].map(lo),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ge={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},_u={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},wu={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},zS={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},WS={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function lo(t){return{type:t}}function YS(t){return!t.ctrlKey&&!t.button}function ZS(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function XS(){return navigator.maxTouchPoints||"ontouchstart"in this}function ps(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function qS(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Gf(){return KS(Mi)}function KS(t){var e=ZS,n=YS,r=XS,i=!0,o=Ia("start","brush","end"),s=6,a;function l(g){var m=g.property("__brush",v).selectAll(".overlay").data([lo("overlay")]);m.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ge.overlay).merge(m).each(function(){var w=ps(this).extent;D(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),g.selectAll(".selection").data([lo("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ge.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=g.selectAll(".handle").data(t.handles,function(w){return w.type});_.exit().remove(),_.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return Ge[w.type]}),g.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(g,m,_){g.tween?g.on("start.brush",function(w){u(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){u(this,arguments).end(w)}).tween("brush",function(){var w=this,E=w.__brush,x=u(w,arguments),T=E.selection,O=t.input(typeof m=="function"?m.apply(this,arguments):m,E.extent),M=Ro(T,O);function P(I){E.selection=I===1&&O===null?null:M(I),c.call(w),x.brush()}return T!==null&&O!==null?P:P(1)}):g.each(function(){var w=this,E=arguments,x=w.__brush,T=t.input(typeof m=="function"?m.apply(w,E):m,x.extent),O=u(w,E).beforestart();Ns(w),x.selection=T===null?null:T,c.call(w),O.start(_).brush(_).end(_)})},l.clear=function(g,m){l.move(g,null,m)};function c(){var g=D(this),m=ps(this).selection;m?(g.selectAll(".selection").style("display",null).attr("x",m[0][0]).attr("y",m[0][1]).attr("width",m[1][0]-m[0][0]).attr("height",m[1][1]-m[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?m[1][0]-s/2:m[0][0]-s/2}).attr("y",function(_){return _.type[0]==="s"?m[1][1]-s/2:m[0][1]-s/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?m[1][0]-m[0][0]+s:s}).attr("height",function(_){return _.type==="e"||_.type==="w"?m[1][1]-m[0][1]+s:s})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(g,m,_){var w=g.__brush.emitter;return w&&(!_||!w.clean)?w:new h(g,m,_)}function h(g,m,_){this.that=g,this.args=m,this.state=g.__brush,this.active=0,this.clean=_}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,m){return this.starting?(this.starting=!1,this.emit("start",g,m)):this.emit("brush",g),this},brush:function(g,m){return this.emit("brush",g,m),this},end:function(g,m){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,m)),this},emit:function(g,m,_){var w=D(this.that).datum();o.call(g,this.that,new jS(g,{sourceEvent:m,target:l,selection:t.output(this.state.selection),mode:_,dispatch:o}),w)}};function f(g){if(a&&!g.touches||!n.apply(this,arguments))return;var m=this,_=g.target.__data__.type,w=(i&&g.metaKey?_="overlay":_)==="selection"?mu:i&&g.altKey?Nn:Pn,E=t===fs?null:zS[_],x=t===Mi?null:WS[_],T=ps(m),O=T.extent,M=T.selection,P=O[0][0],I,k,W=O[0][1],L,H,at=O[1][0],nt,G,Q=O[1][1],X,lt,Y=0,tt=0,ot,Ot=E&&x&&i&&g.shiftKey,q,B,z=Array.from(g.touches||[g],V=>{const st=V.identifier;return V=wn(V,m),V.point0=V.slice(),V.identifier=st,V});Ns(m);var rt=u(m,arguments,!0).beforestart();if(_==="overlay"){M&&(ot=!0);const V=[z[0],z[1]||z[0]];T.selection=M=[[I=t===fs?P:Gt(V[0][0],V[1][0]),L=t===Mi?W:Gt(V[0][1],V[1][1])],[nt=t===fs?at:jt(V[0][0],V[1][0]),X=t===Mi?Q:jt(V[0][1],V[1][1])]],z.length>1&&ht(g)}else I=M[0][0],L=M[0][1],nt=M[1][0],X=M[1][1];k=I,H=L,G=nt,lt=X;var $=D(m).attr("pointer-events","none"),U=$.selectAll(".overlay").attr("cursor",Ge[_]);if(g.touches)rt.moved=C,rt.ended=K;else{var Z=D(g.view).on("mousemove.brush",C,!0).on("mouseup.brush",K,!0);i&&Z.on("keydown.brush",St,!0).on("keyup.brush",Tt,!0),HS(g.view)}c.call(m),rt.start(g,w.name);function C(V){for(const st of V.changedTouches||[V])for(const Xt of z)Xt.identifier===st.identifier&&(Xt.cur=wn(st,m));if(Ot&&!q&&!B&&z.length===1){const st=z[0];vu(st.cur[0]-st[0])>vu(st.cur[1]-st[1])?B=!0:q=!0}for(const st of z)st.cur&&(st[0]=st.cur[0],st[1]=st.cur[1]);ot=!0,hs(V),ht(V)}function ht(V){const st=z[0],Xt=st.point0;var qt;switch(Y=st[0]-Xt[0],tt=st[1]-Xt[1],w){case ds:case mu:{E&&(Y=jt(P-I,Gt(at-nt,Y)),k=I+Y,G=nt+Y),x&&(tt=jt(W-L,Gt(Q-X,tt)),H=L+tt,lt=X+tt);break}case Pn:{z[1]?(E&&(k=jt(P,Gt(at,z[0][0])),G=jt(P,Gt(at,z[1][0])),E=1),x&&(H=jt(W,Gt(Q,z[0][1])),lt=jt(W,Gt(Q,z[1][1])),x=1)):(E<0?(Y=jt(P-I,Gt(at-I,Y)),k=I+Y,G=nt):E>0&&(Y=jt(P-nt,Gt(at-nt,Y)),k=I,G=nt+Y),x<0?(tt=jt(W-L,Gt(Q-L,tt)),H=L+tt,lt=X):x>0&&(tt=jt(W-X,Gt(Q-X,tt)),H=L,lt=X+tt));break}case Nn:{E&&(k=jt(P,Gt(at,I-Y*E)),G=jt(P,Gt(at,nt+Y*E))),x&&(H=jt(W,Gt(Q,L-tt*x)),lt=jt(W,Gt(Q,X+tt*x)));break}}G<k&&(E*=-1,qt=I,I=nt,nt=qt,qt=k,k=G,G=qt,_ in _u&&U.attr("cursor",Ge[_=_u[_]])),lt<H&&(x*=-1,qt=L,L=X,X=qt,qt=H,H=lt,lt=qt,_ in wu&&U.attr("cursor",Ge[_=wu[_]])),T.selection&&(M=T.selection),q&&(k=M[0][0],G=M[1][0]),B&&(H=M[0][1],lt=M[1][1]),(M[0][0]!==k||M[0][1]!==H||M[1][0]!==G||M[1][1]!==lt)&&(T.selection=[[k,H],[G,lt]],c.call(m),rt.brush(V,w.name))}function K(V){if(GS(V),V.touches){if(V.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else FS(V.view,ot),Z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);$.attr("pointer-events","all"),U.attr("cursor",Ge.overlay),T.selection&&(M=T.selection),qS(M)&&(T.selection=null,c.call(m)),rt.end(V,w.name)}function St(V){switch(V.keyCode){case 16:{Ot=E&&x;break}case 18:{w===Pn&&(E&&(nt=G-Y*E,I=k+Y*E),x&&(X=lt-tt*x,L=H+tt*x),w=Nn,ht(V));break}case 32:{(w===Pn||w===Nn)&&(E<0?nt=G-Y:E>0&&(I=k-Y),x<0?X=lt-tt:x>0&&(L=H-tt),w=ds,U.attr("cursor",Ge.selection),ht(V));break}default:return}hs(V)}function Tt(V){switch(V.keyCode){case 16:{Ot&&(q=B=Ot=!1,ht(V));break}case 18:{w===Nn&&(E<0?nt=G:E>0&&(I=k),x<0?X=lt:x>0&&(L=H),w=Pn,ht(V));break}case 32:{w===ds&&(V.altKey?(E&&(nt=G-Y*E,I=k+Y*E),x&&(X=lt-tt*x,L=H+tt*x),w=Nn):(E<0?nt=G:E>0&&(I=k),x<0?X=lt:x>0&&(L=H),w=Pn),U.attr("cursor",Ge[_]),ht(V));break}default:return}hs(V)}}function d(g){u(this,arguments).moved(g)}function p(g){u(this,arguments).ended(g)}function v(){var g=this.__brush||{selection:null};return g.extent=bu(e.apply(this,arguments)),g.dim=t,g}return l.extent=function(g){return arguments.length?(e=typeof g=="function"?g:us(bu(g)),l):e},l.filter=function(g){return arguments.length?(n=typeof g=="function"?g:us(!!g),l):n},l.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:us(!!g),l):r},l.handleSize=function(g){return arguments.length?(s=+g,l):s},l.keyModifiers=function(g){return arguments.length?(i=!!g,l):i},l.on=function(){var g=o.on.apply(o,arguments);return g===o?l:g},l}const Ys=Math.PI,Zs=2*Ys,gn=1e-6,QS=Zs-gn;function zf(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function JS(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return zf;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let tM=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zf:JS(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,a=n-t,l=r-e,c=o-t,u=s-e,h=c*c+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(h>gn)if(!(Math.abs(u*a-l*c)>gn)||!i)this._append`L${this._x1=t},${this._y1=e}`;else{let f=n-o,d=r-s,p=a*a+l*l,v=f*f+d*d,g=Math.sqrt(p),m=Math.sqrt(h),_=i*Math.tan((Ys-Math.acos((p+h-v)/(2*g*m)))/2),w=_/m,E=_/g;Math.abs(w-1)>gn&&this._append`L${t+w*c},${e+w*u}`,this._append`A${i},${i},0,0,${+(u*f>c*d)},${this._x1=t+E*a},${this._y1=e+E*l}`}}arc(t,e,n,r,i,o){if(t=+t,e=+e,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(r),a=n*Math.sin(r),l=t+s,c=e+a,u=1^o,h=o?r-i:i-r;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>gn||Math.abs(this._y1-c)>gn)&&this._append`L${l},${c}`,n&&(h<0&&(h=h%Zs+Zs),h>QS?this._append`A${n},${n},0,1,${u},${t-s},${e-a}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:h>gn&&this._append`A${n},${n},0,${+(h>=Ys)},${u},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};var Wf=Math.PI,xu=Wf*2,eM=Math.abs;function Tu(t,e){return eM(t)>Wf&&(t-=Math.round(t/xu)*xu),[t,e]}Tu.invert=Tu;function Eu(){}Eu.prototype={constructor:Eu,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ou(t,e){return[t,e]}Ou.invert=Ou;function nM(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function rM(){return this.eachAfter(nM)}function iM(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function oM(t,e){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(t.call(e,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function sM(t,e){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function aM(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function lM(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function cM(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function uM(t){for(var e=this,n=hM(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function hM(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function dM(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function fM(){return Array.from(this)}function pM(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function gM(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*mM(){var t=this,e,n=[t],r,i,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Yf(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=bM)):e===void 0&&(e=yM);for(var n=new qr(t),r,i=[n],o,s,a,l;r=i.pop();)if((s=e(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new qr(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(wM)}function vM(){return Yf(this).eachBefore(_M)}function yM(t){return t.children}function bM(t){return Array.isArray(t)?t[1]:null}function _M(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function wM(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function qr(t){this.data=t,this.depth=this.height=0,this.parent=null}qr.prototype=Yf.prototype={constructor:qr,count:rM,each:iM,eachAfter:sM,eachBefore:oM,find:aM,sum:lM,sort:cM,path:uM,ancestors:dM,descendants:fM,leaves:pM,links:gM,copy:vM,[Symbol.iterator]:mM};function xM(t,e,n,r,i){for(var o=t.children,s,a=-1,l=o.length,c=t.value&&(r-e)/t.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=e,s.x1=e+=s.value*c}Object.create(qr.prototype);function TM(t,e,n,r,i){for(var o=t.children,s,a=-1,l=o.length,c=t.value&&(i-n)/t.value;++a<l;)s=o[a],s.x0=e,s.x1=r,s.y0=n,s.y1=n+=s.value*c}var EM=(1+Math.sqrt(5))/2;function OM(t,e,n,r,i,o){for(var s=[],a=e.children,l,c,u=0,h=0,f=a.length,d,p,v=e.value,g,m,_,w,E,x,T;u<f;){d=i-n,p=o-r;do g=a[h++].value;while(!g&&h<f);for(m=_=g,x=Math.max(p/d,d/p)/(v*t),T=g*g*x,E=Math.max(_/T,T/m);h<f;++h){if(g+=c=a[h].value,c<m&&(m=c),c>_&&(_=c),T=g*g*x,w=Math.max(_/T,T/m),w>E){g-=c;break}E=w}s.push(l={value:g,dice:d<p,children:a.slice(u,h)}),l.dice?xM(l,n,r,i,v?r+=p*g/v:o):TM(l,n,r,v?n+=d*g/v:i,o),v-=g,u=h}return s}(function t(e){function n(r,i,o,s,a){OM(e,r,i,o,s,a)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(EM);function ol(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new tM(e)}function SM(t){return t.innerRadius}function MM(t){return t.outerRadius}function AM(t){return t.startAngle}function CM(t){return t.endAngle}function $M(t){return t&&t.padAngle}function kM(t,e,n,r,i,o,s,a){var l=n-t,c=r-e,u=s-i,h=a-o,f=h*l-u*c;if(!(f*f<Wt))return f=(u*(e-o)-h*(t-i))/f,[t+f*l,e+f*c]}function mi(t,e,n,r,i,o,s){var a=t-n,l=e-r,c=(s?o:-o)/Gn(a*a+l*l),u=c*l,h=-c*a,f=t+u,d=e+h,p=n+u,v=r+h,g=(f+p)/2,m=(d+v)/2,_=p-f,w=v-d,E=_*_+w*w,x=i-o,T=f*v-p*d,O=(w<0?-1:1)*Gn(AO(0,x*x*E-T*T)),M=(T*w-_*O)/E,P=(-T*_-w*O)/E,I=(T*w+_*O)/E,k=(-T*_+w*O)/E,W=M-g,L=P-m,H=I-g,at=k-m;return W*W+L*L>H*H+at*at&&(M=I,P=k),{cx:M,cy:P,x01:-u,y01:-h,x11:M*(i/x-1),y11:P*(i/x-1)}}function DM(){var t=SM,e=MM,n=dt(0),r=null,i=AM,o=CM,s=$M,a=null,l=ol(c);function c(){var u,h,f=+t.apply(this,arguments),d=+e.apply(this,arguments),p=i.apply(this,arguments)-oo,v=o.apply(this,arguments)-oo,g=su(v-p),m=v>p;if(a||(a=u=l()),d<f&&(h=d,d=f,f=h),!(d>Wt))a.moveTo(0,0);else if(g>CO-Wt)a.moveTo(d*fn(p),d*De(p)),a.arc(0,0,d,p,v,!m),f>Wt&&(a.moveTo(f*fn(v),f*De(v)),a.arc(0,0,f,v,p,m));else{var _=p,w=v,E=p,x=v,T=g,O=g,M=s.apply(this,arguments)/2,P=M>Wt&&(r?+r.apply(this,arguments):Gn(f*f+d*d)),I=ls(su(d-f)/2,+n.apply(this,arguments)),k=I,W=I,L,H;if(P>Wt){var at=au(P/f*De(M)),nt=au(P/d*De(M));(T-=at*2)>Wt?(at*=m?1:-1,E+=at,x-=at):(T=0,E=x=(p+v)/2),(O-=nt*2)>Wt?(nt*=m?1:-1,_+=nt,w-=nt):(O=0,_=w=(p+v)/2)}var G=d*fn(_),Q=d*De(_),X=f*fn(x),lt=f*De(x);if(I>Wt){var Y=d*fn(w),tt=d*De(w),ot=f*fn(E),Ot=f*De(E),q;if(g<Xr)if(q=kM(G,Q,ot,Ot,Y,tt,X,lt)){var B=G-q[0],z=Q-q[1],rt=Y-q[0],$=tt-q[1],U=1/De($O((B*rt+z*$)/(Gn(B*B+z*z)*Gn(rt*rt+$*$)))/2),Z=Gn(q[0]*q[0]+q[1]*q[1]);k=ls(I,(f-Z)/(U-1)),W=ls(I,(d-Z)/(U+1))}else k=W=0}O>Wt?W>Wt?(L=mi(ot,Ot,G,Q,d,W,m),H=mi(Y,tt,X,lt,d,W,m),a.moveTo(L.cx+L.x01,L.cy+L.y01),W<I?a.arc(L.cx,L.cy,W,Vt(L.y01,L.x01),Vt(H.y01,H.x01),!m):(a.arc(L.cx,L.cy,W,Vt(L.y01,L.x01),Vt(L.y11,L.x11),!m),a.arc(0,0,d,Vt(L.cy+L.y11,L.cx+L.x11),Vt(H.cy+H.y11,H.cx+H.x11),!m),a.arc(H.cx,H.cy,W,Vt(H.y11,H.x11),Vt(H.y01,H.x01),!m))):(a.moveTo(G,Q),a.arc(0,0,d,_,w,!m)):a.moveTo(G,Q),!(f>Wt)||!(T>Wt)?a.lineTo(X,lt):k>Wt?(L=mi(X,lt,Y,tt,f,-k,m),H=mi(G,Q,ot,Ot,f,-k,m),a.lineTo(L.cx+L.x01,L.cy+L.y01),k<I?a.arc(L.cx,L.cy,k,Vt(L.y01,L.x01),Vt(H.y01,H.x01),!m):(a.arc(L.cx,L.cy,k,Vt(L.y01,L.x01),Vt(L.y11,L.x11),!m),a.arc(0,0,f,Vt(L.cy+L.y11,L.cx+L.x11),Vt(H.cy+H.y11,H.cx+H.x11),m),a.arc(H.cx,H.cy,k,Vt(H.y11,H.x11),Vt(H.y01,H.x01),!m))):a.arc(0,0,f,x,E,m)}if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Xr/2;return[fn(h)*u,De(h)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:dt(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:dt(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:dt(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:dt(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:dt(+u),c):i},c.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:dt(+u),c):o},c.padAngle=function(u){return arguments.length?(s=typeof u=="function"?u:dt(+u),c):s},c.context=function(u){return arguments.length?(a=u??null,c):a},c}function Zf(t){return t[0]}function Xf(t){return t[1]}function sl(t,e){var n=dt(!0),r=null,i=nl,o=null,s=ol(a);t=typeof t=="function"?t:t===void 0?Zf:dt(t),e=typeof e=="function"?e:e===void 0?Xf:dt(e);function a(l){var c,u=(l=Xa(l)).length,h,f=!1,d;for(r==null&&(o=i(d=s())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(h,c,l),+e(h,c,l));if(d)return o=null,d+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:dt(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:dt(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:dt(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function al(t,e,n){var r=null,i=dt(!0),o=null,s=nl,a=null,l=ol(c);t=typeof t=="function"?t:t===void 0?Zf:dt(+t),e=typeof e=="function"?e:dt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Xf:dt(+n);function c(h){var f,d,p,v=(h=Xa(h)).length,g,m=!1,_,w=new Array(v),E=new Array(v);for(o==null&&(a=s(_=l())),f=0;f<=v;++f){if(!(f<v&&i(g=h[f],f,h))===m)if(m=!m)d=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=d;--p)a.point(w[p],E[p]);a.lineEnd(),a.areaEnd()}m&&(w[f]=+t(g,f,h),E[f]=+e(g,f,h),a.point(r?+r(g,f,h):w[f],n?+n(g,f,h):E[f]))}if(_)return a=null,_+""||null}function u(){return sl().defined(i).curve(s).context(o)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:dt(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:dt(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:dt(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:dt(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:dt(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:dt(+h),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:dt(!!h),c):i},c.curve=function(h){return arguments.length?(s=h,o!=null&&(a=s(o)),c):s},c.context=function(h){return arguments.length?(h==null?o=a=null:a=s(o=h),c):o},c}let Et=class{constructor(e,n,r){if(this.type="",this.renderType=ft.HTML,this.id="",this.parent=void 0,this.configs={},this.model=e,this.services=n,r&&(this.configs=r,this.configs.id)){const i=y(this.model.getOptions(),"style","prefix");this.id=`${i}--${this.configs.id}`}this.parent||this.setParent(D(this.services.domUtils.getMainContainer()))}init(){}render(e=!0){console.error("Error: Component did not provide the required render function.")}destroy(){}setModel(e){this.model=e}setServices(e){this.services=e}setParent(e){var n;const r=this.parent;if(this.parent=e,!(r&&r.node()===e.node())&&this.type){const i=y(this.model.getOptions(),"style","prefix");(n=this.parent)==null||n.classed(`${ne}--${i}--${this.type}`,!0),r&&r.classed(`${ne}--${i}--${this.type}`,!1)}}getParent(){return this.parent}getComponentContainer(e={withinChartClip:!1}){if(this.type){const n=y(this.model.getOptions(),"style","prefix"),r=this.id?`#${this.id}`:"",i=R.appendOrSelect(this.parent,`${this.renderType===ft.SVG?"svg":"div"}${r}.${ne}--${n}--${this.type}`);if(e.withinChartClip){const o=this.model.get("chartClipId");if(o){const s=D(`#${o}`).select("rect");s.size()!==0&&parseFloat(s.attr("height"))>0&&i.attr("clip-path",`url(#${o})`)}}return i.attr("width","100%").attr("height","100%")}return this.parent}getOptions(){return this.configs.options?J({},this.model.getOptions(),this.configs.options):this.model.getOptions()}};/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:qf,setPrototypeOf:Su,isFrozen:LM,getPrototypeOf:RM,getOwnPropertyDescriptor:IM}=Object;let{freeze:te,seal:ve,create:Kf}=Object,{apply:Xs,construct:qs}=typeof Reflect<"u"&&Reflect;te||(te=function(t){return t});ve||(ve=function(t){return t});Xs||(Xs=function(t,e,n){return t.apply(e,n)});qs||(qs=function(t,e){return new t(...e)});const vi=he(Array.prototype.forEach),Mu=he(Array.prototype.pop),xr=he(Array.prototype.push),Ai=he(String.prototype.toLowerCase),gs=he(String.prototype.toString),Au=he(String.prototype.match),Tr=he(String.prototype.replace),PM=he(String.prototype.indexOf),NM=he(String.prototype.trim),be=he(Object.prototype.hasOwnProperty),Qt=he(RegExp.prototype.test),Er=BM(TypeError);function he(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Xs(t,e,r)}}function BM(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return qs(t,n)}}function it(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ai;Su&&Su(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const o=n(i);o!==i&&(LM(e)||(e[r]=o),i=o)}t[i]=!0}return t}function UM(t){for(let e=0;e<t.length;e++)be(t,e)||(t[e]=null);return t}function mn(t){const e=Kf(null);for(const[n,r]of qf(t))be(t,n)&&(Array.isArray(r)?e[n]=UM(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=mn(r):e[n]=r);return e}function Or(t,e){for(;t!==null;){const r=IM(t,e);if(r){if(r.get)return he(r.get);if(typeof r.value=="function")return he(r.value)}t=RM(t)}function n(){return null}return n}const Cu=te(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ms=te(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),vs=te(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),HM=te(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ys=te(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),FM=te(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$u=te(["#text"]),ku=te(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),bs=te(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Du=te(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),yi=te(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),VM=ve(/\{\{[\w\W]*|[\w\W]*\}\}/gm),jM=ve(/<%[\w\W]*|[\w\W]*%>/gm),GM=ve(/\${[\w\W]*}/gm),zM=ve(/^data-[\-\w.\u00B7-\uFFFF]/),WM=ve(/^aria-[\-\w]+$/),Qf=ve(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),YM=ve(/^(?:\w+script|data):/i),ZM=ve(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Jf=ve(/^html$/i),XM=ve(/^[a-z][.\w]*(-[.\w]+)+$/i);var Lu=Object.freeze({__proto__:null,MUSTACHE_EXPR:VM,ERB_EXPR:jM,TMPLIT_EXPR:GM,DATA_ATTR:zM,ARIA_ATTR:WM,IS_ALLOWED_URI:Qf,IS_SCRIPT_OR_DATA:YM,ATTR_WHITESPACE:ZM,DOCTYPE_NAME:Jf,CUSTOM_ELEMENT:XM});const Sr={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},qM=function(){return typeof window>"u"?null:window},KM=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function tp(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qM();const e=b=>tp(b);if(e.version="3.1.6",e.removed=[],!t||!t.document||t.document.nodeType!==Sr.document)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:d}=t,p=l.prototype,v=Or(p,"cloneNode"),g=Or(p,"remove"),m=Or(p,"nextSibling"),_=Or(p,"childNodes"),w=Or(p,"parentNode");if(typeof s=="function"){const b=n.createElement("template");b.content&&b.content.ownerDocument&&(n=b.content.ownerDocument)}let E,x="";const{implementation:T,createNodeIterator:O,createDocumentFragment:M,getElementsByTagName:P}=n,{importNode:I}=r;let k={};e.isSupported=typeof qf=="function"&&typeof w=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:W,ERB_EXPR:L,TMPLIT_EXPR:H,DATA_ATTR:at,ARIA_ATTR:nt,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:Q,CUSTOM_ELEMENT:X}=Lu;let{IS_ALLOWED_URI:lt}=Lu,Y=null;const tt=it({},[...Cu,...ms,...vs,...ys,...$u]);let ot=null;const Ot=it({},[...ku,...bs,...Du,...yi]);let q=Object.seal(Kf(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),B=null,z=null,rt=!0,$=!0,U=!1,Z=!0,C=!1,ht=!0,K=!1,St=!1,Tt=!1,V=!1,st=!1,Xt=!1,qt=!0,Ae=!1;const At="user-content-";let Ht=!0,oe=!1,ee={},Be=null;const cn=it({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let hr=null;const un=it({},["audio","video","img","source","image","track"]);let kn=null;const Ue=it({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ye="http://www.w3.org/1998/Math/MathML",hn="http://www.w3.org/2000/svg",Ft="http://www.w3.org/1999/xhtml";let Ce=Ft,$e=!1,Dn=null;const Np=it({},[ye,hn,Ft],gs);let dr=null;const Bp=["application/xhtml+xml","text/html"],Up="text/html";let Lt=null,Ln=null;const Hp=n.createElement("form"),bl=function(b){return b instanceof RegExp||b instanceof Function},Go=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ln&&Ln===b)){if((!b||typeof b!="object")&&(b={}),b=mn(b),dr=Bp.indexOf(b.PARSER_MEDIA_TYPE)===-1?Up:b.PARSER_MEDIA_TYPE,Lt=dr==="application/xhtml+xml"?gs:Ai,Y=be(b,"ALLOWED_TAGS")?it({},b.ALLOWED_TAGS,Lt):tt,ot=be(b,"ALLOWED_ATTR")?it({},b.ALLOWED_ATTR,Lt):Ot,Dn=be(b,"ALLOWED_NAMESPACES")?it({},b.ALLOWED_NAMESPACES,gs):Np,kn=be(b,"ADD_URI_SAFE_ATTR")?it(mn(Ue),b.ADD_URI_SAFE_ATTR,Lt):Ue,hr=be(b,"ADD_DATA_URI_TAGS")?it(mn(un),b.ADD_DATA_URI_TAGS,Lt):un,Be=be(b,"FORBID_CONTENTS")?it({},b.FORBID_CONTENTS,Lt):cn,B=be(b,"FORBID_TAGS")?it({},b.FORBID_TAGS,Lt):{},z=be(b,"FORBID_ATTR")?it({},b.FORBID_ATTR,Lt):{},ee=be(b,"USE_PROFILES")?b.USE_PROFILES:!1,rt=b.ALLOW_ARIA_ATTR!==!1,$=b.ALLOW_DATA_ATTR!==!1,U=b.ALLOW_UNKNOWN_PROTOCOLS||!1,Z=b.ALLOW_SELF_CLOSE_IN_ATTR!==!1,C=b.SAFE_FOR_TEMPLATES||!1,ht=b.SAFE_FOR_XML!==!1,K=b.WHOLE_DOCUMENT||!1,V=b.RETURN_DOM||!1,st=b.RETURN_DOM_FRAGMENT||!1,Xt=b.RETURN_TRUSTED_TYPE||!1,Tt=b.FORCE_BODY||!1,qt=b.SANITIZE_DOM!==!1,Ae=b.SANITIZE_NAMED_PROPS||!1,Ht=b.KEEP_CONTENT!==!1,oe=b.IN_PLACE||!1,lt=b.ALLOWED_URI_REGEXP||Qf,Ce=b.NAMESPACE||Ft,q=b.CUSTOM_ELEMENT_HANDLING||{},b.CUSTOM_ELEMENT_HANDLING&&bl(b.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=b.CUSTOM_ELEMENT_HANDLING.tagNameCheck),b.CUSTOM_ELEMENT_HANDLING&&bl(b.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=b.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),b.CUSTOM_ELEMENT_HANDLING&&typeof b.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=b.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),C&&($=!1),st&&(V=!0),ee&&(Y=it({},$u),ot=[],ee.html===!0&&(it(Y,Cu),it(ot,ku)),ee.svg===!0&&(it(Y,ms),it(ot,bs),it(ot,yi)),ee.svgFilters===!0&&(it(Y,vs),it(ot,bs),it(ot,yi)),ee.mathMl===!0&&(it(Y,ys),it(ot,Du),it(ot,yi))),b.ADD_TAGS&&(Y===tt&&(Y=mn(Y)),it(Y,b.ADD_TAGS,Lt)),b.ADD_ATTR&&(ot===Ot&&(ot=mn(ot)),it(ot,b.ADD_ATTR,Lt)),b.ADD_URI_SAFE_ATTR&&it(kn,b.ADD_URI_SAFE_ATTR,Lt),b.FORBID_CONTENTS&&(Be===cn&&(Be=mn(Be)),it(Be,b.FORBID_CONTENTS,Lt)),Ht&&(Y["#text"]=!0),K&&it(Y,["html","head","body"]),Y.table&&(it(Y,["tbody"]),delete B.tbody),b.TRUSTED_TYPES_POLICY){if(typeof b.TRUSTED_TYPES_POLICY.createHTML!="function")throw Er('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof b.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Er('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=b.TRUSTED_TYPES_POLICY,x=E.createHTML("")}else E===void 0&&(E=KM(d,i)),E!==null&&typeof x=="string"&&(x=E.createHTML(""));te&&te(b),Ln=b}},_l=it({},["mi","mo","mn","ms","mtext"]),wl=it({},["foreignobject","annotation-xml"]),Fp=it({},["title","style","font","a","script"]),xl=it({},[...ms,...vs,...HM]),Tl=it({},[...ys,...FM]),Vp=function(b){let F=w(b);(!F||!F.tagName)&&(F={namespaceURI:Ce,tagName:"template"});const N=Ai(b.tagName),pt=Ai(F.tagName);return Dn[b.namespaceURI]?b.namespaceURI===hn?F.namespaceURI===Ft?N==="svg":F.namespaceURI===ye?N==="svg"&&(pt==="annotation-xml"||_l[pt]):!!xl[N]:b.namespaceURI===ye?F.namespaceURI===Ft?N==="math":F.namespaceURI===hn?N==="math"&&wl[pt]:!!Tl[N]:b.namespaceURI===Ft?F.namespaceURI===hn&&!wl[pt]||F.namespaceURI===ye&&!_l[pt]?!1:!Tl[N]&&(Fp[N]||!xl[N]):!!(dr==="application/xhtml+xml"&&Dn[b.namespaceURI]):!1},dn=function(b){xr(e.removed,{element:b});try{w(b).removeChild(b)}catch{g(b)}},si=function(b,F){try{xr(e.removed,{attribute:F.getAttributeNode(b),from:F})}catch{xr(e.removed,{attribute:null,from:F})}if(F.removeAttribute(b),b==="is"&&!ot[b])if(V||st)try{dn(F)}catch{}else try{F.setAttribute(b,"")}catch{}},El=function(b){let F=null,N=null;if(Tt)b="<remove></remove>"+b;else{const Ct=Au(b,/^[\r\n\t ]+/);N=Ct&&Ct[0]}dr==="application/xhtml+xml"&&Ce===Ft&&(b='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+b+"</body></html>");const pt=E?E.createHTML(b):b;if(Ce===Ft)try{F=new f().parseFromString(pt,dr)}catch{}if(!F||!F.documentElement){F=T.createDocument(Ce,"template",null);try{F.documentElement.innerHTML=$e?x:pt}catch{}}const Nt=F.body||F.documentElement;return b&&N&&Nt.insertBefore(n.createTextNode(N),Nt.childNodes[0]||null),Ce===Ft?P.call(F,K?"html":"body")[0]:K?F.documentElement:Nt},Ol=function(b){return O.call(b.ownerDocument||b,b,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Sl=function(b){return b instanceof h&&(typeof b.nodeName!="string"||typeof b.textContent!="string"||typeof b.removeChild!="function"||!(b.attributes instanceof u)||typeof b.removeAttribute!="function"||typeof b.setAttribute!="function"||typeof b.namespaceURI!="string"||typeof b.insertBefore!="function"||typeof b.hasChildNodes!="function")},Ml=function(b){return typeof a=="function"&&b instanceof a},He=function(b,F,N){k[b]&&vi(k[b],pt=>{pt.call(e,F,N,Ln)})},Al=function(b){let F=null;if(He("beforeSanitizeElements",b,null),Sl(b))return dn(b),!0;const N=Lt(b.nodeName);if(He("uponSanitizeElement",b,{tagName:N,allowedTags:Y}),b.hasChildNodes()&&!Ml(b.firstElementChild)&&Qt(/<[/\w]/g,b.innerHTML)&&Qt(/<[/\w]/g,b.textContent)||b.nodeType===Sr.progressingInstruction||ht&&b.nodeType===Sr.comment&&Qt(/<[/\w]/g,b.data))return dn(b),!0;if(!Y[N]||B[N]){if(!B[N]&&$l(N)&&(q.tagNameCheck instanceof RegExp&&Qt(q.tagNameCheck,N)||q.tagNameCheck instanceof Function&&q.tagNameCheck(N)))return!1;if(Ht&&!Be[N]){const pt=w(b)||b.parentNode,Nt=_(b)||b.childNodes;if(Nt&&pt){const Ct=Nt.length;for(let Fe=Ct-1;Fe>=0;--Fe){const de=v(Nt[Fe],!0);de.__removalCount=(b.__removalCount||0)+1,pt.insertBefore(de,m(b))}}}return dn(b),!0}return b instanceof l&&!Vp(b)||(N==="noscript"||N==="noembed"||N==="noframes")&&Qt(/<\/no(script|embed|frames)/i,b.innerHTML)?(dn(b),!0):(C&&b.nodeType===Sr.text&&(F=b.textContent,vi([W,L,H],pt=>{F=Tr(F,pt," ")}),b.textContent!==F&&(xr(e.removed,{element:b.cloneNode()}),b.textContent=F)),He("afterSanitizeElements",b,null),!1)},Cl=function(b,F,N){if(qt&&(F==="id"||F==="name")&&(N in n||N in Hp))return!1;if(!($&&!z[F]&&Qt(at,F))&&!(rt&&Qt(nt,F))){if(!ot[F]||z[F]){if(!($l(b)&&(q.tagNameCheck instanceof RegExp&&Qt(q.tagNameCheck,b)||q.tagNameCheck instanceof Function&&q.tagNameCheck(b))&&(q.attributeNameCheck instanceof RegExp&&Qt(q.attributeNameCheck,F)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(F))||F==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&Qt(q.tagNameCheck,N)||q.tagNameCheck instanceof Function&&q.tagNameCheck(N))))return!1}else if(!kn[F]&&!Qt(lt,Tr(N,Q,""))&&!((F==="src"||F==="xlink:href"||F==="href")&&b!=="script"&&PM(N,"data:")===0&&hr[b])&&!(U&&!Qt(G,Tr(N,Q,"")))&&N)return!1}return!0},$l=function(b){return b!=="annotation-xml"&&Au(b,X)},kl=function(b){He("beforeSanitizeAttributes",b,null);const{attributes:F}=b;if(!F)return;const N={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ot};let pt=F.length;for(;pt--;){const Nt=F[pt],{name:Ct,namespaceURI:Fe,value:de}=Nt,ke=Lt(Ct);let Kt=Ct==="value"?de:NM(de);if(N.attrName=ke,N.attrValue=Kt,N.keepAttr=!0,N.forceKeepAttr=void 0,He("uponSanitizeAttribute",b,N),Kt=N.attrValue,ht&&Qt(/((--!?|])>)|<\/(style|title)/i,Kt)){si(Ct,b);continue}if(N.forceKeepAttr||(si(Ct,b),!N.keepAttr))continue;if(!Z&&Qt(/\/>/i,Kt)){si(Ct,b);continue}C&&vi([W,L,H],Gp=>{Kt=Tr(Kt,Gp," ")});const Dl=Lt(b.nodeName);if(Cl(Dl,ke,Kt)){if(Ae&&(ke==="id"||ke==="name")&&(si(Ct,b),Kt=At+Kt),E&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!Fe)switch(d.getAttributeType(Dl,ke)){case"TrustedHTML":{Kt=E.createHTML(Kt);break}case"TrustedScriptURL":{Kt=E.createScriptURL(Kt);break}}try{Fe?b.setAttributeNS(Fe,Ct,Kt):b.setAttribute(Ct,Kt),Sl(b)?dn(b):Mu(e.removed)}catch{}}}He("afterSanitizeAttributes",b,null)},jp=function b(F){let N=null;const pt=Ol(F);for(He("beforeSanitizeShadowDOM",F,null);N=pt.nextNode();)He("uponSanitizeShadowNode",N,null),!Al(N)&&(N.content instanceof o&&b(N.content),kl(N));He("afterSanitizeShadowDOM",F,null)};return e.sanitize=function(b){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=null,pt=null,Nt=null,Ct=null;if($e=!b,$e&&(b="<!-->"),typeof b!="string"&&!Ml(b))if(typeof b.toString=="function"){if(b=b.toString(),typeof b!="string")throw Er("dirty is not a string, aborting")}else throw Er("toString is not a function");if(!e.isSupported)return b;if(St||Go(F),e.removed=[],typeof b=="string"&&(oe=!1),oe){if(b.nodeName){const ke=Lt(b.nodeName);if(!Y[ke]||B[ke])throw Er("root node is forbidden and cannot be sanitized in-place")}}else if(b instanceof a)N=El("<!---->"),pt=N.ownerDocument.importNode(b,!0),pt.nodeType===Sr.element&&pt.nodeName==="BODY"||pt.nodeName==="HTML"?N=pt:N.appendChild(pt);else{if(!V&&!C&&!K&&b.indexOf("<")===-1)return E&&Xt?E.createHTML(b):b;if(N=El(b),!N)return V?null:Xt?x:""}N&&Tt&&dn(N.firstChild);const Fe=Ol(oe?b:N);for(;Nt=Fe.nextNode();)Al(Nt)||(Nt.content instanceof o&&jp(Nt.content),kl(Nt));if(oe)return b;if(V){if(st)for(Ct=M.call(N.ownerDocument);N.firstChild;)Ct.appendChild(N.firstChild);else Ct=N;return(ot.shadowroot||ot.shadowrootmode)&&(Ct=I.call(r,Ct,!0)),Ct}let de=K?N.outerHTML:N.innerHTML;return K&&Y["!doctype"]&&N.ownerDocument&&N.ownerDocument.doctype&&N.ownerDocument.doctype.name&&Qt(Jf,N.ownerDocument.doctype.name)&&(de="<!DOCTYPE "+N.ownerDocument.doctype.name+`>
`+de),C&&vi([W,L,H],ke=>{de=Tr(de,ke," ")}),E&&Xt?E.createHTML(de):de},e.setConfig=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Go(b),St=!0},e.clearConfig=function(){Ln=null,St=!1},e.isValidAttribute=function(b,F,N){Ln||Go({});const pt=Lt(b),Nt=Lt(F);return Cl(pt,Nt,N)},e.addHook=function(b,F){typeof F=="function"&&(k[b]=k[b]||[],xr(k[b],F))},e.removeHook=function(b){if(k[b])return Mu(k[b])},e.removeHooks=function(b){k[b]&&(k[b]=[])},e.removeAllHooks=function(){k={}},e}var ll=tp();const bi=t=>ll.sanitize(t,{USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),QM=t=>ll.sanitize(t,{NAMESPACE:"http://www.w3.org/2000/svg",USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),Ie=t=>ll.sanitize(t,{ALLOWED_TAGS:[]}),ep=class np extends Et{constructor(){super(...arguments),this.type="toolbar",this.renderType=ft.HTML}init(){const e=()=>this.updateOverflowMenu(!1);this.services.events.addEventListener(S.Toolbar.SHOW_OVERFLOW_MENU,()=>{this.renderOverflowMenu(),document.body.addEventListener("click",e)}),this.services.events.addEventListener(S.Toolbar.HIDE_OVERFLOW_MENU,()=>{document.body.removeEventListener("click",e)})}render(e=!0){const n=this.getComponentContainer().attr("role","toolbar");if(y(this.getOptions(),"data","loading"))n.html(""),this.overflowMenu=null;else{this.overflowMenu||(this.overflowMenu=n.append("div").attr("class","cds--overflow-menu-options cds--overflow-menu--flip cds--overflow-menu-options cds--overflow-menu--flip").attr("tabindex",-1).html("<ul role='menu'></ul>"));const{buttonList:r,overflowMenuItemList:i}=this.getControlConfigs();i&&r.push(this.getOverflowButtonConfig());const o=n.selectAll("div.toolbar-control").data(r,l=>l.id);o.exit().remove();const s=o.enter().append("div").attr("class","toolbar-control cds--overflow-menu cds--overflow-menu"),a=this;s.merge(o).classed("disabled",l=>l.shouldBeDisabled()).attr("role","button").attr("aria-disabled",l=>l.shouldBeDisabled()).attr("aria-label",l=>l.title).html(l=>`
			<button
				class="cds--overflow-menu__trigger cds--overflow-menu__trigger"
				aria-haspopup="true" aria-expanded="false" id="${this.services.domUtils.generateElementIDString(`control-${Ie(l.id)}`)}" aria-label="${Ie(l.title)}">
				<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" class="cds--overflow-menu__icon cds--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">
					${QM(l.iconSVG.content)}
				</svg>
			</button>`).each(function(l,c){D(this).select("svg").style("pointer-events","none").style("will-change","transform").style("width",l.iconSVG.width!==void 0?l.iconSVG.width:"20px").style("height",l.iconSVG.height!==void 0?l.iconSVG.height:"20px"),D(this).select("button").on("mouseover focus",function(u){const h=D(this);h.classed("hovered",!0),a.services.events.dispatchEvent(S.Toolbar.SHOW_TOOLTIP,{event:u,hoveredElement:h,content:l.title,noWrap:!0,placements:["top","bottom"]})}).on("mouseout blur",function(){a.services.events.dispatchEvent(S.Toolbar.HIDE_TOOLTIP)}).on("click",u=>{l.shouldBeDisabled()||a.triggerFunctionAndEvent(l,u,this)}).on("keydown",u=>{u.key&&u.key==="Enter"||u.key===" "?(u.preventDefault(),a.triggerFunctionAndEvent(l,u,this)):u.key&&u.key==="ArrowLeft"?a.focusOnPreviousEnabledToolbarItem(c):u.key&&u.key==="ArrowRight"&&a.focusOnNextEnabledToolbarItem(c)})}),this.overflowButton=this.getComponentContainer().select(`button.cds--overflow-menu__trigger#${this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu")}`)}}renderOverflowMenu(){const{overflowMenuItemList:e}=this.getControlConfigs(),n=this.overflowMenu.select("ul").selectAll("li.cds--overflow-menu-options__option").data(e,i=>y(i,"id"));n.exit().remove();const r=n.enter().append("li").attr("id",i=>this.services.domUtils.generateElementIDString(`control-${i.id}`)).attr("class","cds--overflow-menu-options__option cds--overflow-menu-options__option").attr("role","menuitem").attr("tabindex",1);r.append("button").attr("class","cds--overflow-menu-options__btn cds--overflow-menu-options__btn"),r.merge(n).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).attr("aria-disabled",i=>i.shouldBeDisabled()).selectAll("button").text(i=>i.title)}isOverflowMenuOpen(){return this.overflowMenu.classed("is-open")}updateOverflowMenu(e){this.overflowMenu&&(this.overflowMenu.classed("is-open",e),this.overflowButton&&(this.overflowButton.attr("aria-expanded",e),D(this.overflowButton.node().parentNode).classed("cds--overflow-menu--open",e).classed("cds--overflow-menu--open",e)),e?this.services.events.dispatchEvent(S.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent(S.Toolbar.HIDE_OVERFLOW_MENU))}focusOnPreviousEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=D(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnNextEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=D(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnPreviousEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=D(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}focusOnNextEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=D(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}toggleOverflowMenu(e){if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);const n=this;this.getOverflowMenuItems().forEach((r,i)=>{const o=D(`#${this.services.domUtils.generateElementIDString(`control-${r.id}`)}`);o!==null&&(o.on("click",()=>{n.triggerFunctionAndEvent(r,e,o.node()),n.updateOverflowMenu(!1)}),o.on("keydown",s=>{s&&s.key==="Enter"?n.triggerFunctionAndEvent(r,e,o.node()):s&&s.key==="ArrowUp"?n.focusOnPreviousEnabledMenuItem(i):s&&s.key==="ArrowDown"?n.focusOnNextEnabledMenuItem(i):s&&s.key==="Escape"&&n.updateOverflowMenu(!1),s.preventDefault()}))}),n.focusOnNextEnabledMenuItem(-1)}e&&e.stopImmediatePropagation()}triggerFunctionAndEvent(e,n,r){typeof e.shouldBeDisabled=="function"&&e.shouldBeDisabled()||(typeof e.clickFunction=="function"&&e.clickFunction(n),this.services.events.dispatchEvent(S.Toolbar.BUTTON_CLICK,{control:e,event:n,element:r}))}getControlConfigs(){const e=y(this.getOptions(),"toolbar","numberOfIcons")-1,n=y(this.getOptions(),"toolbar","controls"),r=[],i=[],o=[];return n.forEach(s=>{let a=null;if(s.type===gt.CUSTOM)y(s,"id")===null&&(s.id=`toolbar-button-${np.buttonID++}`),y(s,"shouldBeDisabled")===null&&(s.shouldBeDisabled=()=>!1),a=s;else{const l=this.services.domUtils.isFullScreenMode();s.type===gt.MAKE_FULLSCREEN&&l?s.type=gt.EXIT_FULLSCREEN:s.type===gt.EXIT_FULLSCREEN&&!l&&(s.type=gt.MAKE_FULLSCREEN),a=this.getControlConfigByType(s.type)}a&&(a.text=s.text?s.text:s.type,a.id.indexOf("toolbar-export")!==-1?r.push(a):i.length<e?y(a,"iconSVG","content")===null?o.push(a):i.push(a):o.push(a))}),o.push(...r),o.length?{buttonList:i,overflowMenuItemList:o}:{buttonList:i}}getToolbarButtonItems(){const{buttonList:e,overflowMenuItemList:n}=this.getControlConfigs();return n&&e.push(this.getOverflowButtonConfig()),e||[]}getOverflowMenuItems(){const{overflowMenuItemList:e}=this.getControlConfigs();return e||[]}getOverflowButtonConfig(){const{moreOptions:e}=y(this.model.getOptions(),"locale","translations","toolbar");return{id:"toolbar-overflow-menu",title:e,shouldBeDisabled:()=>!1,iconSVG:{content:`<circle cx="16" cy="8" r="2"></circle>
				<circle cx="16" cy="16" r="2"></circle>
				<circle cx="16" cy="24" r="2"></circle>`},clickFunction:n=>this.toggleOverflowMenu(n)}}getControlConfigByType(e){const n=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),r=this.model.getDisplayData(),i=this.model.getOptions(),{exportAsCSV:o,exportAsJPG:s,exportAsPNG:a,zoomIn:l,zoomOut:c,resetZoom:u,makeFullScreen:h,exitFullScreen:f,showAsTable:d}=y(i,"locale","translations","toolbar");let p;switch(e){case gt.ZOOM_IN:n&&(p={id:"toolbar-zoomIn",title:l,shouldBeDisabled:()=>this.services.zoom.isMinZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomIn()});break;case gt.ZOOM_OUT:n&&(p={id:"toolbar-zoomOut",title:c,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomOut()});break;case gt.RESET_ZOOM:n&&(p={id:"toolbar-resetZoom",title:u,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.resetZoomDomain()});break;case gt.MAKE_FULLSCREEN:p={id:"toolbar-makefullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:h,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case gt.EXIT_FULLSCREEN:p={id:"toolbar-exitfullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:f,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case gt.SHOW_AS_DATATABLE:p={id:"toolbar-showasdatatable",iconSVG:{content:this.getControlIconByType(e)},title:d,shouldBeDisabled:()=>r.length===0,clickFunction:()=>this.services.events.dispatchEvent(S.Modal.SHOW)};break;case gt.EXPORT_CSV:p={id:"toolbar-export-CSV",title:o,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.model.exportToCSV()};break;case gt.EXPORT_PNG:p={id:"toolbar-export-PNG",title:a,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToPNG()};break;case gt.EXPORT_JPG:p={id:"toolbar-export-JPG",title:s,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToJPG()};break;default:throw Error("Not supported toolbar control type: "+e)}return p}getControlIconByType(e){switch(e){case gt.ZOOM_IN:return`<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case gt.ZOOM_OUT:return`<rect x="9" y="13" width="10" height="2"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case gt.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case gt.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case gt.EXIT_FULLSCREEN:return'<polygon points="4 18 4 20 10.586 20 2 28.582 3.414 30 12 21.414 12 28 14 28 14 18 4 18"/><polygon points="30 3.416 28.592 2 20 10.586 20 4 18 4 18 14 28 14 28 12 21.414 12 30 3.416"/>';case gt.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case gt.EXPORT_CSV:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case gt.EXPORT_JPG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case gt.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+e)}}};ep.buttonID=0;let rp=ep;const ip=class op extends Et{constructor(e,n,r,i){super(e,n,i),this.type="layout",this.configs=i,this.children=r,this._instanceID=op.instanceID++,this.init()}init(){this.children.forEach(e=>{e.components.forEach(n=>{n.init()})})}getPreferedAndFixedSizeSum(){const e=this.parent;let n=0;return e.selectAll(`div.layout-child-${this._instanceID}`).filter(r=>{const i=y(r,"growth");return i===yt.PREFERRED||i===yt.FIXED}).each(function(r){n+=r.size}),n}getNumOfStretchChildren(){return this.parent.selectAll(`div.layout-child-${this._instanceID}`).filter(e=>y(e,"growth")===yt.STRETCH).size()}render(e=!0){const n=this.parent,{width:r,height:i}=R.getHTMLElementSize(n.node()),o=this.configs.direction===kt.ROW||this.configs.direction===kt.ROW_REVERSE,s=y(this.model.getOptions(),"style","prefix"),a=n.classed(`${ne}--${s}--layout-row`,this.configs.direction===kt.ROW).classed(`${ne}--${s}--layout-row-reverse`,this.configs.direction===kt.ROW_REVERSE).classed(`${ne}--${s}--layout-column`,this.configs.direction===kt.COLUMN).classed(`${ne}--${s}--layout-column-reverse`,this.configs.direction===kt.COLUMN_REVERSE).classed(`${ne}--${s}--layout-alignitems-center`,this.configs.alignItems===xo.CENTER).selectAll(`div.layout-child-${this._instanceID}`).data(this.children,c=>c.id);a.enter().append("div").merge(n.selectAll(`div.layout-child-${this._instanceID}`)).attr("class",c=>`layout-child layout-child-${this._instanceID} ${c.id}`).each(function(c){c.components.forEach(u=>{const h=D(this),f=y(c,"renderType")===ft.SVG;u.setParent(f?R.appendOrSelect(h,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):h);const d=y(c,"growth");(d===yt.PREFERRED||d===yt.FIXED)&&u.render(e)})}),n.selectAll(`div.layout-child-${this._instanceID}`).style("height",null).style("width",null).each(function(c){const u=y(c,"growth"),h=y(c,"renderType")===ft.SVG?R.getSVGElementSize(D(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):R.getHTMLElementSize(this);if(u===yt.PREFERRED){const f=o?h.width:h.height,d=o?r:i;c.size=f/d*100}}),a.exit().remove(),this.children.filter(c=>y(c,"growth")===yt.STRETCH).forEach(c=>{c.size=(100-+this.getPreferedAndFixedSizeSum())/+this.getNumOfStretchChildren()});const l=n.selectAll(`div.layout-child-${this._instanceID}`).data(this.children,c=>c.id);o?l.style("width",c=>`${c.size/100*r}px`).style("height","100%"):l.style("height",c=>`${c.size/100*i}px`).style("width","100%"),l.each(function(c){c.components.forEach(u=>{y(c,"growth")===yt.STRETCH&&u.render(e)})})}setModel(e){super.setModel(e),this.children.forEach(n=>{n.components.forEach(r=>r.setModel(e))})}setServices(e){super.setServices(e),this.children.forEach(n=>{n.components.forEach(r=>r.setServices(e))})}destroy(){this.children.forEach(e=>{e.components.forEach(n=>n.destroy())})}};ip.instanceID=Math.floor(Math.random()*99999999999);let Kn=ip;class co extends Et{constructor(){super(...arguments),this.type="spacer"}render(e=!1){this.getComponentContainer().style("width",`${this.configs.size||Pc.default.size}px`).style("height",`${this.configs.size||Pc.default.size}px`).attr("opacity",0)}}var JM={prefix:"bx",selectorTabbable:`
    a[href], area[href], input:not([disabled]):not([tabindex='-1']),
    button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),
    textarea:not([disabled]):not([tabindex='-1']),
    iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]
  `,selectorFocusable:`
    a[href], area[href], input:not([disabled]),
    button:not([disabled]),select:not([disabled]),
    textarea:not([disabled]),
    iframe, object, embed, *[tabindex], *[contenteditable=true]
  `},_s=JM;function tA(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}function eA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nA(t){return sA(t)||oA(t)||iA(t)||rA()}function rA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iA(t,e){if(t){if(typeof t=="string")return Ks(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ks(t,e)}}function oA(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sA(t){if(Array.isArray(t))return Ks(t)}function Ks(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sp(t){return t.reduce(function(e,n){return Array.isArray(n)?e.push.apply(e,nA(sp(n))):e.push(n),e},[])}function aA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return sp(e).reduce(function(r,i){return i(r)},function(){function r(){eA(this,r)}return tA(r)}())}function Qs(t){"@babel/helpers - typeof";return Qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qs(t)}function lA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ru(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cA(t,e,n){return e&&Ru(t.prototype,e),n&&Ru(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function uA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Js(t,e)}function Js(t,e){return Js=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Js(t,e)}function hA(t){var e=fA();return function(){var n=uo(t),r;if(e){var i=uo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return dA(this,r)}}function dA(t,e){if(e&&(Qs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ap(t)}function ap(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uo(t){return uo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},uo(t)}function pA(t){var e=function(n){uA(i,n);var r=hA(i);function i(o){var s,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(lA(this,i),s=r.call(this,o,a),s.children=[],!o||o.nodeType!==Node.ELEMENT_NODE)throw new TypeError("DOM element should be given to initialize this widget.");return s.element=o,s.options=Object.assign(Object.create(s.constructor.options),a),s.constructor.components.set(s.element,ap(s)),s}return cA(i,[{key:"release",value:function(){for(var o=this.children.pop();o;o=this.children.pop())o.release();return this.constructor.components.delete(this.element),null}}],[{key:"create",value:function(o,s){return this.components.get(o)||new this(o,s)}}]),i}(t);return e}function ta(t){"@babel/helpers - typeof";return ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ta(t)}function gA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vA(t,e,n){return e&&mA(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ci(){return typeof Reflect<"u"&&Reflect.get?Ci=Reflect.get:Ci=function(t,e,n){var r=yA(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Ci.apply(this,arguments)}function yA(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=lr(t),t!==null););return t}function bA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ea(t,e)}function ea(t,e){return ea=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ea(t,e)}function _A(t){var e=TA();return function(){var n=lr(t),r;if(e){var i=lr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return wA(this,r)}}function wA(t,e){if(e&&(ta(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xA(t)}function xA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lr(t){return lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lr(t)}function EA(t){var e=function(n){bA(i,n);var r=_A(i);function i(){var o;gA(this,i);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return o=r.call.apply(r,[this].concat(a)),o.handles=new Set,o}return vA(i,[{key:"manage",value:function(o){return this.handles.add(o),o}},{key:"unmanage",value:function(o){return this.handles.delete(o),o}},{key:"release",value:function(){var o=this;return this.handles.forEach(function(s){s.release(),o.handles.delete(s)}),Ci(lr(i.prototype),"release",this).call(this)}}]),i}(t);return e}function kr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.addEventListener.apply(t,n),{release:function(){return t.removeEventListener.apply(t,n),null}}}function na(t){"@babel/helpers - typeof";return na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na(t)}function OA(t){return CA(t)||AA(t)||MA(t)||SA()}function SA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MA(t,e){if(t){if(typeof t=="string")return ra(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ra(t,e)}}function AA(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CA(t){if(Array.isArray(t))return ra(t)}function ra(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function DA(t,e,n){return e&&kA(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function LA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ia(t,e)}function ia(t,e){return ia=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ia(t,e)}function RA(t){var e=NA();return function(){var n=ho(t),r;if(e){var i=ho(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return IA(this,r)}}function IA(t,e){if(e&&(na(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PA(t)}function PA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ho(t){return ho=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ho(t)}function BA(t){var e=function(n){LA(i,n);var r=RA(i);function i(){return $A(this,i),r.apply(this,arguments)}return DA(i,[{key:"_changeState",value:function(){throw new Error("_changeState() should be overridden to perform actual change in state.")}},{key:"changeState",value:function(){for(var o=this,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];var c=typeof a[0]=="string"?a.shift():void 0,u=Object(a[0])===a[0]&&typeof a[0]!="function"?a.shift():void 0,h=typeof a[0]=="function"?a.shift():void 0;if(typeof this.shouldStateBeChanged=="function"&&!this.shouldStateBeChanged(c,u)){h&&h(null,!0);return}var f={group:u&&u.group,state:c},d=[f.group,c].filter(Boolean).join("-").split("-").map(function(w){return w[0].toUpperCase()+w.substr(1)}).join(""),p=new CustomEvent(this.options["eventBefore".concat(d)],{bubbles:!0,cancelable:!0,detail:u}),v=u&&u.delegatorNode||this.element,g=!v.dispatchEvent(p);if(g){if(h){var m=new Error("Changing state (".concat(JSON.stringify(f),") has been canceled."));m.canceled=!0,h(m)}}else{var _=[c,u].filter(Boolean);this._changeState.apply(this,OA(_).concat([function(){v.dispatchEvent(new CustomEvent(o.options["eventAfter".concat(d)],{bubbles:!0,cancelable:!0,detail:u})),h&&h()}]))}}}]),i}(t);return e}function oa(t,e){var n=t.target,r=t.currentTarget;if(typeof n.matches=="function"){if(n.matches(e))return n;if(n.matches("".concat(e," *"))){var i=n.closest(e);if((r.nodeType===Node.DOCUMENT_NODE?r.documentElement:r).contains(i))return i}}}function Iu(t){if(!t||typeof t=="function")return{launchingElement:null,launchingEvent:null};var e=t.delegateTarget||t.currentTarget||t,n=t.currentTarget&&t;if(e&&!e.nodeType)throw new TypeError("DOM Node should be given for launching element.");if(n&&!n.type)throw new TypeError("DOM event should be given for launching event.");return{launchingElement:e,launchingEvent:n}}function sa(t){"@babel/helpers - typeof";return sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sa(t)}function UA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function FA(t,e,n){return e&&HA(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aa(t,e)}function aa(t,e){return aa=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},aa(t,e)}function jA(t){var e=WA();return function(){var n=fo(t),r;if(e){var i=fo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return GA(this,r)}}function GA(t,e){if(e&&(sa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zA(t)}function zA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fo(t){return fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fo(t)}function YA(t){var e=function(n){VA(i,n);var r=jA(i);function i(){return UA(this,i),r.apply(this,arguments)}return FA(i,[{key:"show",value:function(o,s){(!o||typeof o=="function")&&(s=o),this.changeState("shown",Iu(o),s)}},{key:"hide",value:function(o,s){(!o||typeof o=="function")&&(s=o),this.changeState("hidden",Iu(o),s)}}]),i}(t);return e}var ZA=[BA,YA];function XA(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function la(t){"@babel/helpers - typeof";return la=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},la(t)}function qA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function QA(t,e,n){return n&&KA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function JA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ca(t,e)}function ca(t,e){return ca=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ca(t,e)}function tC(t){var e=rC();return function(){var n=po(t),r;if(e){var i=po(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return eC(this,r)}}function eC(t,e){if(e&&(la(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nC(t)}function nC(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function po(t){return po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},po(t)}function iC(t){var e=function(n){JA(i,n);var r=tC(i);function i(){return qA(this,i),r.apply(this,arguments)}return QA(i,null,[{key:"init",value:function(){var o=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=Object.assign(Object.create(this.options),a);if(!s||s.nodeType!==Node.ELEMENT_NODE&&s.nodeType!==Node.DOCUMENT_NODE)throw new TypeError("DOM document or DOM element should be given to search for and initialize this widget.");if(s.nodeType===Node.ELEMENT_NODE&&s.matches(l.selectorInit))this.create(s,a);else{var c=l.initEventNames.map(function(u){return kr(s,u,function(h){var f=oa(h,"[".concat(l.attribInitTarget,"]"));if(f){h.delegateTarget=f;var d=f.ownerDocument.querySelectorAll(f.getAttribute(l.attribInitTarget));if(d.length>1)throw new Error("Target widget must be unique.");if(d.length===1){f.tagName==="A"&&h.preventDefault();var p=o.create(d[0],a);typeof p.createdByLauncher=="function"&&p.createdByLauncher(h)}}})});return{release:function(){for(var u=c.pop();u;u=c.pop())u.release()}}}return""}}]),i.forLazyInit=!0,i}(t);return e}function ua(t){"@babel/helpers - typeof";return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(t)}function oC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sC(t,e,n){return e&&Pu(t.prototype,e),n&&Pu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function aC(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ha(t,e)}function ha(t,e){return ha=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ha(t,e)}function lC(t){var e=hC();return function(){var n=go(t),r;if(e){var i=go(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cC(this,r)}}function cC(t,e){if(e&&(ua(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uC(t)}function uC(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function go(t){return go=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},go(t)}var dC=function(t){aC(n,t);var e=lC(n);function n(r,i){var o;return oC(this,n),o=e.call(this,r,i),o._handleFocusinListener=void 0,o._handleKeydownListener=void 0,o._handleFocusin=function(s){var a=o.element.querySelector(o.options.selectorModalContainer)||o.element;o.element.classList.contains(o.options.classVisible)&&!a.contains(s.target)&&o.options.selectorsFloatingMenus.every(function(l){return!oa(s,l)})&&o.element.querySelector(_s.selectorTabbable).focus()},o._hookCloseActions(),o}return sC(n,[{key:"createdByLauncher",value:function(r){this.show(r)}},{key:"shouldStateBeChanged",value:function(r){return r==="shown"?!this.element.classList.contains(this.options.classVisible):this.element.classList.contains(this.options.classVisible)}},{key:"_changeState",value:function(r,i,o){var s=this,a,l=function(){if(a&&(a=s.unmanage(a).release()),r==="shown"&&s.element.offsetWidth>0&&s.element.offsetHeight>0){s.previouslyFocusedNode=s.element.ownerDocument.activeElement;var h=s.element.querySelector(s.options.selectorPrimaryFocus)||s.element.querySelector(_s.selectorTabbable);h.focus()}o()};if(this._handleFocusinListener&&(this._handleFocusinListener=this.unmanage(this._handleFocusinListener).release()),r==="shown"){var c="onfocusin"in this.element.ownerDocument.defaultView,u=c?"focusin":"focus";this._handleFocusinListener=this.manage(kr(this.element.ownerDocument,u,this._handleFocusin,!c))}r==="hidden"?(this.element.classList.toggle(this.options.classVisible,!1),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!1),(this.options.selectorFocusOnClose||this.previouslyFocusedNode)&&(this.element.ownerDocument.querySelector(this.options.selectorFocusOnClose)||this.previouslyFocusedNode).focus()):r==="shown"&&(this.element.classList.toggle(this.options.classVisible,!0),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!0)),a=this.manage(kr(this.element,"transitionend",l))}},{key:"_hookCloseActions",value:function(){var r=this;this.manage(kr(this.element,"click",function(i){var o=oa(i,r.options.selectorModalClose);o&&(i.delegateTarget=o),(o||i.target===r.element)&&r.hide(i)})),this._handleKeydownListener&&(this._handleKeydownListener=this.unmanage(this._handleKeydownListener).release()),this._handleKeydownListener=this.manage(kr(this.element.ownerDocument.body,"keydown",function(i){i.which===27&&r.shouldStateBeChanged("hidden")&&(i.stopPropagation(),r.hide(i))}))}}],[{key:"options",get:function(){var r=_s.prefix;return{selectorInit:"[data-modal]",selectorModalClose:"[data-modal-close]",selectorPrimaryFocus:"[data-modal-primary-focus]",selectorsFloatingMenus:[".".concat(r,"--overflow-menu-options"),".".concat(r,"--tooltip"),".flatpickr-calendar"],selectorModalContainer:".".concat(r,"--modal-container"),classVisible:"is-visible",classBody:"".concat(r,"--body--with-modal-open"),attribInitTarget:"data-modal-target",initEventNames:["click"],eventBeforeShown:"modal-beingshown",eventAfterShown:"modal-shown",eventBeforeHidden:"modal-beinghidden",eventAfterHidden:"modal-hidden"}}}]),n.components=new WeakMap,n}(aA(pA,iC,ZA,EA));class lp extends Et{constructor(e,n,r){super(e,n,r),this.type="modal",this.isEventListenerAdded=!1,this.handleShowModal=()=>{const i=this.services.domUtils.getChartID();this.modal.attr("data-modal",!0).attr("class","cds--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby",`${i}__modal-title`).attr("aria-describedby",`${i}__modal-description`).attr("tabindex",-1),this.modal.html(this.getModalHTML()),this.modal.select("div.cds--modal-footer button.cds--btn").on("click",()=>this.model.exportToCSV()),dC.create(this.modal.node()).show(),document.addEventListener("modal-hidden",this.handleHideModal)},this.handleHideModal=()=>{this.modal.attr("role",null).attr("aria-modal",null).attr("aria-labelledby",null).attr("aria-describedby",null).attr("tabindex",null),document.removeEventListener("modal-hidden",this.handleHideModal)},this.init()}addEventListeners(){this.services.events.addEventListener(S.Modal.SHOW,this.handleShowModal)}removeEventListeners(){this.services.events.removeEventListener(S.Modal.SHOW,this.handleShowModal)}getModalHTML(){const e=this.services.domUtils.getChartID(),n=this.model.getOptions(),{title:r,downloadAsCSV:i}=y(n,"locale","translations","tabularRep"),o=y(n,"style","prefix"),s=this.model.getTabularDataArray();return`
		<div class="cds--modal-container">
			<div class="cds--modal-header">

				<p class="cds--modal-header__label cds--type-delta" id="modal-title">${r}</p>

				<p class="cds--modal-header__heading cds--type-beta" id="${e}__modal-description">${Ie(n.title)}</p>

				<button class="cds--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>
					<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="cds--modal-close__icon">
						<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>
					</svg>
				</button>
			</div>

			<div class="cds--modal-content">
				<table class="cds--data-table cds--data-table--no-border">
					<thead>
						<tr>
							${Hn(s,0).map(a=>`<th scope="col">
								<div class="cds--table-header-label">${Ie(a)}</div>
							</th>`).join("")}
						</tr>
					</thead>

					<tbody>${s.slice(1).map(a=>`
							<tr>
								${a.map(l=>`<td>${Ie(l)}</td>`).join("")}
							</tr>`).join("")}
					</tbody>
				</table>
			</div>

			<div class="cds--modal-footer">
			  <div class="${ne}--${o}-modal-footer-spacer"></div>
			  <button class="cds--btn cds--btn--primary" type="button" data-modal-primary-focus>${i}</button>
			</div>
		</div>`}render(e=!1){const n=this.model.getOptions();if(!this.isEventListenerAdded){const r=D(this.services.domUtils.getHolder()),i=y(n,"style","prefix");this.modal=R.appendOrSelect(r,`div.${ne}--${i}--modal`),this.addEventListeners(),this.isEventListenerAdded=!0}}destroy(){this.removeEventListeners(),this.isEventListenerAdded=!1}}class cp extends Et{constructor(){super(...arguments),this.type="title",this.renderType=ft.HTML}render(e=!1){const n=this.getComponentContainer(),r=y(this.getOptions(),"title"),i=n.selectAll("p.title").data([r]);if(i.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(i).html(o=>Ie(o)),i.node()&&i.node().offsetWidth<i.node().scrollWidth){const o=this;i.on("mouseover",function(s){o.services.events.dispatchEvent(S.Tooltip.SHOW,{event:s,hoveredElement:i,content:i.text()})}).on("mousemove",function(s){o.services.events.dispatchEvent(S.Tooltip.MOVE,{event:s})}).on("mouseout",function(){o.services.events.dispatchEvent(S.Tooltip.HIDE)})}i.exit().remove()}truncateTitle(e,n){if(n<=0)return;const r=e.text();if(e.node().getComputedTextLength()>n){e.append("tspan").text("...");const i=R.appendOrSelect(e,"tspan").node().getComputedTextLength(),o=e.text(),s=this.getSubstringIndex(e.node(),0,o.length-1,n-i);e.html(o.substring(0,s-1)).append("tspan").text("...");const a=this;e.on("mouseover",function(l){a.services.events.dispatchEvent(S.Tooltip.SHOW,{event:l,hoveredElement:e,content:r})}).on("mousemove",function(l){a.services.events.dispatchEvent(S.Tooltip.MOVE,{event:l})}).on("mouseout",function(){a.services.events.dispatchEvent(S.Tooltip.HIDE)})}}getMaxTitleWidth(){return R.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width}getSubstringIndex(e,n,r,i){const o=Math.floor((r+n)/2);return e.getSubStringLength(0,o)>i?this.getSubstringIndex(e,n,o,i):e.getSubStringLength(0,o)<i?e.getSubStringLength(0,o+1)>i?o:this.getSubstringIndex(e,o,r,i):o}}class up extends Et{constructor(){super(...arguments),this.type="legend",this.renderType=ft.HTML}render(e=!1){const n=this.getOptions(),r=y(n,"legend"),i=y(r,"alignment"),o=y(n,"legend","orientation");let s=this.model.getDataGroups();const{DISABLED:a}=Bt.items.status,l=s.some(_=>_.status===a),c=y(r,"order"),u=this.getComponentContainer().classed("center-aligned",i===Ee.CENTER).classed("right-aligned",i===Ee.RIGHT).classed(o,!0).classed("has-deactivated-items",l).attr("role",$t.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");c&&(s=this.sortDataGroups(s,c));const h=u.selectAll("div.legend-item").data(s,_=>_.name),f=h.enter().append("div").attr("class","legend-item");f.merge(u.selectAll("div.legend-item")).classed("active",function(_){return _.status===Bt.items.status.ACTIVE});const d=y(this.getOptions(),"legend","clickable");u.classed("clickable",d&&s.length>1);const p=Bt.checkbox.radius,v=f.append("div").classed("checkbox",!0),g=v.merge(h.select("div.checkbox")).attr("role",$t.CHECKBOX).attr("tabindex",d?0:-1).attr("aria-labelledby",(_,w)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${w}-title`)).attr("aria-checked",({status:_})=>_===Bt.items.status.ACTIVE).attr("width",p*2).attr("height",p*2).attr("class",_=>this.model.getColorClassName({classNameTypes:[Ut.BACKGROUND],dataGroupName:_.name,originalClassName:"checkbox"})).style("background",_=>_.status===Bt.items.status.ACTIVE?this.model.getFillColor(_.name)||this.model.getStrokeColor(_.name):null).classed("active",function(_){return _.status===Bt.items.status.ACTIVE});v.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),f.append("p").merge(h.select("p"));const m=y(n,"legend","additionalItems");if(m&&s.length){const _=this,w=u.selectAll("div.additional-item").data(m);w.exit().remove();const E=w.enter().append("div").merge(w).classed("legend-item",!0).classed("additional",!0).attr("aria-labelledby",(O,M)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${g.size()+M}-title`));E.selectAll("*").remove();let x,T=1;E.append("svg").classed("icon",!0).each(function(O){const M=D(this);!x||x!=O.type?(x=O.type,T=1):T++,_.addAdditionalItem(M,O,T)}),E.append("p").merge(E.select("p")),this.truncateLegendText()}h.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),d&&f.size()>1&&this.addEventListeners()}sortDataGroups(e,n){if(e.sort((r,i)=>n.indexOf(r.name)-n.indexOf(i.name)),n.length<e.length){const r=e.length-n.length;return e.slice(r).concat(e.slice(0,r))}return e}addAdditionalItem(e,n,r){const{width:i,height:o}=Bt.area;if(n.type===It.RADIUS?e.style("width",`${o}px`).style("height",`${o}px`):e.style("width",`${i}px`).style("height",`${o}px`),n.type===It.RADIUS){const{iconData:s,fill:a,stroke:l}=Bt.radius;e.attr("fill","none").selectAll("circle").data(s).enter().append("circle").classed("radius",!0).attr("role",$t.IMG).attr("aria-label","radius").attr("cx",c=>c.cx).attr("cy",c=>c.cy).attr("r",c=>c.r).style("fill",n.fill?n.fill:a).style("stroke",n.stroke?n.stroke:l)}else if(n.type===It.LINE){const s=Bt.line;e.select("line.line").empty()&&e.append("line").classed(`line-${r}`,!0).attr("role",$t.IMG).attr("aria-label","line").attr("x1",0).attr("y1",s.yPosition).attr("x2",i).attr("y2",s.yPosition).style("stroke",n.stroke?n.stroke:s.stroke).style("stroke-width",s.strokeWidth)}else if(n.type===It.AREA)e.select("rect.area").empty()&&e.append("rect").classed(`area-${r}`,!0).attr("role",$t.IMG).attr("aria-label","area").attr("width",i).attr("height",o).style("fill",r>3&&!n.fill?Bt.area.fill:n.fill).style("stroke",n.stroke);else if(n.type===It.SIZE){const{iconData:s,fill:a,stroke:l}=Bt.size;e.attr("fill","none").attr("role",$t.IMG).attr("aria-label","size").selectAll("rect").data(s).enter().append("rect").classed("size",!0).attr("width",c=>c.width).attr("height",c=>c.height).attr("y",()=>0).style("fill",n.fill?n.fill:a).style("stroke",n.stroke?n.stroke:l).style("stroke-width",1)}else if(n.type===It.QUARTILE){const{iconData:s}=Bt.quartile;e.selectAll("rect").attr("role",$t.IMG).attr("aria-label","quartile").data(s).enter().append("rect").attr("class",(a,l)=>`quartile-${l===0?"wrapper":"line"}`).attr("x",a=>a.x).attr("y",a=>a.y).attr("width",a=>a.width).attr("height",a=>a.height)}else if(n.type===It.ZOOM){const{iconData:s,color:a}=y(Bt,"zoom"),l=e.attr("role",$t.IMG).attr("aria-label","zoom").selectAll("g.icon").data(s).enter();l.append("g").attr("x",c=>c.x).attr("y",c=>c.y).attr("width",c=>c.width).attr("height",c=>c.height).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",()=>n.color?n.color:a),l.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",()=>n.color?n.color:a)}}truncateLegendText(){const e=this.getComponentContainer(),n=y(this.getOptions(),"legend","truncation"),r=y(n,"type"),i=y(n,"threshold"),o=y(n,"numCharacter"),s=e.selectAll("div.legend-item p");s.attr("id",function(){return(this.parentNode.querySelector("div.checkbox")||this.parentNode).getAttribute("aria-labelledby")}),r!==xe.NONE?s.html(function(a){const l=Ie(a.name);return l.length>i&&l.length!==o?Zr(l,r,o):l}):s.html(a=>Ie(a.name))}addEventListeners(){const e=this,n=this.getComponentContainer(),r=this.getOptions(),i=y(r,"legend"),o=y(i,"truncation");n.selectAll("div.legend-item").on("mouseover",function(s){e.services.events.dispatchEvent(S.Legend.ITEM_HOVER,{hoveredElement:D(this)});const a=D(this);a.select("div.checkbox").classed("hovered",!0);const l=a.datum();l.name.length>o.threshold&&o.numCharacter<l.name.length&&o.type!==xe.NONE&&e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:s,hoveredElement:a,content:l.name})}).on("mousemove",function(s){D(this).datum().name.length>o.threshold&&o.type!==xe.NONE&&e.services.events.dispatchEvent(S.Tooltip.MOVE,{event:s})}).on("click",function(){e.services.events.dispatchEvent(S.Legend.ITEM_CLICK,{clickedElement:D(this)});const s=D(this).datum();e.model.toggleDataLabel(s.name)}).on("mouseout",function(){const s=D(this);s.select("div.checkbox").classed("hovered",!1),s.datum().name.length>o.threshold&&o.type!==xe.NONE&&e.services.events.dispatchEvent(S.Tooltip.HIDE),e.services.events.dispatchEvent(S.Legend.ITEM_MOUSEOUT,{hoveredElement:s})}),n.selectAll("div.legend-item div.checkbox").on("keyup",function(s){s.key&&s.key==="Tab"&&e.services.events.dispatchEvent(S.Legend.ITEM_HOVER,{hoveredElement:D(this)})}),n.selectAll("div.legend-item div.checkbox").on("keydown",function(s,a){s.key&&s.key===" "?(s.preventDefault(),e.model.toggleDataLabel(a.name)):s.key&&s.key==="Tab"&&e.services.events.dispatchEvent(S.Legend.ITEM_MOUSEOUT,{hoveredElement:D(this)})}),n.selectAll("g.additional-item").on("mouseover",function(s){const a=D(this),l=a.datum();l.name.length>o.threshold&&e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:s,hoveredElement:a,content:l.name})})}}class hp extends Et{constructor(e,n,r){super(e,n,r),this.type="chart-clip",this.renderType=ft.SVG,this.chartClipId="chart-clip-id-"+Math.floor(Math.random()*99999999999),this.init()}init(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})}render(e=!0){this.createClipPath()}createClipPath(){const e=this.parent,{cartesianScales:n}=this.services;if(!n)throw new Error("Service cartesianScales was undefined");const r=n.getMainXScale(),i=n.getMainYScale(),[o,s]=r.range(),[a,l]=i.range();if(!e)throw new Error("svg is undefined");this.chartClipPath=R.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const c=R.appendOrSelect(this.chartClipPath,`rect.${this.type}`);s-o>0&&c.attr("x",o).attr("y",l).attr("width",s-o).attr("height",a-l),this.chartClipPath.merge(c).lower()}}class fC extends hp{constructor(){super(...arguments),this.type="canvas-chart-clip",this.chartClipId="canvas-chart-clip-id-"+Math.floor(Math.random()*99999999999)}createClipPath(){const e=this.parent,{width:n,height:r}=R.getSVGElementSize(this.parent,{useAttrs:!0});this.chartClipPath=R.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const i=R.appendOrSelect(this.chartClipPath,`rect.${this.type}`);i.attr("x",0).attr("y",0).attr("width",n).attr("height",r),this.chartClipPath.merge(i).lower()}}var Bn,Mt;(function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"})(Mt||(Mt={}));var Nu=(Bn={},Bn[Mt.LEFT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left-e.offsetWidth)}},Bn[Mt.RIGHT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left+n.width)}},Bn[Mt.TOP]=function(t,e,n){return{top:Math.round(t.top-e.offsetHeight),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},Bn[Mt.BOTTOM]=function(t,e,n){return{top:Math.round(t.top+n.height),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},Bn),Bu=typeof window<"u"?window:{innerHeight:0,scrollY:0,innerWidth:0,scrollX:0},Fo=function(){function t(e){e===void 0&&(e={}),this.positions=Nu,this.positions=Object.assign({},Nu,e)}return t.prototype.getRelativeOffset=function(e){for(var n={left:e.offsetLeft,top:e.offsetTop};e.offsetParent&&getComputedStyle(e.offsetParent).position==="static";)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;return n},t.prototype.getAbsoluteOffset=function(e){for(var n=e,r={top:0,left:0};n.offsetParent;){var i=getComputedStyle(n.offsetParent);i.position==="static"&&i.marginLeft&&i.marginTop&&(parseInt(i.marginTop,10)&&(r.top+=parseInt(i.marginTop,10)),parseInt(i.marginLeft,10)&&(r.left+=parseInt(i.marginLeft,10))),n=n.offsetParent}var o=e.getBoundingClientRect(),s=document.body.getBoundingClientRect();return{top:o.top-s.top+r.top,left:o.left-s.left+r.left}},t.prototype.findRelative=function(e,n,r){var i=this.getRelativeOffset(e),o=e.getBoundingClientRect();return this.calculatePosition(i,o,n,r)},t.prototype.findAbsolute=function(e,n,r){var i=this.getAbsoluteOffset(e),o=e.getBoundingClientRect();return this.calculatePosition(i,o,n,r)},t.prototype.findPosition=function(e,n,r,i){i===void 0&&(i=this.getAbsoluteOffset.bind(this));var o=i(e),s=e.getBoundingClientRect();return this.calculatePosition(o,s,n,r)},t.prototype.findPositionAt=function(e,n,r){return this.calculatePosition(e,{top:0,left:0,height:0,width:0},n,r)},t.prototype.getPlacementBox=function(e,n){var r=e.offsetHeight+n.top,i=e.offsetWidth+n.left;return{top:n.top,bottom:r,left:n.left,right:i}},t.prototype.addOffset=function(e,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),Object.assign({},e,{top:e.top+n,left:e.left+r})},t.prototype.setElement=function(e,n){e.style.top=n.top+"px",e.style.left=n.left+"px"},t.prototype.findBestPlacement=function(e,n,r,i,o){var s=this;i===void 0&&(i=this.defaultContainerFunction.bind(this)),o===void 0&&(o=this.findPosition.bind(this));var a=r.map(function(l){var c=o(e,n,l),u=s.getPlacementBox(n,c),h=0,f=0,d=i();u.top<d.top?h=d.top-u.top:u.bottom>d.height&&(h=u.bottom-d.height),u.left<d.left?f=d.left-u.left:u.right>d.width&&(f=u.right-d.width),h&&!f?f=1:f&&!h&&(h=1);var p=n.offsetHeight*n.offsetWidth,v=h*f,g=p-v,m=g/p;return{placement:l,weight:m}});return a.sort(function(l,c){return c.weight-l.weight}),a[0].placement},t.prototype.findBestPlacementAt=function(e,n,r,i){var o=this;i===void 0&&(i=this.defaultContainerFunction.bind(this));var s=function(a,l,c){return o.findPositionAt(e,l,c)};return this.findBestPlacement(null,n,r,i,s)},t.prototype.defaultContainerFunction=function(){return{top:0,left:0,height:Bu.innerHeight,width:Bu.innerWidth}},t.prototype.calculatePosition=function(e,n,r,i){return this.positions[i]?this.positions[i](e,r,n):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},t}();new Fo;class dp extends Et{constructor(e,n,r){super(e,n,r),this.type="tooltip",this.renderType=ft.HTML,this.isEventListenerAdded=!1,this.lastTriggeredEventType="",this.positionService=new Fo,this.handleShowTooltip=i=>{const o=i.detail.data||i.detail.items,s=D(i.detail.event.target).datum();let a;const l=this.formatItems(this.getItems(i));i.detail.content?a=`<div class="title-tooltip"><p>${bi(i.detail.content)}</p></div>`:a=bi(this.getTooltipHTML(l));const c=R.appendOrSelect(this.tooltip,"div.content-box");if(y(this.getOptions(),"tooltip","customHTML"))if(i.detail.content){const u=`<div class="title-tooltip"><p>${bi(i.detail.content)}</p></div>`;c.html(u)}else c.html(`<div class="title-tooltip"><p>${bi(this.model.getOptions().tooltip.customHTML(o,a,s))}</p></div>`);else c.html(a);c.selectAll(".datapoint-tooltip").each(function(u,h){const f=l[h];l[h]&&l[h].color&&D(this).select(".tooltip-color").attr("class","tooltip-color").style("background-color",f.color)}),this.positionTooltip(i),this.tooltip.classed("hidden",!1).attr("aria-hidden",!1),this.lastTriggeredEventType=i.type},this.handleHideTooltip=()=>{this.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},this.init()}addTooltipEventListener(){this.services.events.addEventListener(S.Tooltip.MOVE,e=>{this.lastTriggeredEventType!==S.Toolbar.SHOW_TOOLTIP&&this.tooltip.classed("hidden")===!1&&this.positionTooltip(e)}),this.services.events.addEventListener(S.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener(S.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener(S.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.addEventListener(S.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.addEventListener(S.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}removeTooltipEventListener(){this.services.events.removeEventListener(S.Tooltip.MOVE,null),this.services.events.removeEventListener(S.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener(S.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener(S.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.removeEventListener(S.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.removeEventListener(S.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}getItems(e){return e.detail.items?e.detail.items:[]}formatItems(e){const n=this.getOptions(),r=y(n,"tooltip","truncation","type"),i=y(n,"tooltip","truncation","threshold"),o=y(n,"tooltip","truncation","numCharacter");return r!==xe.NONE?e.map(s=>{const a=s.labelIcon?12:0;return s.value=s.value?this.valueFormatter(s.value,s.label):s.value,s.label&&s.label.length+a>i&&(s.label=Zr(s.label,r,o)),s.value&&s.value.length>i&&(s.value=Zr(s.value,r,o)),s}):e.map(s=>(s.value=s.value?this.valueFormatter(s.value,s.label):s.value,s))}getTooltipHTML(e){return'<ul class="multi-tooltip">'+e.map(n=>`<li>
					<div class="datapoint-tooltip${n.bold?" bold":""}">
						${n.class||n.color?`<div class="tooltip-color ${n.class}"></div>`:""}
						<div class="label">
						<p>${n.label||""}</p>
						${n.labelIcon?`<span class="label-icon"/>${n.labelIcon}</span>`:""}
						</div>
						${n.value===void 0||n.value===null?"":`<p class="value"/>${n.value}</p>`}
					</div>
				</li>`).join("")+"</ul>"}isDate(e){return e instanceof Date}valueFormatter(e,n){const r=this.getOptions(),i=y(r,"tooltip","valueFormatter"),{code:o,number:s,date:a}=y(r,"locale");if(i)return i(e,n);if(this.isDate(e))return a(e,o,{month:"short",day:"numeric",year:"numeric"});try{if(typeof e=="string"&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e)){const l=new Date(e);return a(l,o,{month:"short",day:"numeric",year:"numeric"})}}catch{}return s(e,o)}render(e=!1){const n=this.getOptions(),r=y(n,"tooltip","enabled");if(r){const i=D(this.services.domUtils.getHolder()),o=y(n,"style","prefix");this.tooltip=R.appendOrSelect(i,`div.${ne}--${o}--tooltip`),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!r&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)}addOffsetByPlacement(e,n,r){const i=Object.assign({},e);return n==Mt.LEFT?i.left-=r:n==Mt.RIGHT?i.left+=r:n==Mt.TOP?i.top-=r:n==Mt.BOTTOM&&(i.top+=r),i}positionTooltip(e){const n=this.services.domUtils.getHolder(),r=n.offsetWidth,i=n.offsetHeight,o=this.tooltip.node(),s=this.getOptions(),a=y(s,"zoomBar","top","enabled"),l=!!y(e,"detail","noWrap"),c=Array.isArray(y(e,"detail","placements")),u=c?y(e,"detail","placements"):[Mt.RIGHT,Mt.LEFT,Mt.TOP,Mt.BOTTOM];let h,{horizontalOffset:f}=Nc;const{defaultOffset:d}=Nc;if(this.tooltip.select("div.title-tooltip").classed("title-tooltip-nowrap",l),c){const g=y(e,"detail","event","target"),m=this.services.domUtils.getElementOffset(g,!0);h=this.positionService.findBestPlacementAt(m,o,u,()=>({top:0,left:0,width:r,height:i}));let _=this.positionService.findPosition(g,o,h,()=>this.services.domUtils.getElementOffset(g));_=this.addOffsetByPlacement(_,h,d),this.positionService.setElement(o,_);return}let p=y(e,"detail","mousePosition");if(!p)p=wn(y(e,"detail","event"),n);else{const g=y(s,"zoomBar","top","type"),m=ce.height[g];a&&(p[1]+=m+ce.spacerHeight)}p[0]/r>.9?h=Mt.LEFT:p[0]/r<.1?h=Mt.RIGHT:h=this.positionService.findBestPlacementAt({left:p[0],top:p[1]},o,u,()=>({top:void 0,left:void 0,width:r,height:i})),h===Mt.LEFT&&(f*=-1);const v=this.positionService.findPositionAt({left:p[0]+f,top:p[1]},o,h);this.positionService.setElement(o,v)}}const fp=class $i extends Et{constructor(){super(...arguments),this.type="grid-brush",this.renderType=ft.SVG,this.selectionSelector="rect.selection",this.frontSelectionSelector="rect.frontSelection"}render(e=!0){const n=this.parent,r=this.getComponentContainer();if(!n)throw new Error("SVG was not defined");const i=R.appendOrSelect(n,"svg.chart-grid-backdrop"),o=R.appendOrSelect(i,`g.${this.type}`),s=R.appendOrSelect(o,this.selectionSelector),{width:a,height:l}=R.getSVGElementSize(i,{useAttrs:!0}),{cartesianScales:c}=this.services,u=c.getMainXScaleType(),h=c.getMainXScale(),[f]=h.range();r.attr("transform",`translate(${f},0)`);const d=R.appendOrSelect(r,this.frontSelectionSelector);if(h&&u===j.TIME){let p=this.model.get("zoomDomain");p===void 0&&(p=this.services.zoom.getDefaultZoomBarDomain(),p&&this.model.set({zoomDomain:p},{animate:!1}));const v=x=>{const T=x[1]-x[0];let O="0,"+T.toString();const M=Math.floor(l/$i.DASH_LENGTH),P=M*$i.DASH_LENGTH;for(let I=0;I<M;I++)O+=","+$i.DASH_LENGTH;O+=","+(l-P),M%2===1&&(O+=",0"),O+=","+T.toString(),O+=","+l.toString(),d.attr("stroke-dasharray",O)},g=x=>{const T=x.selection;T===null||T[0]===T[1]||(d.attr("x",parseFloat(s.attr("x"))+parseFloat(i.attr("x"))).attr("y",s.attr("y")).attr("width",s.attr("width")).attr("height",s.attr("height")).style("cursor","pointer").style("display",null),v(T))},m=(x,T)=>{const O=kf().range([0,a]).domain(p);let M=[O.invert(x),O.invert(T)];M[0].valueOf()===M[1].valueOf()&&(M=this.services.zoom.getDefaultZoomBarDomain()),(p[0].valueOf()!==M[0].valueOf()||p[1].valueOf()!==M[1].valueOf())&&this.services.zoom.handleDomainChange(M)};let _;const w=x=>{const T=x.selection;T!==null&&(m(T[0],T[1]),o.call(_.move,null),d.style("display","none"))};l!=0&&a!=0&&(_=Gf().extent([[0,0],[a-1,l]]).on("start brush end",g).on("end.brushed",w),o.call(_));const E=this.services.zoom.getZoomRatio();i.on("click",function(x){if(x.shiftKey){const T=this.services.domUtils.getHolder(),O=wn(o.node(),T)[0];let M=O-a*E/2;M<0&&(M=0);let P=O+a*E/2;P>a&&(P=a),m(M,P)}})}}};fp.DASH_LENGTH=4;let pC=fp;class gC extends Et{constructor(){super(...arguments),this.type="zoom-bar",this.renderType=ft.SVG,this.MIN_SELECTION_DIFF=9e-10,this.brushSelector="g.zoom-bar-brush",this.clipId="zoomBarClip-"+Math.floor(Math.random()*99999999999),this.brush=Gf(),this.highlightStrokeWidth=1}init(){this.services.events.addEventListener(S.ZoomBar.UPDATE,this.render.bind(this));const e=y(this.getOptions(),"zoomBar",A.TOP,"data");this.model.setZoomBarData(e)}render(e=!0){const n=this.getComponentContainer(),r=this.services.zoom.isZoomBarLoading(A.TOP),i=this.services.zoom.isZoomBarLocked(A.TOP),o=y(this.getOptions(),"zoomBar",A.TOP,"type"),s=y(this.getOptions(),"axes",A.BOTTOM,"highlights"),a=ce.height[o],{width:l}=R.getSVGElementSize(this.parent,{useAttrs:!0});if(l===0)return;let c=0;const u=this.model.get("axesMargins");u&&u.left&&(c=u.left);const h=R.appendOrSelect(n,"svg.zoom-container").attr("width","100%").attr("height",a).attr("opacity",1);if(R.appendOrSelect(n,"rect.zoom-spacer").attr("x",0).attr("y",a).attr("width","100%").attr("height",ce.spacerHeight).attr("opacity",1).attr("fill","none"),o===Le.GRAPH_VIEW?R.appendOrSelect(h,"rect.zoom-bg").attr("x",c).attr("y",0).attr("width",l-c).attr("height","100%").classed("zoom-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null):o===Le.SLIDER_VIEW&&R.appendOrSelect(h,"rect.zoom-slider-bg").attr("x",c).attr("y",a/2-1).attr("width",l-c).attr("height",2).classed("zoom-slider-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null),r){this.renderSkeleton(h,c,l);return}const{cartesianScales:f}=this.services,d=f.getMainXScale(),p=f.getMainYScale(),v=f.getMainXScaleType();if(d&&v===j.TIME){let g=this.services.zoom.getZoomBarData();if(A0(g)||g.length===1)return;this.xScale=d.copy(),this.yScale=p.copy();const m=this.services.zoom.getDefaultZoomBarDomain(g);g=this.compensateDataForDefaultDomain(g,m);const _=this.model.get("initialZoomDomain"),w=y(this.getOptions(),"zoomBar",A.TOP,"initialZoomDomain");w&&w[0]&&w[1]&&(w[0]=new Date(w[0]),w[1]=new Date(w[1])),w&&!(_&&_[0].valueOf()===w[0].valueOf()&&_[1].valueOf()===w[1].valueOf())?this.model.set({initialZoomDomain:J([],w),zoomDomain:w?J([],w):m},{skipUpdate:!0}):w===null&&_!==null&&this.model.set({initialZoomDomain:null,zoomDomain:J([],m)},{skipUpdate:!0}),this.xScale.range([c,l]).domain(m),this.maxSelectionRange=this.xScale.range(),this.yScale.range([0,a-6]).domain(Yn(g,T=>T.value));const E=this.model.get("zoomDomain");if(o===Le.GRAPH_VIEW&&(this.renderZoomBarArea(h,"path.zoom-graph-area-unselected",g,null),this.updateClipPath(n,this.clipId,0,0,0,0),this.renderZoomBarArea(h,"path.zoom-graph-area",g,this.clipId),this.renderZoomBarBaseline(h,c,l),s)){const T=s.highlightStartMapsTo,O=s.highlightEndMapsTo,M=s.color,P=s.labelMapsTo;s.data.forEach((I,k)=>{R.appendOrSelect(h,`rect.highlight-${k}`).attr("height",a-2*this.highlightStrokeWidth).attr("y",this.highlightStrokeWidth).attr("x",this.xScale(I[T])).attr("width",this.xScale(I[O])-this.xScale(I[T])).style("fill",M&&M.scale[I[P]]?M.scale[I[P]]:null).style("fill-opacity",.1).style("stroke",M&&M.scale[I[P]]?M.scale[I[P]]:null).style("stroke-dasharray","2, 2").attr("stroke-width","1px")})}this.addBrushEventListener(E,c,l);const x=R.appendOrSelect(n,this.brushSelector).call(this.brush);if(E!==void 0)if(E[0].valueOf()===E[1].valueOf())x.call(this.brush.move,this.xScale.range()),this.updateBrushHandle(this.getComponentContainer(),this.xScale.range());else{const T=E.map(O=>this.xScale(O));T[1]-T[0]<this.MIN_SELECTION_DIFF||(x.call(this.brush.move,T),this.updateBrushHandle(this.getComponentContainer(),T))}i&&(this.brush.filter(()=>!1),x.selectAll("rect").attr("cursor","auto"))}}addBrushEventListener(e,n,r){const i=a=>{const l=a.selection;l===null?this.handleBrushedEvent(a,e,this.xScale,this.xScale.range()):l[0]===l[1]||this.handleBrushedEvent(a,e,this.xScale,l)},o=y(this.getOptions(),"zoomBar",A.TOP,"type"),s=ce.height[o];this.brush.extent([[n,0],[r,s]]).on("start brush end",null).on("start brush end",i)}handleBrushedEvent(e,n,r,i){const o=[r.invert(i[0]),r.invert(i[1])];if(this.updateBrushHandle(this.getComponentContainer(),i),e.sourceEvent!=null&&(e.sourceEvent.type==="mousemove"||e.sourceEvent.type==="mouseup"||e.sourceEvent.type==="mousedown"||e.sourceEvent.type==="touchstart"||e.sourceEvent.type==="touchmove"||e.sourceEvent.type==="touchend")){(n===void 0||n[0]!==o[0]||n[1]!==o[1])&&this.services.zoom.handleDomainChange(o,{dispatchEvent:!1});let s;e.type==="start"?s=S.ZoomBar.SELECTION_START:e.type==="brush"?s=S.ZoomBar.SELECTION_IN_PROGRESS:e.type==="end"&&(s=S.ZoomBar.SELECTION_END,this.services.events.dispatchEvent(S.ZoomDomain.CHANGE,{newDomain:o})),this.services.events.dispatchEvent(s,{selection:i,newDomain:o})}}updateBrushHandle(e,n){const r=this,i=ce.handleWidth,o=y(this.getOptions(),"zoomBar",A.TOP,"type"),s=ce.height[o],a=-i/2,l=ce.handleBarWidth,c=o===Le.GRAPH_VIEW?ce.handleBarHeight:6,u=-l/2,h=(s-c)/2;e.select(this.brushSelector).selectAll("rect.handle").data([{type:"w"},{type:"e"}]).attr("x",function(d){if(d.type==="w")return Math.max(n[0]+a,r.maxSelectionRange[0]);if(d.type==="e")return Math.min(n[1]+a,r.maxSelectionRange[1]-i)}).attr("y",0).attr("width",i).attr("height",s).attr("cursor","ew-resize").style("display",null);const f=e.select(this.brushSelector).selectAll("rect.handle-bar").data([{type:"w"},{type:"e"}]);f.enter().append("rect").attr("class",function(d){return"handle-bar handle-bar--"+d.type}),f.attr("x",function(d){if(d.type==="w")return Math.max(n[0]+u,r.maxSelectionRange[0]-a+u);if(d.type==="e")return Math.min(n[1]+u,r.maxSelectionRange[1]+a+u)}).attr("y",h).attr("width",l).attr("height",c).attr("cursor","ew-resize"),o===Le.SLIDER_VIEW&&this.updateSliderSelectedArea(n),this.updateClipPath(e,this.clipId,n[0],0,n[1]-n[0],s)}updateSliderSelectedArea(e){const n=y(this.getOptions(),"zoomBar",A.TOP,"type"),r=ce.height[n],i=this.getComponentContainer().select("svg.zoom-container");R.appendOrSelect(i,"rect.zoom-slider-selected-area").attr("x",e[0]).attr("y",r/2-1).attr("width",e[1]-e[0]).attr("height",2)}renderZoomBarArea(e,n,r,i){const{cartesianScales:o}=this.services,s=o.getMainXAxisPosition(),a=o.getMainYAxisPosition(),l=o.getMainXScaleType(),c=o.getMainYScaleType(),u=(m,_,w)=>E=>o.getValueFromScale(m,_,w,E),h=u(this.xScale,l,s),f=u(this.yScale,c,a),d=y(this.getOptions(),"zoomBar",A.TOP,"type"),p=ce.height[d],v=al().x(m=>h(m)).y0(p).y1(m=>p-f(m)),g=R.appendOrSelect(e,n).datum(r).attr("d",v);i&&g.attr("clip-path",`url(#${i})`)}updateClipPath(e,n,r,i,o,s){const a=R.appendOrSelect(e,"clipPath").attr("id",n);R.appendOrSelect(a,"rect").attr("x",r).attr("y",i).attr("width",o).attr("height",s)}compensateDataForDefaultDomain(e,n){if(!e||e.length<2)return;const r=ko(e),i=this.services.cartesianScales.getDomainIdentifier(),o=this.services.cartesianScales.getRangeIdentifier();if(Number(n[0])<Number(r[0][i])){const s={};s[i]=n[0],s[o]=0,r.unshift(s)}if(Number(n[1])>Number(r[r.length-1][i])){const s={};s[i]=n[1],s[o]=0,r.push(s)}return r}renderZoomBarBaseline(e,n,r,i=!1){const o=y(this.model.getOptions(),"zoomBar",A.TOP,"type"),s=ce.height[o],a=sl()([[n,s],[r,s]]);R.appendOrSelect(e,"path.zoom-bg-baseline").attr("d",a).classed("zoom-bg-baseline-skeleton",i).style("stroke",i?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}renderSkeleton(e,n,r){this.renderZoomBarArea(e,"path.zoom-graph-area-unselected",[],null),this.renderZoomBarArea(e,"path.zoom-graph-area",[],this.clipId),this.brush.on("start brush end",null),R.appendOrSelect(this.getComponentContainer(),this.brushSelector).html(null),y(this.getOptions(),"zoomBar",A.TOP,"type")===Le.GRAPH_VIEW&&this.renderZoomBarBaseline(e,n,r,!0)}destroy(){this.brush.on("start brush end",null),this.services.events.removeEventListener(S.ZoomBar.UPDATE,this.render.bind(this))}}class mC extends Et{constructor(e,n){super(e,n),this.type="threshold",this.renderType=ft.SVG,this.positionService=new Fo}render(e=!1){const n=y(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values(A).includes(c)){const u=n[c];u.thresholds&&u.thresholds.length>0&&r.push({axisPosition:c,thresholds:u.thresholds,correspondingDatasets:u==null?void 0:u.correspondingDatasets,mapsTo:u==null?void 0:u.mapsTo})}});const i=this.getComponentContainer({withinChartClip:!0}).selectAll("g.axis-thresholds").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const o=i.enter().append("g").merge(i);o.attr("class",c=>`axis-thresholds ${c.axisPosition}`);const s=o.selectAll("g.threshold-group").data(c=>c.thresholds.map(u=>(u.axisPosition=c.axisPosition,u.datum=this.constructDatumObj(c,u),u)));s.exit().attr("opacity",0).remove();const a=s.enter().append("g");a.append("line").attr("class","threshold-line"),a.append("rect").attr("class","threshold-hoverable-area"),a.merge(s).attr("class","threshold-group");const l=this;o.each(function({axisPosition:c}){const u=l.services.cartesianScales.getScaleByPosition(c),h=l.services.cartesianScales.getScaleTypeByPosition(c);let f=null,d=null;c===A.LEFT||c===A.RIGHT?(d=u,f=l.services.cartesianScales.getMainXScale()):(f=u,d=l.services.cartesianScales.getMainYScale());const p=h===j.LABELS,[v,g]=f.range(),[m,_]=d.range(),{cartesianScales:w}=l.services,E=w.getOrientation(),x=I=>w.getDomainValue(I),T=I=>w.getRangeValue(I),[O,M]=Xn(x,T,E),P=D(this);c===A.TOP||c===A.BOTTOM?(P.selectAll("line.threshold-line").transition().call(I=>l.services.transitions.setupTransition({transition:I,name:"threshold-line-update",animate:e})).attr("y1",_).attr("y2",m).attr("x1",({datum:I})=>O(I)+(p?u.step()/2:0)).attr("x2",({datum:I})=>O(I)+(p?u.step()/2:0)).style("stroke",({fillColor:I})=>I),P.selectAll("rect.threshold-hoverable-area").attr("x",0).attr("y",({datum:I})=>-O(I)).attr("width",Math.abs(m-_)).classed("rotate",!0)):(P.selectAll("line.threshold-line").transition().call(I=>l.services.transitions.setupTransition({transition:I,name:"threshold-line-update",animate:e})).attr("x1",v).attr("x2",g).attr("y1",({datum:I})=>M(I)+(p?u.step()/2:0)).attr("y2",({datum:I})=>M(I)+(p?u.step()/2:0)).style("stroke",({fillColor:I})=>I),P.selectAll("rect.threshold-hoverable-area").attr("x",v).attr("y",({datum:I})=>M(I)).attr("width",Math.abs(g-v)).classed("rotate",!1))}),this.services.events.addEventListener(S.Threshold.SHOW,c=>{this.setThresholdLabelPosition(c.detail),this.label.classed("hidden",!1)}),this.services.events.addEventListener(S.Threshold.HIDE,()=>{this.label.classed("hidden",!0)}),this.appendThresholdLabel(),this.addEventListeners()}getFormattedValue(e){const{value:n,axisPosition:r}=e,i=this.getOptions(),o=this.services.cartesianScales.getScaleTypeByPosition(r),{code:s,number:a}=y(i,"locale");if(o===j.TIME){const l=[A.LEFT,A.RIGHT].includes(r),c=this.services.cartesianScales.getMainXScale(),u=this.services.cartesianScales.getMainYScale(),h=l?u:c,f=y(i,"timeScale"),d=Fs(h.ticks(),y(f,"timeInterval"));return Hs(n,0,h.ticks(),d,f,i.locale)}return a(n,s)}appendThresholdLabel(){const e=D(this.services.domUtils.getHolder()),n=y(this.getOptions(),"style","prefix");this.label=R.appendOrSelect(e,`div.${ne}--${n}--threshold--label`).classed("hidden",!0)}setThresholdLabelPosition({event:e,datum:n}){const r=this.services.domUtils.getHolder(),i=wn(e,r),o=n.valueFormatter?n.valueFormatter(n.value):this.getFormattedValue(n);this.label.html(Ie(`${n.label||"Threshold"}: ${o}`)).style("background-color",n.fillColor);const s=this.label.node(),a=this.positionService.findBestPlacementAt({left:i[0],top:i[1]},s,[Mt.RIGHT,Mt.LEFT,Mt.TOP,Mt.BOTTOM],()=>({top:void 0,left:void 0,width:r.offsetWidth,height:r.offsetHeight})),l=this.positionService.findPositionAt({left:i[0],top:i[1]},s,a);this.positionService.setElement(s,l)}constructDatumObj(e,n){const r={};return e.correspondingDatasets&&(r.group=y(e,"correspondingDatasets",0)),r[e.mapsTo]=n.value,r}addEventListeners(){const e=this;this.getComponentContainer({withinChartClip:!0}).selectAll("rect.threshold-hoverable-area").on("mouseover mousemove",function(n){D(this.parentNode).select("line.threshold-line").classed("active",!0),e.services.events.dispatchEvent(S.Threshold.SHOW,{event:n,hoveredElement:D(this),datum:D(this).datum()})}).on("mouseout",function(n){D(this.parentNode).select("line.threshold-line").classed("active",!1),e.services.events.dispatchEvent(S.Threshold.HIDE,{event:n,hoveredElement:D(this),datum:D(this).datum()})})}}class vC extends Et{constructor(e,n){super(e,n),this.type="highlight",this.renderType=ft.SVG,this.positionService=new Fo,this.highlightStrokeWidth=1}render(e=!1){const n=y(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values(A).includes(c)){const u=n[c];u.highlights&&u.highlights.data.length>0&&r.push({axisPosition:c,highlightStartMapsTo:u.highlights.highlightStartMapsTo,highlightEndMapsTo:u.highlights.highlightEndMapsTo,labelMapsTo:u.highlights.labelMapsTo,highlight:u.highlights.data,color:u.highlights.color})}});const i=this.getComponentContainer({withinChartClip:!0}).selectAll("g.axis-highlight").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const o=i.enter().append("g").merge(i);o.attr("class",c=>`axis-highlight ${c.axisPosition}`);const s=o.selectAll("g.highlight-group").data(c=>c.highlight.map(u=>(u.axisPosition=c.axisPosition,u.highlightStartMapsTo=c.highlightStartMapsTo,u.labelMapsTo=c.labelMapsTo,u.color=c.color,u.highlightEndMapsTo=c.highlightEndMapsTo,u)));s.exit().attr("opacity",0).remove();const a=s.enter().append("g");a.append("rect").attr("class","highlight-bar"),a.append("line").attr("class","highlight-line"),a.merge(s).attr("class","highlight-group");const l=this;o.each(function({axisPosition:c}){const u=l.services.cartesianScales.getMainXScale(),h=l.services.cartesianScales.getMainYScale(),[f,d]=u.range(),[p,v]=h.range(),{cartesianScales:g}=l.services,m=g.getOrientation(),_=O=>g.getDomainValue(O),w=O=>g.getRangeValue(O),[E,x]=Xn(_,w,m),T=D(this);c===A.TOP||c===A.BOTTOM?T.selectAll("rect.highlight-bar").transition().call(O=>l.services.transitions.setupTransition({transition:O,name:"highlight-bar-update",animate:e})).attr("y",Math.max(v+l.highlightStrokeWidth,0)).attr("height",Math.max(p-2*l.highlightStrokeWidth,0)).attr("x",({highlightStartMapsTo:O,...M})=>E(M[O])).attr("width",({highlightStartMapsTo:O,highlightEndMapsTo:M,...P})=>Math.max(E(P[M])-E(P[O]),0)).style("stroke",({color:O,labelMapsTo:M,...P})=>O&&O.scale[P[M]]?O.scale[P[M]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:O,labelMapsTo:M,...P})=>O&&O.scale[P[M]]?O.scale[P[M]]:null):T.selectAll("rect.highlight-bar").transition().call(O=>l.services.transitions.setupTransition({transition:O,name:"highlight-bar-update",animate:e})).attr("x",f).attr("width",Math.max(d-f,0)).attr("y",({highlightEndMapsTo:O,...M})=>x(M[O])).attr("height",({highlightStartMapsTo:O,highlightEndMapsTo:M,...P})=>Math.max(x(P[O])-x(P[M]),0)).style("stroke",({color:O,labelMapsTo:M,...P})=>O&&O.scale[P[M]]?O.scale[P[M]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:O,labelMapsTo:M,...P})=>O&&O.scale[P[M]]?O.scale[P[M]]:null)})}}class yC extends dp{getItems(e){if(e.detail.items)return e.detail.items;const{data:n}=e.detail;if(!n||!n.length||!n[0])return[];const r=this.getOptions(),{cartesianScales:i}=this.services,o=i.getDomainIdentifier(),s=i.isDualAxes(),{groupMapsTo:a}=r.data,l=i.getDomainLabel();let c=i.getRangeLabel();const u=n[0][o];let h;if(n.length===1){const f=n[0],d=i.getRangeIdentifier(f);if(s){const v=i.getRangeAxisPosition({datum:f,groups:[f[a]]});c=i.getScaleLabel(v)}const p=f[d];h=[{label:l,value:u},...Array.isArray(p)&&p.length===2?[{label:"Start",value:p[0]},{label:"End",value:p[1]}]:[{label:c,value:f[d]}]],e.detail.additionalItems&&e.detail.additionalItems.forEach(v=>h.push({label:v.label,value:v.value})),h.push({label:Hn(r,"locale.translations.group")||Hn(r,"tooltip.groupLabel"),value:f[a],color:this.model.getFillColor(f[a]),class:this.model.getColorClassName({classNameTypes:[Ut.TOOLTIP],dataGroupName:f[a]})})}else if(n.length>1&&(h=[{label:l,value:u}],h=h.concat(n.map(f=>{const d=f[i.getRangeIdentifier(f)];return{label:f[a],value:Array.isArray(d)&&d.length===2?`${d[0]} - ${d[1]}`:d,color:this.model.getFillColor(f[a]),class:this.model.getColorClassName({classNameTypes:[Ut.TOOLTIP],dataGroupName:f[a]})}}).sort((f,d)=>d.value-f.value)),!s&&y(r,"tooltip","showTotal")===!0)){const f=i.getRangeIdentifier();h.push({label:Hn(r,"locale.translations.total")||Hn(r,"tooltip.totalLabel")||"Total",value:n.reduce((d,p)=>d+p[f],0),bold:!0})}return h}}var da=Math.PI,fa=2*da,vn=1e-6,bC=fa-vn;function Uu(){this._x0=this._y0=this._x1=this._y1=null,this._=""}Uu.prototype={constructor:Uu,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,s=this._y1,a=n-t,l=r-e,c=o-t,u=s-e,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>vn)if(!(Math.abs(u*a-l*c)>vn)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var f=n-o,d=r-s,p=a*a+l*l,v=f*f+d*d,g=Math.sqrt(p),m=Math.sqrt(h),_=i*Math.tan((da-Math.acos((p+h-v)/(2*g*m)))/2),w=_/m,E=_/g;Math.abs(w-1)>vn&&(this._+="L"+(t+w*c)+","+(e+w*u)),this._+="A"+i+","+i+",0,0,"+ +(u*f>c*d)+","+(this._x1=t+E*a)+","+(this._y1=e+E*l)}},arc:function(t,e,n,r,i,o){t=+t,e=+e,n=+n,o=!!o;var s=n*Math.cos(r),a=n*Math.sin(r),l=t+s,c=e+a,u=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>vn||Math.abs(this._y1-c)>vn)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%fa+fa),h>bC?this._+="A"+n+","+n+",0,1,"+u+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>vn&&(this._+="A"+n+","+n+",0,"+ +(h>=da)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};class pp extends Et{constructor(){super(...arguments),this.type="grid",this.renderType=ft.SVG}render(e=!0){const n=y(this.getOptions(),"grid","x","enabled"),r=y(this.getOptions(),"grid","y","enabled");this.drawBackdrop(n,r),!(!n&&!r)&&(n&&(R.appendOrSelect(this.backdrop,"g.x.grid"),this.drawXGrid(e)),r&&(R.appendOrSelect(this.backdrop,"g.y.grid"),this.drawYGrid(e)))}drawXGrid(e){const n=this.parent,r=this.backdrop.attr("height"),i=this.services.cartesianScales.getMainXScale(),o=Vf(i).tickSizeInner(-r).tickSizeOuter(0);if(y(this.getOptions(),"grid","x","alignWithAxisTicks")){const a=this.services.cartesianScales.getDomainAxisPosition(),l=y(this.getOptions(),"axes",a,"ticks","values");l&&o.tickValues(l)}else{const a=y(this.getOptions(),"grid","x","numberOfTicks");o.ticks(a)}const s=n.select(".x.grid").attr("transform",`translate(${-this.backdrop.attr("x")}, ${r})`);e?s.transition().call(a=>this.services.transitions.setupTransition({transition:a,name:"grid-update",animate:e})).call(o):s.call(o),this.cleanGrid(s)}drawYGrid(e){const n=this.parent,r=this.backdrop.attr("width"),i=this.services.cartesianScales.getMainYScale(),o=jf(i).tickSizeInner(-r).tickSizeOuter(0);if(y(this.getOptions(),"grid","y","alignWithAxisTicks")){const a=this.services.cartesianScales.getRangeAxisPosition(),l=y(this.getOptions(),"axes",a,"ticks","values");l&&o.tickValues(l)}else{const a=y(this.getOptions(),"grid","y","numberOfTicks");o.ticks(a)}const s=n.select(".y.grid").attr("transform",`translate(0, ${-this.backdrop.attr("y")})`);e?s.transition().call(a=>this.services.transitions.setupTransition({transition:a,name:"grid-update",animate:e})).call(o):s.call(o),this.cleanGrid(s)}getGridlineThreshold(e){const n=this.parent,r=n.selectAll(".x.grid .tick").nodes().sort((u,h)=>Number(ze(u).tx)-Number(ze(h).tx));let i=-1;if(!r.length)return;r.forEach(u=>{e[0]>=+ze(u).tx&&i++});const o=i+1<r.length?i+1:r.length,s=r[i],a=r[o];let l;if(!s)l=+ze(a).tx;else if(a)l=+ze(a).tx-+ze(s).tx;else{const u=n.select("rect.chart-grid-backdrop").node();l=R.getSVGElementSize(u).width-+ze(s).tx}const{threshold:c}=this.getOptions().tooltip.gridline;return l*c}getActiveGridline(e){const n=y(this.getOptions,"tooltip","gridline","threshold"),r=n||this.getGridlineThreshold(e);return this.parent.selectAll(".x.grid .tick").filter(function(){const i=ze(this),o={min:Number(i.tx)-r,max:Number(i.tx)+r};return o.min<=e[0]&&e[0]<=o.max})}drawBackdrop(e,n){const r=this.parent,i=this.services.cartesianScales.getMainXScale(),o=this.services.cartesianScales.getMainYScale(),[s,a]=i.range(),[l,c]=o.range();this.backdrop=R.appendOrSelect(r,"svg.chart-grid-backdrop");const u=R.appendOrSelect(this.backdrop,e||n?"rect.chart-grid-backdrop.stroked":"rect.chart-grid-backdrop");this.backdrop.merge(u).attr("x",s).attr("y",c).attr("width",Math.abs(a-s)).attr("height",Math.abs(l-c)).lower(),u.attr("width","100%").attr("height","100%")}cleanGrid(e){e.selectAll("text").remove(),e.select(".domain").remove()}}class _C extends Et{constructor(){super(...arguments),this.type="area",this.renderType=ft.SVG,this.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999),this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.area").transition("legend-hover-area").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-area"})).attr("opacity",r=>r.name!==n.datum().name?We.opacity.unselected:We.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",We.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions();let i=[0,0];const{cartesianScales:o}=this.services,s=o.getOrientation(),a=al().curve(this.services.curves.getD3Curve()).defined(x=>{const T=o.getRangeIdentifier();return x[T]!=null}),l=this.model.getGroupedData(this.configs.groups),c=y(r,"bounds"),u=c&&l&&l.length===1;!u&&c&&console.warn(`Bounds can only be shown when having 1 single datagroup, you've supplied ${l.length}`);let h=0;const f=(x,T)=>{y(r,"axes",x,"includeZero")===!1&&T[0]>0&&T[1]>0&&(h=T[0])},d=x=>u?o.getBoundedScaledValues(x)[0]:o.getRangeValue(h),p=x=>u?o.getBoundedScaledValues(x)[1]:o.getRangeValue(x);s===Jt.VERTICAL?(i=o.getMainYScale().domain(),f(o.getMainYAxisPosition(),i),a.x(x=>o.getDomainValue(x)).y0(x=>d(x)).y1(x=>p(x))):(i=o.getMainXScale().domain(),f(o.getMainXAxisPosition(),i),a.x0(x=>d(x)).x1(x=>p(x)).y(x=>o.getDomainValue(x)));const v=y(r,"color","gradient","enabled"),g=l&&l.length===1&&v;l.length>1&&v&&console.error("Gradients can only be enabled when having 1 single dataset");const m=n.selectAll("path.area").data(l,x=>x.name),_=D(this.services.domUtils.getMainContainer());if(m.exit().attr("opacity",0).remove(),!l.length)return;if(g){const x=_.select(`path.${this.model.getColorClassName({classNameTypes:[Ut.STROKE],dataGroupName:l[0].name})}`).node();let T;if(x)T=getComputedStyle(x,null).getPropertyValue("stroke");else{const O=y(this.model.getOptions(),"color","scale");if(O!==null){const M=Object.keys(O);T=O[M[0]]}}js.appendOrUpdateLinearGradient({svg:this.parent,id:this.services.domUtils.generateElementIDString(`${l[0].name.replace(" ","")}_${this.gradient_id}`),x1:"0%",x2:"0%",y1:"0%",y2:"100%",stops:js.getStops(i,T)})}else this.parent.selectAll("defs linearGradient").empty()||this.parent.selectAll("defs linearGradient").each(function(){this.parentNode.remove()});const w=this,E=m.enter().append("path");g?E.merge(m).style("fill",x=>`url(#${this.services.domUtils.generateElementIDString(`${x.name.replace(" ","")}_${this.gradient_id}`)})`).attr("class","area").attr("class",x=>this.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:x.name,originalClassName:"area"})).attr("d",x=>{const{data:T}=x;return a(T)}):(E.attr("opacity",0).merge(m).attr("class","area").attr("class",x=>this.model.getColorClassName({classNameTypes:[Ut.FILL,Ut.STROKE],dataGroupName:x.name,originalClassName:"area"})).style("fill",x=>w.model.getFillColor(x.name,null,x.data)).transition().call(x=>this.services.transitions.setupTransition({transition:x,name:"area-update-enter",animate:e})).attr("opacity",u?1:We.opacity.selected).attr("d",x=>{const{data:T}=x;return a(T)}),u&&E.attr("fill-opacity",We.opacity.selected).style("stroke",x=>w.model.getStrokeColor(x.name,null,x.data)).style("stroke-dasharray","2, 2").attr("stroke-width",.7+"px"))}destroy(){const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class ki extends Et{constructor(){super(...arguments),this.type="line",this.renderType=ft.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.line").transition("legend-hover-line").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-line"})).attr("opacity",r=>r.name!==n.datum().name?Qo.opacity.unselected:Qo.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.line").transition("legend-mouseout-line").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-line"})).attr("opacity",Qo.opacity.selected)}}init(){const{events:e}=this.services;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),{cartesianScales:r,curves:i}=this.services,o=d=>r.getDomainValue(d),s=d=>r.getRangeValue(d),[a,l]=Xn(o,s,r.getOrientation()),c=this.getOptions(),u=sl().x(a).y(l).curve(i.getD3Curve()).defined(d=>{const p=r.getRangeIdentifier(d);return d[p]!=null});let h=[];if(this.configs.stacked){const d=Object.keys(c.axes).some(v=>c.axes[v].percentage),{groupMapsTo:p}=c.data;h=this.model.getStackedData({groups:this.configs.groups,percentage:d}).map(v=>{const g=this.services.cartesianScales.getDomainIdentifier(v),m=this.services.cartesianScales.getRangeIdentifier(v);return{name:y(v,0,p),data:v.map(_=>({[g]:_.data.sharedStackKey,[p]:_[p],[m]:_[1]})),hidden:!kS(v,_=>_[0]!==_[1])}})}else h=this.model.getGroupedData(this.configs.groups);const f=n.selectAll("path.line").data(h,d=>d.name);f.exit().attr("opacity",0).remove(),f.enter().append("path").classed("line",!0).attr("opacity",0).merge(f).data(h,d=>d.name).attr("class",d=>this.model.getColorClassName({classNameTypes:[Ut.STROKE],dataGroupName:d.name,originalClassName:"line"})).style("stroke",d=>this.model.getStrokeColor(d.name,null,d.data)).attr("role",$t.GRAPHICS_SYMBOL).attr("aria-roledescription","line").attr("aria-label",d=>{const{data:p}=d;return p.map(v=>{const g=this.services.cartesianScales.getRangeIdentifier(v);return v[g]}).join(",")}).transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"line-update-enter",animate:e})).attr("opacity",d=>d.hidden?0:1).attr("d",d=>{const{data:p}=d;return u(p)})}destroy(){const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}const Hu=5;function wC(t,e){return t>e-Hu&&t<e+Hu}class gp extends Et{constructor(){super(...arguments),this.type="ruler",this.renderType=ft.SVG,this.isXGridEnabled=y(this.getOptions(),"grid","x","enabled"),this.isYGridEnabled=y(this.getOptions(),"grid","y","enabled"),this.isEventListenerAdded=!1}render(e=!1){const n=y(this.getOptions(),"ruler","enabled");this.drawBackdrop(),n&&!this.isEventListenerAdded?this.addBackdropEventListeners():!n&&this.isEventListenerAdded&&this.removeBackdropEventListeners()}removeBackdropEventListeners(){this.isEventListenerAdded=!1,this.backdrop.on("mousemove mouseover mouseout",null)}formatTooltipData(e){return e}showRuler(e,[n,r]){const i=this.parent,o=this.services.cartesianScales.getOrientation(),s=this.model.getDisplayData(),a=this.services.cartesianScales.getRangeScale(),[l,c]=a.range(),u=o===Jt.HORIZONTAL?r:n,h=R.appendOrSelect(i,"g.ruler").attr("aria-label","ruler"),f=R.appendOrSelect(h,"line.ruler-line"),d=i.selectAll("[role=graphics-symbol]"),p=s.map(g=>({domainValue:this.services.cartesianScales.getDomainValue(g),originalData:g})).filter(g=>wC(g.domainValue,u));if(this.pointsWithinLine&&p.length===this.pointsWithinLine.length&&p.map(g=>g.domainValue).join()===this.pointsWithinLine.map(g=>g.domainValue).join())return this.pointsWithinLine=p,this.services.events.dispatchEvent(S.Tooltip.MOVE,{mousePosition:[n,r]});this.pointsWithinLine=p;const v=this.pointsWithinLine.reduce((g,m)=>{if(g.length===0)return g.push(m),g;const _=g[0].domainValue,w=Math.abs(u-m.domainValue),E=Math.abs(u-_);return w>E||(w<E?g=[m]:g.push(m)),g},[]);if(v.length>0){const g=v.map(E=>E.originalData).filter(E=>{const x=this.services.cartesianScales.getRangeIdentifier(E);return E[x]!=null}),m=v.map(E=>E.domainValue),_=d.filter(E=>{const x=this.services.cartesianScales.getDomainValue(E);return m.includes(x)});this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!CS(this.elementsToHighlight,_)&&this.hideRuler(),_.dispatch("mouseover"),this.elementsToHighlight=_,this.services.events.dispatchEvent(S.Tooltip.SHOW,{event:e,mousePosition:[n,r],hoveredElement:f,data:this.formatTooltipData(g)}),h.attr("opacity",1);const w=v[0];o==="horizontal"?f.attr("x1",c).attr("x2",l).attr("y1",w.domainValue).attr("y2",w.domainValue):f.attr("y1",c).attr("y2",l).attr("x1",w.domainValue).attr("x2",w.domainValue)}else this.hideRuler()}hideRuler(){const e=this.parent,n=R.appendOrSelect(e,"g.ruler");e.selectAll("[role=graphics-symbol]").dispatch("mouseout"),this.services.events.dispatchEvent(S.Tooltip.HIDE),n.attr("opacity",0)}addBackdropEventListeners(){this.isEventListenerAdded=!0;const e=this,n=this.services.domUtils.getHolder(),r=this.model.getDisplayData();let i=function(o){const s=wn(o,e.parent.node());e.showRuler(o,s)};if(r.length>100){const o=r.length%50*12.5;i=rT(function(s){const{mousePosition:a}=this;e.showRuler(s,a)},o,n)}this.backdrop.on("mousemove mouseover",i).on("mouseout",this.hideRuler.bind(this))}drawBackdrop(){const e=this.parent;this.backdrop=R.appendOrSelect(e,"svg.chart-grid-backdrop")}}class Ir extends Et{constructor(){super(...arguments),this.type="scatter",this.renderType=ft.SVG,this.handleChartHolderOnHover=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-hover-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-hover-scatter"})}).attr("opacity",1)},this.handleChartHolderOnMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-mouseout-scatter"})}).attr("opacity",0)},this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-hover-scatter").call(i=>{var o;return(o=this.services.transitions)==null?void 0:o.setupTransition({transition:i,name:"legend-hover-scatter"})}).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"legend-mouseout-scatter"})}).attr("opacity",1)}}init(){const{events:e}=this.services;if(!e)throw new Error("Services events are undefined.");e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut);const{fadeInOnChartHolderMouseover:n}=this.configs;n&&(e.addEventListener(S.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.addEventListener(S.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut))}filterBasedOnZoomDomain(e){const{cartesianScales:n}=this.services;if(!n)throw new Error("Services cartesianScales are undefined.");const r=n.getDomainIdentifier(e),i=this.model.get("zoomDomain");return i!==void 0?e.filter(o=>o[r].getTime()>=i[0].getTime()&&o[r].getTime()<=i[1].getTime()):e}getScatterData(){const e=this.getOptions(),{stacked:n}=this.configs;let r;if(n){const i=Object.keys(e.axes).some(o=>e.axes[o].percentage);r=this.model.getStackedData({groups:this.configs.groups,percentage:i})}else{const{cartesianScales:i}=this.services;if(!i)throw new Error("Services cartesianScales are undefined.");r=this.model.getDisplayData(this.configs.groups).filter(o=>{const s=i.getRangeIdentifier(o);return o[s]!==void 0&&o[s]!==null})}return this.filterBasedOnZoomDomain(r)}render(e){if(!(y(this.getOptions(),"points","enabled")||y(this.getOptions(),"bubble","enabled")))return;const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,{cartesianScales:o}=this.services;if(!o)throw new Error("Services cartesianScales are undefined.");const s=o.getDomainIdentifier(),a=n.selectAll("circle.dot").data(this.getScatterData(),c=>`${c[i]}-${c[s]}`);a.exit().attr("opacity",0).remove();const l=a.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(a);this.styleCircles(l,e),this.addEventListeners()}isDatapointThresholdAnomaly(e){const{handleThresholds:n}=this.configs;if(!n)return!1;const{cartesianScales:r}=this.services;if(!r)throw new Error("Cartesian scales service is undefined");const i=r.getOrientation(),[o,s]=Xn(r.getHighestDomainThreshold(),r.getHighestRangeThreshold(),i),[a,l]=Xn(h=>r.getDomainValue(h),h=>r.getRangeValue(h),i),c=a(e),u=l(e);return s&&o?u<=s.scaleValue&&c>=o.scaleValue:s?u<=s.scaleValue:o?c>=o.scaleValue:!1}styleCircles(e,n){const r=this.getOptions(),{filled:i,fillOpacity:o}=r.points,{cartesianScales:s}=this.services;if(!s)throw new Error("Cartesian scales service is undefined");const{groupMapsTo:a}=r.data,l=d=>s.getDomainValue(d),c=d=>s.getRangeValue(d),[u,h]=Xn(l,c,s.getOrientation()),{fadeInOnChartHolderMouseover:f}=this.configs;e.raise().classed("dot",!0).attr("class",d=>{const p=s.getDomainIdentifier(d),v=this.model.getIsFilled(d[a],d[p],d,i)?[Ut.FILL,Ut.STROKE]:[Ut.STROKE];return this.model.getColorClassName({classNameTypes:v,dataGroupName:d[a],originalClassName:"dot"})||""}).classed("threshold-anomaly",d=>this.isDatapointThresholdAnomaly(d)).classed("filled",d=>{const p=s.getDomainIdentifier(d);return this.model.getIsFilled(d[a],d[p],d,i)}).classed("unfilled",d=>{const p=s.getDomainIdentifier(d);return!this.model.getIsFilled(d[a],d[p],d,i)}).transition().call(d=>{var p;return(p=this.services.transitions)==null?void 0:p.setupTransition({transition:d,name:"scatter-update-enter",animate:n})}).attr("cx",u).attr("cy",h).attr("r",r.points.radius).style("fill",d=>{const p=s.getDomainIdentifier(d);if(this.model.getIsFilled(d[a],d[p],d,i))return this.model.getFillColor(d[a],d[p],d)}).style("stroke",d=>{const p=s.getDomainIdentifier(d);return this.model.getStrokeColor(d[a],d[p],d)}).attr("fill-opacity",i?o:1).attr("opacity",f?0:1).attr("role",$t.GRAPHICS_SYMBOL).attr("aria-roledescription","point").attr("aria-label",d=>{const p=s.getRangeIdentifier(d);return d[p]}),this.addEventListeners()}getTooltipAdditionalItems(e){return null}addEventListeners(){const e=this,{groupMapsTo:n}=e.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle").on("mouseover",function(r,i){var o,s;const a=D(this);a.classed("hovered",!0).attr("class",l=>e.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:l[n],originalClassName:a.attr("class")})).style("fill",l=>{var c;const u=(c=e.services.cartesianScales)==null?void 0:c.getDomainIdentifier(l);return e.model.getFillColor(l[n],l[u],l)}).classed("unfilled",!1),(o=e.services.events)==null||o.dispatchEvent(S.Tooltip.SHOW,{event:r,hoveredElement:a,data:[i],additionalItems:e.getTooltipAdditionalItems(i)}),(s=e.services.events)==null||s.dispatchEvent(S.Scatter.SCATTER_MOUSEOVER,{event:r,element:a,datum:i})}).on("mousemove",function(r,i){var o,s;const a=D(this);(o=e.services.events)==null||o.dispatchEvent(S.Scatter.SCATTER_MOUSEMOVE,{event:r,element:a,datum:i}),(s=e.services.events)==null||s.dispatchEvent(S.Tooltip.MOVE,{event:r})}).on("click",function(r,i){var o;(o=e.services.events)==null||o.dispatchEvent(S.Scatter.SCATTER_CLICK,{event:r,element:D(this),datum:i})}).on("mouseout",function(r,i){var o,s,a;const l=D(this);if(l.classed("hovered",!1),!e.configs.filled){const{filled:c}=e.getOptions().points,u=(o=e.services.cartesianScales)==null?void 0:o.getDomainIdentifier(i),h=e.model.getIsFilled(i[n],i[u],i,c);l.classed("unfilled",!h).style("fill",f=>h||c?e.model.getFillColor(f[n],f[u],f):null)}(s=e.services.events)==null||s.dispatchEvent(S.Scatter.SCATTER_MOUSEOUT,{event:r,element:l,datum:i}),(a=e.services.events)==null||a.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:l})})}destroy(){var e;(e=this.parent)==null||e.selectAll("circle").on("mousemove",null).on("mouseout",null);const{events:n}=this.services;if(!n)throw new Error("Services events undefined");n.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),n.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),n.removeEventListener(S.Chart.MOUSEOVER,this.handleChartHolderOnHover),n.removeEventListener(S.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut)}}class mp extends Et{constructor(e,n,r){super(e,n,r),this.type="axes",this.renderType=ft.SVG,this.truncation={[A.LEFT]:!1,[A.RIGHT]:!1,[A.TOP]:!1,[A.BOTTOM]:!1},r&&(this.configs=r),this.margins=this.configs.margins}render(e=!0){const{position:n}=this.configs,r=this.getOptions(),i=y(r,"axes",n,"visible"),o=this.getComponentContainer(),{width:s,height:a}=R.getSVGElementSize(o,{useAttrs:!0}),l=R.appendOrSelect(o,`g.axis.${n}`);let c,u;if(n===A.BOTTOM||n===A.TOP?(c=this.configs.axes[A.LEFT]?this.margins.left:0,u=this.configs.axes[A.RIGHT]?s-this.margins.right:s):(c=a-this.margins.bottom,u=this.margins.top),!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const h=this.services.cartesianScales.getScaleByPosition(n);this.scaleType===j.LABELS||this.scaleType===j.LABELS_RATIO?h.rangeRound([c,u]):h.range([c,u]);let f;switch(n){case A.LEFT:f=jf;break;case A.BOTTOM:f=Vf;break;case A.RIGHT:f=US;break;case A.TOP:f=BS;break}l.attr("aria-label",`${n} axis`);const d=!l.select("g.ticks").empty();let p=R.appendOrSelect(l,"g.ticks");d||(p.attr("role",`${$t.GRAPHICS_OBJECT} ${$t.GROUP}`),p.attr("aria-label",`${n} ticks`));const v=R.appendOrSelect(l,"g.ticks.invisible").style("opacity","0").style("pointer-events","none").attr("aria-hidden",!0).attr("aria-label",`invisible ${n} ticks`),g=y(r,"axes",n),m=this.scaleType===j.TIME||g.scaleType===j.TIME,_=n===A.LEFT||n===A.RIGHT,w=this.model.get("zoomDomain");if(w&&m&&!_&&h.domain(w),!i){p.attr("aria-hidden",!0);return}const E=y(g,"scaleType"),x=y(r,"data","loading"),T=y(g,"ticks","number"),O=y(g,"ticks","values"),M=y(g,"truncation","type"),P=y(g,"truncation","threshold"),I=y(g,"truncation","numCharacter"),k=T!==null,W=y(r,"timeScale"),L=R.appendOrSelect(v,"g.tick"),H=R.appendOrSelect(L,"text").text("0"),at=R.getSVGElementSize(H.node(),{useBBox:!0}).height;L.remove();const nt=this.scaleType||g.scaleType||j.LINEAR,G=f(h).tickSizeOuter(0);if(h.ticks){let B;if(k?B=T:(B=an.ticks.number,_&&(B=this.getNumberOfFittingTicks(a,at,an.ticks.verticalSpaceRatio))),h.ticks().length===1&&h.ticks()[0]===0&&(B=0),G.ticks(B),m)if(!h.ticks(B).length)G.tickValues([]);else{const z=y(r,"timeScale","addSpaceOnEdges"),rt=y(r,"axes",n,"domain"),$=h.copy();z&&!rt&&$.nice(B);const U=$.ticks(B);z&&U.length>2&&!rt&&(U.splice(U.length-1,1),U.splice(0,1)),G.tickValues(U)}}let Q;const X=y(g,"ticks","formatter"),{code:lt,number:Y}=y(r,"locale");if(m){const B=Fs(G.tickValues(),y(r,"timeScale","timeInterval"));X===null?Q=(z,rt)=>Hs(z,rt,G.tickValues(),B,W,r.locale):Q=(z,rt)=>{const $=Hs(z,rt,G.tickValues(),B,W,r.locale);return X(z,rt,$)}}else X===null?nt===j.LINEAR&&(Q=B=>Y(B,lt)):Q=X;G.tickFormat(Q);const[tt,ot]=this.services.cartesianScales.getScaleByPosition(n).domain();let Ot;if(O){if(m)O.forEach((B,z)=>{B.getTime===void 0&&(O[z]=new Date(B))}),Ot=O.filter(B=>{const z=B.getTime();return z>=new Date(tt).getTime()&&z<=new Date(ot).getTime()});else if(E===j.LABELS){const B=this.services.cartesianScales.getScaleByPosition(n).domain();Ot=O.filter(z=>B.includes(z))}else Ot=O.filter(B=>B>=tt&&B<=ot);G.tickValues(Ot)}switch(n){case A.LEFT:p.attr("transform",`translate(${this.margins.left}, 0)`);break;case A.BOTTOM:p.attr("transform",`translate(0, ${a-this.margins.bottom})`);break;case A.RIGHT:p.attr("transform",`translate(${s-this.margins.right}, 0)`);break;case A.TOP:p.attr("transform",`translate(0, ${this.margins.top})`);break}const q=this.model.isDataEmpty();if(g.title){const B=R.appendOrSelect(l,"text.axis-title").html(q||x?"":Ie(g.title)),z=y(g,"titleOrientation");let rt;switch(n){case A.LEFT:z===xs.RIGHT?B.attr("transform","rotate(90)").attr("y",0).attr("x",h.range()[0]/2).attr("dy","-0.5em").style("text-anchor","middle"):B.attr("transform","rotate(-90)").attr("y",0).attr("x",-(h.range()[0]/2)).attr("dy","0.75em").style("text-anchor","middle");break;case A.BOTTOM:B.attr("transform",`translate(${this.margins.left/2+h.range()[1]/2}, ${a+4})`).style("text-anchor","middle");break;case A.RIGHT:z===xs.LEFT?B.attr("transform","rotate(-90)").attr("y",s).attr("x",-(h.range()[0]/2)).style("text-anchor","middle"):B.attr("transform","rotate(90)").attr("y",-s).attr("x",h.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case A.TOP:rt=R.getSVGElementSize(B,{useBBox:!0}).height,B.attr("transform",`translate(${this.margins.left/2+h.range()[1]/2}, ${rt/2})`).style("text-anchor","middle");break}}if(m){const B=Fs(G.tickValues(),y(r,"timeScale","timeInterval")),z=W.showDayName,rt=p;e&&(p=p.transition().call($=>this.services.transitions.setupTransition({transition:$,name:"axis-update",animate:e}))),p=p.call(G),rt.selectAll(".tick").data(G.tickValues(),h).order().select("text").style("font-weight",($,U)=>_f($,U,G.tickValues(),B,z)?"bold":"normal")}else!e||!d?p=p.call(G):p=p.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"axis-update",animate:e})).call(G);if(v.call(G),n===A.BOTTOM||n===A.TOP){let B=!1;const z=y(g,"ticks","rotation");if(z===_i.ALWAYS)B=!0;else if(z===_i.NEVER)B=!1;else if(!z||z===_i.AUTO)if(h.step)B=v.selectAll("g.tick text").nodes().some(rt=>R.getSVGElementSize(rt,{useBBox:!0}).width>=h.step());else{B=!1;const rt=v.append("text").text("A"),$=R.getSVGElementSize(rt.node(),{useBBox:!0}).width;let U;v.selectAll("g.tick").each(function(){const Z=D(this),C=parseFloat(y(ze(this),"tx"));C!==null&&U+Z.text().length*$*.8>=C&&(B=!0),U=C}),rt.remove()}B?(k||(G.ticks(this.getNumberOfFittingTicks(s,at,an.ticks.horizontalSpaceRatio)),v.call(G),p.call(G)),l.selectAll("g.ticks g.tick text").attr("transform","rotate(-45)").attr("text-anchor",n===A.TOP?"start":"end")):l.selectAll("g.ticks g.tick text").attr("transform",null).attr("text-anchor",null)}if(x?l.attr("opacity",0):l.attr("opacity",1),p.selectAll("g.tick").attr("aria-label",B=>B),v.selectAll("g.tick").attr("aria-label",B=>B),M!==xe.NONE&&E===j.LABELS&&!O){const B=this.services.cartesianScales.getScaleDomain(n);if(B.length>0){const z=o.select(`g.axis.${n} g.ticks g.tick`).html();l.selectAll("g.ticks g.tick").html(z);const rt=this;l.selectAll("g.tick text").data(B).text(function($){return $.length>P?(rt.truncation[n]=!0,Zr($,M,I)):$}),this.getInvisibleAxisRef().selectAll("g.tick text").data(B).text(function($){return $.length>P?Zr($,M,I):$}),l.selectAll("g.ticks").html(this.getInvisibleAxisRef().html()),l.selectAll("g.tick text").data(B)}}this.addEventListeners()}addEventListeners(){const e=this.getComponentContainer(),{position:n}=this.configs,r=R.appendOrSelect(e,`g.axis.${n}`),i=this.getOptions(),o=y(i,"axes",n),s=y(o,"scaleType"),a=y(o,"truncation","threshold"),l=this;r.selectAll("g.tick text").on("mouseover",function(c,u){l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEOVER,{event:c,element:D(this),datum:u}),s===j.LABELS&&u.length>a&&l.services.events.dispatchEvent(S.Tooltip.SHOW,{event:c,hoveredElement:D(this),content:u})}).on("mousemove",function(c,u){l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEMOVE,{event:c,element:D(this),datum:u}),s===j.LABELS&&u.length>a&&l.services.events.dispatchEvent(S.Tooltip.MOVE,{event:c})}).on("click",function(c,u){l.services.events.dispatchEvent(S.Axis.LABEL_CLICK,{event:c,element:D(this),datum:u})}).on("mouseout",function(c,u){l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEOUT,{event:c,element:D(this),datum:u}),s===j.LABELS&&l.services.events.dispatchEvent(S.Tooltip.HIDE)})}getInvisibleAxisRef(){const{position:e}=this.configs;return this.getComponentContainer().select(`g.axis.${e} g.ticks.invisible`)}getTitleRef(){const{position:e}=this.configs;return this.getComponentContainer().select(`g.axis.${e} text.axis-title`)}getNumberOfFittingTicks(e,n,r){const i=Math.floor(e/(n*r));return SS(i,2,an.ticks.number)}destroy(){const e=this.getComponentContainer(),{position:n}=this.configs;R.appendOrSelect(e,`g.axis.${n}`).selectAll("g.tick text").on("mouseover",null).on("mousemove",null).on("mouseout",null)}}class xC extends mp{constructor(e,n,r){super(e,n,r)}render(e=!0){super.render(e),super.destroy();const n=this.configs.position,r=this.getComponentContainer(),i=R.appendOrSelect(r,`g.axis.${n}`),o=this;i.selectAll("g.tick").each(function(s,a){const l=D(this);l.classed("tick-hover",!0).attr("tabindex",a===0?0:-1);const c=l.select("text"),{width:u,height:h}=R.getSVGElementSize(c,{useBBox:!0}),f=R.appendOrSelect(l,"rect.axis-holder");let d=0,p=0;switch(n){case A.LEFT:d=-u+Number(c.attr("x")),p=-(h/2);break;case A.RIGHT:d=Math.abs(Number(c.attr("x"))),p=-(h/2);break;case A.TOP:d=-(u/2),p=-h+Number(c.attr("y"))/2,o.truncation[n]&&(d=0,f.attr("transform","rotate(-45)"));break;case A.BOTTOM:d=-(u/2),p=h/2-2,o.truncation[n]&&(d=-u,f.attr("transform","rotate(-45)"));break}f.attr("x",d-an.hover.rectanglePadding).attr("y",p).attr("width",u+an.hover.rectanglePadding*2).attr("height",h).lower()}),this.addEventListeners()}addEventListeners(){const e=this.getComponentContainer(),{position:n}=this.configs,r=R.appendOrSelect(e,`g.axis.${n}`),i=this.getOptions(),o=y(i,"axes",n),s=y(o,"scaleType"),a=y(o,"truncation","threshold"),l=this;r.selectAll("g.tick.tick-hover").on("mouseover",function(c){const u=D(this).select("text"),h=u.datum();l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEOVER,{event:c,element:u,datum:h}),s===j.LABELS&&h.length>a&&l.services.events.dispatchEvent(S.Tooltip.SHOW,{event:c,element:u,datum:h})}).on("mousemove",function(c){const u=D(this).select("text"),h=u.datum();l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEMOVE,{event:c,element:u,datum:h}),l.services.events.dispatchEvent(S.Tooltip.MOVE,{event:c})}).on("click",function(c){l.services.events.dispatchEvent(S.Axis.LABEL_CLICK,{event:c,element:D(this).select("text"),datum:D(this).select("text").datum()})}).on("mouseout",function(c){l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEOUT,{event:c,element:D(this).select("text"),datum:D(this).select("text").datum()}),s===j.LABELS&&l.services.events.dispatchEvent(S.Tooltip.HIDE)}).on("focus",function(c){const u={clientX:0,clientY:0};if(c.target){c.target.focus();const h=c.target.getBoundingClientRect();u.clientX=h.x,u.clientY=h.y}l.services.events.dispatchEvent(S.Axis.LABEL_FOCUS,{event:{...c,...u},element:D(this),datum:D(this).select("text").datum()})}).on("blur",function(c){l.services.events.dispatchEvent(S.Axis.LABEL_BLUR,{event:c,element:D(this),datum:D(this).select("text").datum()})}).on("keydown",function(c){c.key&&c.key==="Escape"&&(l.services.events.dispatchEvent(S.Tooltip.HIDE),l.services.events.dispatchEvent(S.Axis.LABEL_BLUR,{event:c,element:D(this),datum:D(this).select("text").datum()})),n===A.LEFT||n===A.RIGHT?c.key&&c.key==="ArrowUp"?l.goNext(this,c):c.key&&c.key==="ArrowDown"&&l.goPrevious(this,c):c.key&&c.key==="ArrowLeft"?l.goPrevious(this,c):c.key&&c.key==="ArrowRight"&&l.goNext(this,c)})}goNext(e,n){e.nextElementSibling&&e.nextElementSibling.tagName!=="path"&&e.nextElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}goPrevious(e,n){e.previousElementSibling&&e.previousElementSibling.tagName!=="path"&&e.previousElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}destroy(){const e=this.getComponentContainer(),{position:n}=this.configs;R.appendOrSelect(e,`g.axis.${n}`).selectAll("g.tick.tick-hover").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("focus",null).on("blur",null)}}class vp extends Et{constructor(){super(...arguments),this.type="2D-axes",this.renderType=ft.SVG,this.children={},this.thresholds=[],this.margins={top:0,right:0,bottom:0,left:0}}render(e=!1){const n={},r=Object.keys(A),i=y(this.getOptions(),"axes");r.forEach(s=>{i[A[s]]&&(n[A[s]]=!0)}),this.configs.axes=n,r.forEach(s=>{const a=A[s];if(this.configs.axes[a]&&!this.children[a]){const l={position:a,axes:this.configs.axes,margins:this.margins},c=this.model.axisFlavor===ya.DEFAULT?new mp(this.model,this.services,l):new xC(this.model,this.services,l);c.setModel(this.model),c.setServices(this.services),c.setParent(this.parent),this.children[a]=c}}),Object.keys(this.children).forEach(s=>{this.children[s].render(e)});const o={};Object.keys(this.children).forEach(s=>{const a=this.children[s],l=a.configs.position,c=a.getInvisibleAxisRef(),{width:u,height:h}=R.getSVGElementSize(c,{useBBox:!0});let f;switch(a.getTitleRef().empty()?f=0:(f=R.getSVGElementSize(a.getTitleRef(),{useBBox:!0}).height,(l===A.LEFT||l===A.RIGHT)&&(f+=5)),l){case A.TOP:o.top=h+f;break;case A.BOTTOM:o.bottom=h+f;break;case A.LEFT:o.left=u+f;break;case A.RIGHT:o.right=u+f;break}}),this.services.events.dispatchEvent(S.Axis.RENDER_COMPLETE),Object.keys(o).some(s=>this.margins[s]!==o[s])&&(this.margins=Object.assign(this.margins,o),this.model.set({axesMargins:this.margins},{skipUpdate:!0}),this.services.events.dispatchEvent(S.ZoomBar.UPDATE),Object.keys(this.children).forEach(s=>{const a=this.children[s];a.margins=this.margins}),this.render(!0))}}class yp extends Et{constructor(){super(...arguments),this.type="skeleton"}render(e=!0){const n=y(this.getOptions(),"data","loading");n?this.renderSkeleton(n):this.removeSkeleton()}renderSkeleton(e){if(this.configs.skeleton===Un.GRID)this.renderGridSkeleton(e);else if(this.configs.skeleton===Un.VERT_OR_HORIZ)this.renderVertOrHorizSkeleton(e);else if(this.configs.skeleton===Un.PIE)this.renderPieSkeleton(e);else if(this.configs.skeleton===Un.DONUT)this.renderDonutSkeleton(e);else throw new Error(`"${this.configs.skeleton}" is not a valid Skeleton type.`)}renderGridSkeleton(e){this.setScales(),this.drawBackdrop(e),this.drawXGrid(e),this.drawYGrid(e),e&&this.setShimmerEffect("shimmer-lines")}renderVertOrHorizSkeleton(e){const n=this.services.cartesianScales.getOrientation();this.setScales(),this.drawBackdrop(e),n===Jt.VERTICAL&&this.drawYGrid(e),n===Jt.HORIZONTAL&&this.drawXGrid(e),this.setShimmerEffect("shimmer-lines")}renderPieSkeleton(e){const n=this.computeOuterRadius();this.drawRing(n,0,e),e&&this.setShimmerEffect("shimmer-areas")}renderDonutSkeleton(e){const n=this.computeOuterRadius(),r=this.computeInnerRadius();this.drawRing(n,r,e),e&&this.setShimmerEffect("shimmer-areas")}setScales(){const e=this.services.cartesianScales.getMainXScale().range(),n=this.services.cartesianScales.getMainYScale().range();this.xScale=Ji().domain([0,1]).range(e),this.yScale=Ji().domain([0,1]).range(n)}drawBackdrop(e){const n=this.parent,{width:r,height:i}=R.getSVGElementSize(n,{useAttrs:!0});this.backdrop=R.appendOrSelect(n,"svg.chart-skeleton.DAII").attr("width",r).attr("height",i);const o=R.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");o.attr("width","100%").attr("height","100%");const[s]=this.xScale.range(),[,a]=this.yScale.range();this.backdrop.merge(o).attr("x",s).attr("y",a),o.classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawXGrid(e){const n=+this.backdrop.attr("width"),r=y(this.getOptions(),"grid","x","numberOfTicks"),i=this.xScale.ticks(r).map(a=>a*n),o=R.appendOrSelect(this.backdrop,"g.x.skeleton"),s=o.selectAll("line").data(i);s.enter().append("line").merge(s).attr("x1",a=>a).attr("x2",a=>a).attr("y1",0).attr("y2","100%"),o.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawYGrid(e){const n=+this.backdrop.attr("height"),r=this.backdrop.attr("width"),i=y(this.getOptions(),"grid","y","numberOfTicks"),o=this.xScale.ticks(i).map(l=>l*n),s=R.appendOrSelect(this.backdrop,"g.y.skeleton"),a=s.selectAll("line").data(o);a.enter().append("line").merge(a).attr("x1",0).attr("x2",r).attr("y1",l=>l).attr("y2",l=>l),s.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawRing(e,n,r=!0){const i=this.parent,{width:o,height:s}=R.getSVGElementSize(i,{useAttrs:!0}),a=R.appendOrSelect(i,"svg.chart-skeleton").attr("width",o).attr("height",s),l=n===0?"pie":"donut",c=y(this.getOptions(),l,"alignment");R.appendOrSelect(a,"rect.chart-skeleton-area-container").attr("width",o).attr("height",s).attr("fill","none");const u=DM().innerRadius(n).outerRadius(e).startAngle(0).endAngle(Math.PI*2),h=e+Math.abs(vr.radiusOffset),f=e+(Math.min(o,s)-e*2)/2,d=R.appendOrSelect(a,"path").attr("class","skeleton-area-shape").attr("transform",`translate(${h}, ${f})`).attr("d",u).classed("shimmer-effect-areas",r).classed("empty-state-areas",!r).style("fill",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-areas")})`:null);let p=e+vr.xOffset;c===Ee.CENTER?p=o/2:c===Ee.RIGHT&&(p=o-e-vr.xOffset);const v=e+vr.yOffset;d.attr("transform",`translate(${p}, ${v})`)}computeOuterRadius(){const{width:e,height:n}=R.getSVGElementSize(this.parent,{useAttrs:!0});return Math.min(e,n)/2+vr.radiusOffset}computeInnerRadius(){return this.computeOuterRadius()*(3/4)}setShimmerEffect(e){const n="stop-bg-shimmer",r="stop-shimmer",i=this.parent.select(".chart-skeleton"),{width:o}=R.getSVGElementSize(this.parent,{useAttrs:!0}),s=0,a=o,l=R.appendOrSelect(i,"defs").lower(),c=R.appendOrSelect(l,"linearGradient").attr("id",this.services.domUtils.generateElementIDString(e)).attr("class",e).attr("x1",s-3*.2*o).attr("x2",a).attr("y1",0).attr("y2",0).attr("gradientUnits","userSpaceOnUse").attr("gradientTransform","translate(0, 0)"),u=`
			<stop class="${n}" offset="${s}"></stop>
			<stop class="${r}" offset="${s+.2}"></stop>
			<stop class="${n}" offset="${s+2*.2}"></stop>
		`;c.html(u),h();function h(){c.attr("gradientTransform",`translate(${s-3*.2*o}, 0)`).transition().duration(2e3).delay(1e3).ease(VS).attr("gradientTransform",`translate(${a+3*.2*o}, 0)`).on("end",h)}}removeSkeleton(){this.parent.select(".chart-skeleton").remove()}}class cl extends Et{constructor(){super(...arguments),this.type="zero-line",this.renderType=ft.SVG}render(e){const n=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),r=this.services.cartesianScales.getScaleByPosition(n),[i,o]=r.domain(),s=i>0&&o<0||i<0&&o>0,a=this.getComponentContainer();if(!s){a.selectAll("line.domain").remove();return}const[l,c]=this.services.cartesianScales.getDomainScale().range();let u=+r(0)+.5;u||(u=r.range()[0]);const h=df({x0:l,x1:c,y0:u,y1:u},this.services.cartesianScales.getOrientation());R.appendOrSelect(a,"line.domain").transition().call(f=>this.services.transitions.setupTransition({transition:f,name:"zero-line-update",animate:e})).attr("y1",h.y0).attr("y2",h.y1).attr("x1",h.x0).attr("x2",h.x1)}}class Fu extends gp{formatTooltipData(e){return e.reverse()}}class ul extends Et{getBarWidth(){const e=this.getOptions();if(e.bars.width)return e.bars.width;const n=this.model.getDisplayData().length,r=this.services.cartesianScales.getMainXScale(),i=R.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(!r.step){const o=y(e,"bars","spacingFactor");return Math.min(e.bars.maxWidth,i*o/n)}return Math.min(e.bars.maxWidth,r.step()/2)}isOutsideZoomedDomain(e,n){if(this.model.getDisplayData().length<=1)return!1;const r=this.model.get("zoomDomain");if(r!==void 0){const i=this.services.cartesianScales.getDomainScale();return e<i(r[0])||n>i(r[1])}return!1}}class TC extends ul{constructor(){super(...arguments),this.type="grouped-bar",this.renderType=ft.SVG,this.padding=5,this.defaultStepFactor=70,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.model.getDisplayData(this.configs.groups),r=this.getOptions(),{groupMapsTo:i}=r.data;this.setGroupScale();const o=this.getComponentContainer({withinChartClip:!0}),s=jr(n.map(u=>{const h=this.services.cartesianScales.getDomainIdentifier(u);return u[h]&&typeof u[h].toString=="function"?u[h].toString():u[h]})),a=o.selectAll("g.bars").data(s,u=>u);a.exit().attr("opacity",0).remove();const l=a.enter().append("g").classed("bars",!0).attr("role",$t.GROUP).attr("data-name","bars").merge(a);l.transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-group-update-enter",animate:e})).attr("transform",u=>{const h=this.services.cartesianScales.getDomainValue(u)-this.getGroupWidth()/2;return this.services.cartesianScales.getOrientation()===Jt.VERTICAL?`translate(${h}, 0)`:`translate(0, ${h})`});const c=l.selectAll("path.bar").data(u=>this.getDataCorrespondingToLabel(u),u=>u[i]);c.exit().attr("opacity",0).remove(),c.enter().append("path").attr("opacity",0).merge(c).classed("bar",!0).transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-update-enter",animate:e})).attr("class",u=>this.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:u[i],originalClassName:"bar"})).style("fill",u=>{const h=this.services.cartesianScales.getDomainIdentifier(u);return this.model.getFillColor(u[i],u[h],u)}).attr("d",u=>{const h=this.groupScale(u[i]),f=this.getBarWidth(),d=h,p=h+f,v=this.services.cartesianScales.getRangeAxisPosition({datum:u}),g=this.services.cartesianScales.getDomainLowerBound(v),m=this.services.cartesianScales.getValueThroughAxisPosition(v,g),_=this.services.cartesianScales.getRangeValue(u),w=this.services.cartesianScales.getDomainValue(u)-f/2,E=w+f;if(!this.isOutsideZoomedDomain(w,E))return Za({x0:d,x1:p,y0:m,y1:_},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",$t.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",u=>u.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=D(this);i.classed("hovered",!0),e.services.events.dispatchEvent(S.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){const i=D(this);e.services.events.dispatchEvent(S.Bar.BAR_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(S.Bar.BAR_CLICK,{event:n,element:D(this),datum:r})}).on("mouseout",function(n,r){const i=D(this);i.classed("hovered",!1),e.services.events.dispatchEvent(S.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getDataCorrespondingToLabel(e){return this.model.getDisplayData(this.configs.groups).filter(n=>{const r=this.services.cartesianScales.getDomainIdentifier(n);return n[r].toString()===e})}getGroupWidth(){const e=this.model.getGroupedData(this.configs.groups),n=this.getTotalGroupPadding();return this.getBarWidth()*e.length+n}getDomainScaleStep(){const e=this.services.cartesianScales.getDomainScale(),n=this.model.getGroupedData(this.configs.groups);let r=this.defaultStepFactor;if(typeof e.step=="function")r=e.step();else if(n.length>0){const i=n.find(o=>{var s;return((s=o.data)==null?void 0:s.length)>1});if(i){const o=this.services.cartesianScales.getDomainIdentifier(i.data[0]);r=Math.abs(e(i.data[1][o])-e(i.data[0][o]))}}return r}getTotalGroupPadding(){const e=this.model.getGroupedData(this.configs.groups);return e.length===1?0:Math.min(5,5*(this.getDomainScaleStep()/this.defaultStepFactor))*(e.length-1)}getBarWidth(){const e=this.getOptions(),n=y(e,"bars","width"),r=y(e,"bars","maxWidth");if(n!==null&&(r===null||n<=r))return n;const i=this.model.getGroupedData(this.configs.groups).length,o=this.getTotalGroupPadding();return Math.min(r,(this.getDomainScaleStep()-o)/i)}setGroupScale(){const e=this.model.getActiveDataGroupNames(this.configs.groups);this.groupScale=qa().domain(e).rangeRound([0,this.getGroupWidth()])}}class bp extends ul{constructor(){super(...arguments),this.type="simple-bar",this.renderType=ft.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-simple-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getComponentContainer({withinChartClip:!0}),o=this.model.getDisplayData(this.configs.groups),s=this.services.cartesianScales.getOrientation(),a=i.selectAll("path.bar").data(o,l=>l[r]);a.exit().attr("opacity",0).remove(),a.enter().append("path").attr("opacity",0).merge(a).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call(l=>this.services.transitions.setupTransition({transition:l,name:"bar-update-enter",animate:e})).attr("class",l=>this.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:l[r],originalClassName:"bar"})).style("fill",l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return this.model.getFillColor(l[r],l[c],l)}).attr("d",l=>{const c=this.services.cartesianScales.getRangeIdentifier(),u=this.getBarWidth(),h=l[c],f=this.services.cartesianScales.getDomainValue(l)-u/2,d=f+u;let p,v;if(Array.isArray(h)&&h.length===2)p=this.services.cartesianScales.getRangeValue(h[0]),v=this.services.cartesianScales.getRangeValue(h[1]);else{const m=this.services.cartesianScales.getRangeScale().domain()[0];p=this.services.cartesianScales.getRangeValue(Math.max(0,m)),v=this.services.cartesianScales.getRangeValue(l)}const g=Math.abs(v-p);if(g!==0&&g<2&&(h>0&&s===Jt.VERTICAL||h<0&&s===Jt.HORIZONTAL?v=p-2:v=p+2),!this.isOutsideZoomedDomain(f,d))return Za({x0:f,x1:d,y0:p,y1:v},s)}).attr("opacity",1).attr("role",$t.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",l=>l.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=D(this);i.classed("hovered",!0),e.services.events.dispatchEvent(S.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){e.services.events.dispatchEvent(S.Bar.BAR_MOUSEMOVE,{event:n,element:D(this),datum:r}),e.services.events.dispatchEvent(S.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(S.Bar.BAR_CLICK,{event:n,element:D(this),datum:r})}).on("mouseout",function(n,r){const i=D(this);i.classed("hovered",!1),e.services.events.dispatchEvent(S.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class EC extends yp{constructor(){super(...arguments),this.type="skeleton-lines"}render(e=!0){const n=y(this.getOptions(),"data","loading"),r=!y(this.getOptions(),"grid","x","enabled")&&!y(this.getOptions(),"grid","y","enabled")&&!y(this.getOptions(),"axes","bottom","visible")&&!y(this.getOptions(),"axes","left","visible");n&&!r?super.renderGridSkeleton(n):n&&r?this.renderSparklineSkeleton(n):this.removeSkeleton()}renderSparklineSkeleton(e){this.setScales(),this.drawBackdrop(e),this.drawSparkline(e),this.updateBackdropStyle(),e&&this.setShimmerEffect("shimmer-lines")}drawSparkline(e){const n=this.backdrop.attr("width"),r=[100],i=R.appendOrSelect(this.backdrop,"g.y.skeleton"),o=i.selectAll("line").data(r);o.enter().append("line").merge(o).attr("x1",0).attr("x2",n).attr("y1",s=>s).attr("y2",s=>s),i.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}updateBackdropStyle(){const e=this.parent;this.backdrop=R.appendOrSelect(e,"svg.chart-skeleton.DAII"),R.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop").classed("shimmer-effect-lines",!1).classed("shimmer-effect-sparkline",!0).style("stroke",null)}}class OC extends Et{constructor(){super(...arguments),this.type="area-stacked",this.renderType=ft.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("path.area").transition("legend-hover-area").call(o=>this.services.transitions.setupTransition({transition:o,name:"legend-hover-area"})).attr("opacity",o=>y(o,0,i)!==n.datum().name?We.opacity.unselected:We.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",We.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),r=this,i=this.getOptions(),{groupMapsTo:o}=i.data,s=Object.keys(i.axes).some(d=>i.axes[d].percentage),a=this.model.getStackedData({percentage:s,groups:this.configs.groups}),l=y(a,0,0),c=this.services.cartesianScales.getDomainAxisPosition({datum:l}),u=this.services.cartesianScales.getRangeAxisPosition({datum:l}),h=this.services.cartesianScales.getScaleByPosition(u),f=n.selectAll("path.area").data(a,d=>y(d,0,o));this.areaGenerator=al().x(d=>this.services.cartesianScales.getValueThroughAxisPosition(c,d.data.sharedStackKey)).y0(d=>h(d[0])).y1(d=>h(d[1])).curve(this.services.curves.getD3Curve()),f.exit().attr("opacity",0).remove(),f.enter().append("path").attr("opacity",0).merge(f).data(a,d=>y(d,0,o)).attr("class","area").attr("class",d=>this.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:y(d,0,o),originalClassName:"area"})).style("fill",d=>r.model.getFillColor(y(d,0,o),null,d)).attr("role",$t.GRAPHICS_SYMBOL).attr("aria-roledescription","area").attr("aria-label",d=>y(d,0,o)).transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"area-update-enter",animate:e})).attr("opacity",We.opacity.selected).attr("d",this.areaGenerator)}}class SC extends ul{constructor(){super(...arguments),this.type="stacked-bar",this.renderType=ft.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.model.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,o=this.model.getStackedData({groups:this.configs.groups,divergent:!0}),s=this.model.getActiveDataGroupNames(),a=n.selectAll("g.bars").data(o,c=>y(c,0,i));a.exit().attr("opacity",0).remove(),a.enter().append("g").classed("bars",!0).attr("role",$t.GROUP).attr("data-name","bars");const l=n.selectAll("g.bars").selectAll("path.bar").data(c=>c,c=>c.data.sharedStackKey);l.exit().remove(),l.enter().append("path").merge(l).classed("bar",!0).transition().call(c=>this.services.transitions.setupTransition({transition:c,name:"bar-update-enter",animate:e})).attr("class",c=>this.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:c[i],originalClassName:"bar"})).style("fill",c=>this.model.getFillColor(c[i],c.data.sharedStackKey,c.data)).attr("d",c=>{const u=c.data.sharedStackKey,h=this.getBarWidth(),f=this.services.cartesianScales.getDomainValue(u)-h/2,d=f+h,p=this.services.cartesianScales.getRangeValue(c[0]);let v=this.services.cartesianScales.getRangeValue(c[1]);if(!this.isOutsideZoomedDomain(f,d)){if(Math.abs(v-p)>0&&Math.abs(v-p)>r.bars.dividerSize){const g=c[0]<0&&c[1]<=0;g&&s.length>1?this.services.cartesianScales.getOrientation()===Jt.VERTICAL?v+=c[1]===0?2:1:v-=1:g||(this.services.cartesianScales.getOrientation()===Jt.VERTICAL?v+=1:v-=1)}return Za({x0:f,x1:d,y0:p,y1:v},this.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",$t.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",c=>c[1]-c[0]),this.addEventListeners()}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this;this.parent.selectAll("path.bar").on("mouseover",function(i,o){const s=D(this);s.classed("hovered",!0),r.services.events.dispatchEvent(S.Bar.BAR_MOUSEOVER,{event:i,element:s,datum:o});let a=r.model.getDisplayData(r.configs.groups).find(l=>{const c=r.services.cartesianScales.getDomainIdentifier(l),u=r.services.cartesianScales.getRangeIdentifier(l);return l[u]===o.data[o[n]]&&l[c].toString()===o.data.sharedStackKey&&l[n]===o[n]});if(a===void 0){const l=r.services.cartesianScales.getDomainIdentifier(),c=r.services.cartesianScales.getRangeIdentifier();a={[l]:o.data.sharedStackKey,[c]:o.data[o[n]],[n]:o[n]}}r.services.events.dispatchEvent(S.Tooltip.SHOW,{event:i,hoveredElement:s,data:[a]})}).on("mousemove",function(i,o){const s=D(this);r.services.events.dispatchEvent(S.Bar.BAR_MOUSEMOVE,{event:i,element:s,datum:o}),r.services.events.dispatchEvent(S.Tooltip.MOVE,{event:i})}).on("click",function(i,o){r.services.events.dispatchEvent(S.Bar.BAR_CLICK,{event:i,element:D(this),datum:o})}).on("mouseout",function(i,o){const s=D(this);s.classed("hovered",!1),r.services.events.dispatchEvent(S.Bar.BAR_MOUSEOUT,{event:i,element:s,datum:o}),r.services.events.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:s})})}getBarWidth(){const e=this.getOptions();if(y(e,"bars","width"))return e.bars.width;const n=this.services.cartesianScales.getMainXScale(),r=R.getSVGElementSize(this.parent,{useAttrs:!0}).width,i=this.model.getStackKeys().length,o=y(e,"bars","spacingFactor");return n.step?Math.min(e.bars.maxWidth,n.step()/2):Math.min(e.bars.maxWidth,r*o/i)}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class MC extends Ir{constructor(){super(...arguments),this.type="scatter-stacked",this.renderType=ft.SVG}render(e){if(!y(this.getOptions(),"points","enabled"))return;const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,o=Object.keys(r.axes).some(u=>r.axes[u].percentage),s=this.model.getStackedData({groups:this.configs.groups,percentage:o}),a=n.selectAll("g.dots").data(s,u=>y(u,0,i));a.exit().attr("opacity",0).remove();const l=a.enter().append("g").classed("dots",!0).attr("role",$t.GROUP).merge(a).selectAll("circle.dot").data(u=>u);l.exit().attr("opacity",0).remove();const c=l.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(l).datum(u=>{const h=u[i],f=this.services.cartesianScales.getDomainIdentifier(u),d=this.services.cartesianScales.getRangeIdentifier(u);return{[i]:h,[f]:u.data.sharedStackKey,[d]:u[1]}});this.styleCircles(c,e),this.addEventListeners()}getTooltipData(e,n){const r=this.getOptions(),{groupMapsTo:i}=r.data,o=Object.keys(r.axes).some(l=>r.axes[l].percentage),s=this.model.getStackedData({groups:this.configs.groups,percentage:o}),a=[];return s.forEach((l,c)=>{l.forEach((u,h)=>{const f=u[i],d=u.data.sharedStackKey;let p=u.data[f];const v=u[1],g=this.services.cartesianScales.getDomainIdentifier(u),m=this.services.cartesianScales.getRangeIdentifier(u);p!=null&&e===this.services.cartesianScales.getDomainValue(d)&&n===this.services.cartesianScales.getRangeValue(v)&&(o&&(p=this.model.getStackedData({groups:this.configs.groups})[c][h].data[f]),p!==null&&a.push({[i]:f,[g]:d,[m]:p}))})}),this.model.getDisplayData(this.configs.groups).filter(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l),u=this.services.cartesianScales.getRangeIdentifier(l);return a.find(h=>h[i]==l[i]&&h[c]==l[c]&&h[u]==l[u])!==void 0})}}var AC={value:function(){}};function _p(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Di(n)}function Di(t){this._=t}function CC(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Di.prototype=_p.prototype={constructor:Di,on:function(t,e){var n=this._,r=CC(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=$C(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=Vu(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Vu(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Di(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function $C(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Vu(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=AC,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const kC=Object.freeze(Object.defineProperty({__proto__:null,dispatch:_p},Symbol.toStringTag,{value:"Module"})),DC=XA(kC);DC.dispatch;function wp(t){var e=t==null?0:t.length;return e?Jh(t):[]}function LC(t){return Gh(Wh(t,void 0,wp),t+"")}function RC(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function IC(t,e){return e.length<2?t:Ma(t,RC(e,0,-1))}function PC(t,e){return e=$o(e,t),t=IC(t,e),t==null||delete t[ti(_d(e))]}function NC(t){return ed(t)?void 0:t}var BC=1,UC=2,HC=4,FC=LC(function(t,e){var n={};if(t==null)return n;var r=!1;e=Fh(e,function(o){return o=$o(o,t),r||(r=o.length>1),o}),cr(t,ad(t),n),r&&(n=Rr(n,BC|UC|HC,NC));for(var i=e.length;i--;)PC(n,e[i]);return n});function ju(t){return Math.log(t)}function Gu(t){return Math.exp(t)}function VC(t){return-Math.log(-t)}function jC(t){return-Math.exp(-t)}function GC(t){return isFinite(t)?+("1e"+t):t<0?0:t}function zC(t){return t===10?GC:t===Math.E?Math.exp:e=>Math.pow(t,e)}function WC(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function zu(t){return(e,n)=>-t(-e,n)}function YC(t){const e=t(ju,Gu),n=e.domain;let r=10,i,o;function s(){return i=WC(r),o=zC(r),n()[0]<0?(i=zu(i),o=zu(o),t(VC,jC)):t(ju,Gu),e}return e.base=function(a){return arguments.length?(r=+a,s()):r},e.domain=function(a){return arguments.length?(n(a),s()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let f=i(c),d=i(u),p,v;const g=a==null?10:+a;let m=[];if(!(r%1)&&d-f<g){if(f=Math.floor(f),d=Math.ceil(d),c>0){for(;f<=d;++f)for(p=1;p<r;++p)if(v=f<0?p/o(-f):p*o(f),!(v<c)){if(v>u)break;m.push(v)}}else for(;f<=d;++f)for(p=r-1;p>=1;--p)if(v=f>0?p/o(-f):p*o(f),!(v<c)){if(v>u)break;m.push(v)}m.length*2<g&&(m=Gi(c,u,g))}else m=Gi(f,d,Math.min(d-f,g)).map(o);return h?m.reverse():m},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Yr(l)).precision==null&&(l.trim=!0),l=Ga(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let h=u/o(Math.round(i(u)));return h*r<r-.5&&(h*=r),h<=c?l(u):""}},e.nice=()=>n(Tf(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function xp(){const t=YC(Qd()).domain([1,10]);return t.copy=()=>Wa(t,xp()).base(t.base()),ri.apply(t,arguments),t}function mo(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Vo(t){this._context=t}Vo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mo(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ZC(t){return new Vo(t)}function Tp(t){this._context=t}Tp.prototype={areaStart:ln,areaEnd:ln,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:mo(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function XC(t){return new Tp(t)}function Ep(t){this._context=t}Ep.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:mo(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function qC(t){return new Ep(t)}function Op(t,e){this._basis=new Vo(t),this._beta=e}Op.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],o=t[n]-r,s=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*o),this._beta*e[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const KC=function t(e){function n(r){return e===1?new Vo(r):new Op(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function vo(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function hl(t,e){this._context=t,this._k=(1-e)/6}hl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vo(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:vo(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const QC=function t(e){function n(r){return new hl(r,e)}return n.tension=function(r){return t(+r)},n}(0);function dl(t,e){this._context=t,this._k=(1-e)/6}dl.prototype={areaStart:ln,areaEnd:ln,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:vo(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const JC=function t(e){function n(r){return new dl(r,e)}return n.tension=function(r){return t(+r)},n}(0);function fl(t,e){this._context=t,this._k=(1-e)/6}fl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vo(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const t$=function t(e){function n(r){return new fl(r,e)}return n.tension=function(r){return t(+r)},n}(0);function pl(t,e,n){var r=t._x1,i=t._y1,o=t._x2,s=t._y2;if(t._l01_a>Wt){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Wt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/u,s=(s*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,o,s,t._x2,t._y2)}function Sp(t,e){this._context=t,this._alpha=e}Sp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:pl(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const e$=function t(e){function n(r){return e?new Sp(r,e):new hl(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Mp(t,e){this._context=t,this._alpha=e}Mp.prototype={areaStart:ln,areaEnd:ln,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:pl(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const n$=function t(e){function n(r){return e?new Mp(r,e):new dl(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Ap(t,e){this._context=t,this._alpha=e}Ap.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pl(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const r$=function t(e){function n(r){return e?new Ap(r,e):new fl(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Wu(t){return t<0?-1:1}function Yu(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(Wu(o)+Wu(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function Zu(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ws(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function yo(t){this._context=t}yo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ws(this,this._t0,Zu(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ws(this,Zu(this,n=Yu(this,t,e)),n);break;default:ws(this,this._t0,n=Yu(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Cp(t){this._context=new $p(t)}(Cp.prototype=Object.create(yo.prototype)).point=function(t,e){yo.prototype.point.call(this,e,t)};function $p(t){this._context=t}$p.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function i$(t){return new yo(t)}function o$(t){return new Cp(t)}function kp(t){this._context=t}kp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Xu(t),i=Xu(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Xu(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function s$(t){return new kp(t)}function jo(t,e){this._context=t,this._t=e}jo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function a$(t){return new jo(t,.5)}function l$(t){return new jo(t,0)}function c$(t){return new jo(t,1)}class u$ extends nn{zoomIn(e,n,r){let i,o,s;const a=r||Ic;e&&(i=e.x,o=e.y,s=2);const{width:l,height:c}=R.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0});n.transition().duration(a.duration).ease(a.ease).attr("transform",`translate(${l/2}, ${c/2}) scale(${s}) translate(${-i},${-o})`),this.services.events.dispatchEvent(S.CanvasZoom.CANVAS_ZOOM_IN,{element:D(e)})}zoomOut(e,n){const r=n||Ic;e.transition().duration(r.duration).ease(r.ease).attr("transform",""),this.services.events.dispatchEvent(S.CanvasZoom.CANVAS_ZOOM_OUT)}}class h$ extends nn{init(){this.documentFragment=document.createDocumentFragment()}addEventListener(e,n){this.documentFragment.addEventListener(e,n)}removeEventListener(e,n){this.documentFragment.removeEventListener(e,n)}dispatchEvent(e,n){let r;n?r=new CustomEvent(e,{detail:n}):(r=document.createEvent("Event"),r.initEvent(e,!1,!0)),this.documentFragment.dispatchEvent(r)}}class d$ extends nn{constructor(e,n){super(e,n)}downloadCSV(e,n){const r=document.createElement("a"),i="text/csv;encoding:utf-8";if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([e],{type:i}),n);else if(URL&&"download"in r){const o=URL.createObjectURL(new Blob([e],{type:i}));r.href=o,r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)}else location.href=`data:application/octet-stream,${encodeURIComponent(e)}`}downloadImage(e,n){const r=document.createElement("a");r.download=n,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}class f$ extends nn{constructor(){super(...arguments),this.pendingTransitions={}}init(){var e;(e=this.services.events)==null||e.addEventListener(S.Model.UPDATE,()=>{this.pendingTransitions={}})}setupTransition({transition:e,name:n,animate:r}){return this.pendingTransitions[e._id]=e,e.on("end interrupt cancel",()=>{delete this.pendingTransitions[e._id]}),this.model.getOptions().animations===!1||r===!1?e.duration(0):e.duration(y(Bc,n,"duration")||Bc.default.duration)}getPendingTransitions(){return this.pendingTransitions}}function Pr(t,e){const n=ct(t),r=ct(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function p$(t,e){const n=ct(t),r=ct(e);return n.getFullYear()-r.getFullYear()}function g$(t,e){const n=ct(t),r=ct(e),i=Pr(n,r),o=Math.abs(p$(n,r));n.setFullYear(1584),r.setFullYear(1584);const s=Pr(n,r)===-i,a=i*(o-+s);return a===0?0:a}function gl(t,e){const n=ct(t);if(isNaN(e))return Oe(t,NaN);if(!e)return n;const r=n.getDate(),i=Oe(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const o=i.getDate();return r>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}function Dp(t,e){return gl(t,e*12)}function m$(t,e){return Dp(t,-e)}function v$(t,e){const n=ct(t),r=ct(e),i=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return i*12+o}function y$(t){const e=ct(t);return e.setHours(23,59,59,999),e}function b$(t){const e=ct(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function _$(t){const e=ct(t);return+y$(e)==+b$(e)}function w$(t,e){const n=ct(t),r=ct(e),i=Pr(n,r),o=Math.abs(v$(n,r));let s;if(o<1)s=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*o);let a=Pr(n,r)===-i;_$(ct(t))&&o===1&&Pr(t,r)===1&&(a=!1),s=i*(o-Number(a))}return s===0?0:s}function x$(t,e){return gl(t,-e)}function T$(t,e){const n=ct(t),r=ct(e),i=qu(n,r),o=Math.abs(mf(n,r));n.setDate(n.getDate()-i*o);const s=+(qu(n,r)===-i),a=i*(o-s);return a===0?0:a}function qu(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function Lp(t,e){const n=ct(t);return isNaN(e)?Oe(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function E$(t,e){return Lp(t,-e)}function ml(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function vl(t,e){return+ct(t)-+ct(e)}function O$(t,e,n){const r=vl(t,e)/gf;return ml(void 0)(r)}function yl(t,e){const n=+ct(t);return Oe(t,n+e)}function Rp(t,e){return yl(t,e*gf)}function S$(t,e){return Rp(t,-e)}function Ku(t,e,n){const r=vl(t,e)/pf;return ml(void 0)(r)}function pa(t,e){return yl(t,e*pf)}function Qu(t,e){return pa(t,-e)}function Ju(t,e,n){const r=vl(t,e)/1e3;return ml(void 0)(r)}function ga(t,e){return yl(t,e*1e3)}function th(t,e){return ga(t,-e)}class M$ extends nn{constructor(){super(...arguments),this.scaleTypes={top:null,right:null,bottom:null,left:null},this.scales={top:null,right:null,bottom:null,left:null}}getDomainAxisPosition({datum:e=null}={}){if(this.dualAxes&&e){const n=this.model.getOptions(),{groupMapsTo:r}=n.data,i=y(n,"axes",this.secondaryDomainAxisPosition),o=e[r];if(i!=null&&i.correspondingDatasets&&i.correspondingDatasets.includes(o))return this.secondaryDomainAxisPosition}return this.domainAxisPosition}getRangeAxisPosition({datum:e=null,groups:n=null}={}){if(this.dualAxes){const r=this.model.getOptions(),{groupMapsTo:i}=r.data,o=y(r,"axes",this.secondaryRangeAxisPosition);let s;if(e!==null?s=e[i]:n&&n.length>0&&(s=n[0]),o!=null&&o.correspondingDatasets&&o.correspondingDatasets.includes(s))return this.secondaryRangeAxisPosition}return this.rangeAxisPosition}getAxisOptions(e){return y(this.model.getOptions(),"axes",e)}getDomainAxisOptions(){const e=this.getDomainAxisPosition();return this.getAxisOptions(e)}getRangeAxisOptions(){const e=this.getRangeAxisPosition();return this.getAxisOptions(e)}getScaleLabel(e){return this.getAxisOptions(e).title||(e===A.BOTTOM||e===A.TOP?"x-value":"y-value")}getDomainLabel(){return this.getScaleLabel(this.getDomainAxisPosition())}getRangeLabel(){return this.getScaleLabel(this.getRangeAxisPosition())}update(){this.determineAxisDuality(),this.findDomainAndRangeAxes(),this.determineOrientation(),Object.keys(A).map(e=>A[e]).forEach(e=>{this.scales[e]=this.createScale(e)})}findDomainAndRangeAxes(){const e=this.findVerticalAxesPositions(),n=this.findHorizontalAxesPositions(),r=this.findDomainAndRangeAxesPositions(e,n);this.domainAxisPosition=r.primaryDomainAxisPosition,this.rangeAxisPosition=r.primaryRangeAxisPosition,this.isDualAxes()&&(this.secondaryDomainAxisPosition=r.secondaryDomainAxisPosition,this.secondaryRangeAxisPosition=r.secondaryRangeAxisPosition)}determineOrientation(){(this.rangeAxisPosition===A.LEFT||this.rangeAxisPosition===A.RIGHT)&&(this.domainAxisPosition===A.BOTTOM||this.domainAxisPosition===A.TOP)?this.orientation=Jt.VERTICAL:this.orientation=Jt.HORIZONTAL}isDualAxes(){return this.dualAxes}determineAxisDuality(){var e,n,r,i;const o=this.model.getOptions(),s=y(o,"axes");((e=s[A.LEFT])!=null&&e.correspondingDatasets&&s[A.RIGHT]||(n=s[A.RIGHT])!=null&&n.correspondingDatasets&&s[A.LEFT]||(r=s[A.TOP])!=null&&r.correspondingDatasets&&s[A.BOTTOM]||(i=s[A.BOTTOM])!=null&&i.correspondingDatasets&&s[A.TOP])&&(this.dualAxes=!0)}getCustomDomainValuesByposition(e){const n=y(this.model.getOptions(),"axes",e,"domain");if(n&&!Array.isArray(n))throw new Error(`Domain in ${e} axis is not a valid array`);if(Array.isArray(n)&&(this.scaleTypes[e]===j.LINEAR||this.scaleTypes[e]===j.TIME)&&n.length!==2)throw new Error(`There can only be 2 elements in domain for scale type: ${this.scaleTypes[e]}`);return n}getOrientation(){return this.orientation}getScaleByPosition(e){return this.scales[e]}getScaleTypeByPosition(e){return this.scaleTypes[e]}getDomainAxisScaleType(){const e=this.getDomainAxisPosition();return this.getScaleTypeByPosition(e)}getRangeAxisScaleType(){const e=this.getRangeAxisPosition();return this.getScaleTypeByPosition(e)}getDomainScale(){return this.scales[this.domainAxisPosition]}getRangeScale(){return this.scales[this.rangeAxisPosition]}getMainXAxisPosition(){const e=[A.BOTTOM,A.TOP];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>e.indexOf(n)>-1)}getMainYAxisPosition(){const e=[A.LEFT,A.RIGHT];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>e.indexOf(n)>-1)}getMainXScale(){return this.scales[this.getMainXAxisPosition()]}getMainYScale(){return this.scales[this.getMainYAxisPosition()]}getValueFromScale(e,n,r,i){const o=this.model.getOptions(),s=y(o,"axes")[r],{mapsTo:a}=s,l=y(i,a)!==null?i[a]:i;let c;switch(n){case j.LABELS:c=e(l)+e.step()/2;break;case j.TIME:c=e(new Date(l));break;default:c=e(l)}return c}getBoundedScaledValues(e){const{bounds:n}=this.model.getOptions(),r=this.getRangeAxisPosition({datum:e}),i=this.scales[r],o=this.model.getOptions(),s=y(o,"axes")[r],{mapsTo:a}=s,l=e[a]!==void 0?e[a]:e;return[i(y(e,n.upperBoundMapsTo)!==null?e[n.upperBoundMapsTo]:l),i(y(e,n.lowerBoundMapsTo)!==null?e[n.lowerBoundMapsTo]:l)]}getValueThroughAxisPosition(e,n){const r=this.scaleTypes[e],i=this.scales[e];return this.getValueFromScale(i,r,e,n)}getDomainValue(e){const n=this.getDomainAxisPosition({datum:e});return this.getValueThroughAxisPosition(n,e)}getRangeValue(e){const n=this.getRangeAxisPosition({datum:e});return this.getValueThroughAxisPosition(n,e)}getMainXScaleType(){return this.getScaleTypeByPosition(this.getMainXAxisPosition())}getMainYScaleType(){return this.getScaleTypeByPosition(this.getMainYAxisPosition())}getDomainIdentifier(e){const n=this.model.getOptions();return y(n,"axes",this.getDomainAxisPosition({datum:e}),"mapsTo")}getRangeIdentifier(e){const n=this.model.getOptions();return y(n,"axes",this.getRangeAxisPosition({datum:e}),"mapsTo")}extendsDomain(e,n){const r=this.model.getOptions(),i=y(r,"axes",e);if(i.scaleType===j.TIME){const o=y(r,"timeScale","addSpaceOnEdges");return A$(n,o)}else return C$(n,an.paddingRatio,i.scaleType)}findVerticalAxesPositions(){const e=this.model.getOptions(),n=y(e,"axes"),r=this.isDualAxes();return y(n,A.LEFT)===null&&y(n,A.RIGHT)!==null||y(n,A.RIGHT,"main")===!0||r&&y(n,A.LEFT,"correspondingDatasets")?{primary:A.RIGHT,secondary:A.LEFT}:{primary:A.LEFT,secondary:A.RIGHT}}findHorizontalAxesPositions(){const e=this.model.getOptions(),n=y(e,"axes"),r=this.isDualAxes();return y(n,A.BOTTOM)===null&&y(n,A.TOP)!==null||y(n,A.TOP,"main")===!0||r&&y(n,A.BOTTOM,"correspondingDatasets")?{primary:A.TOP,secondary:A.BOTTOM}:{primary:A.BOTTOM,secondary:A.TOP}}findDomainAndRangeAxesPositions(e,n){const r=this.model.getOptions(),i=y(r,"axes",e.primary),o=y(r,"axes",n.primary),s=i.scaleType||j.LINEAR,a=o.scaleType||j.LINEAR,l={primaryDomainAxisPosition:null,secondaryDomainAxisPosition:null,primaryRangeAxisPosition:null,secondaryRangeAxisPosition:null};return l.primaryDomainAxisPosition=n.primary,l.primaryRangeAxisPosition=e.primary,l.secondaryDomainAxisPosition=n.secondary,l.secondaryRangeAxisPosition=e.secondary,(!(a===j.LABELS||a===j.TIME)&&s===j.LABELS||s===j.TIME)&&(l.primaryDomainAxisPosition=e.primary,l.primaryRangeAxisPosition=n.primary,l.secondaryDomainAxisPosition=e.secondary,l.secondaryRangeAxisPosition=n.secondary),l}getScaleDomain(e){const n=this.model.getOptions(),r=y(n,"axes",e),i=y(n,"bounds"),{includeZero:o}=r,s=y(r,"scaleType")||j.LINEAR;if(this.model.isDataEmpty())return[];if(r.binned){const{bins:m}=this.model.getBinConfigurations();return[0,j0(m,_=>_.length)]}else if(r.limitDomainToBins){const{bins:m}=this.model.getBinConfigurations(),_=this.model.getStackKeys({bins:m});return[_[0].split(":")[0],_[_.length-1].split(":")[1]]}const a=this.model.getDisplayData(),{extendLinearDomainBy:l,mapsTo:c,percentage:u,thresholds:h}=r,{reference:f,compareTo:d}=an.ratio;if(r.domain)return s===j.LABELS?r.domain:(s===j.TIME&&(r.domain=r.domain.map(m=>m.getTime===void 0?new Date(m):m)),this.extendsDomain(e,r.domain));if(u)return[0,100];if(r&&s===j.LABELS)return jr(a.map(m=>m[c]));let p,v;const g=this.model.getDataGroupNames();if(s===j.LABELS_RATIO)return a.map(m=>`${m[f]}/${m[d]}`);if(s===j.TIME)v=a.map(m=>+new Date(m[c]));else if(i&&n.axes)v=[],a.forEach(m=>{v.push(m[c]),m[i.upperBoundMapsTo]&&v.push(m[i.upperBoundMapsTo]),m[i.lowerBoundMapsTo]&&v.push(m[i.lowerBoundMapsTo])});else if(r.stacked===!0&&g&&e===this.getRangeAxisPosition()){const{groupMapsTo:m}=n.data,_=this.model.getDataValuesGroupedByKeys({groups:g}),w=a.filter(x=>!g.includes(x[m])),E=[];_.forEach(x=>{const{...T}=x;let O=0,M=0;Object.values(FC(T,"sharedStackKey")).forEach(P=>{isNaN(P)||(P<0?M+=P:O+=P)}),E.push([M,O])}),v=[...wp(E),...w.map(x=>x[c])]}else v=[],a.forEach(m=>{const _=m[c];Array.isArray(_)&&_.length===2?(v.push(_[0]),v.push(_[1])):(l&&v.push(Math.max(m[c],m[l])),v.push(_))});return s!==j.TIME&&s!==j.LOG&&o&&v.push(0),h&&h.length>0&&h.forEach(m=>{const _=y(m,"value");_!==null&&v.push(_)}),p=Yn(v),p=this.extendsDomain(e,p),p}createScale(e){const n=this.model.getOptions(),r=y(n,"axes",e);if(!r)return null;const i=y(r,"scaleType")||j.LINEAR;this.scaleTypes[e]=i;let o;return i===j.TIME?o=kf():i===j.LOG?o=xp().base(r.base||10):i===j.LABELS||i===j.LABELS_RATIO?o=qa():o=Ji(),o.domain(this.getScaleDomain(e)),o}getDomainLowerBound(e){let n,r=0;return this.getOrientation()===Jt.VERTICAL?n=this.getMainYScale().domain():n=this.getMainXScale().domain(),y(this.model.getOptions(),"axes",e,"includeZero")===!1&&n[0]>0&&n[1]>0&&(r=n[0]),r}getHighestDomainThreshold(){const e=y(this.model.getOptions(),"axes"),n=this.getDomainAxisPosition(),{thresholds:r}=e[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getDomainScale(),o=r.sort((s,a)=>a.value-s.value)[0];return this.getScaleTypeByPosition(n)===j.TIME&&(typeof o.value=="string"||o.value.getTime===void 0)&&(o.value=new Date(o.value)),{threshold:o,scaleValue:i(o.value)}}getHighestRangeThreshold(){const e=y(this.model.getOptions(),"axes"),n=this.getRangeAxisPosition(),{thresholds:r}=e[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getRangeScale(),o=r.sort((s,a)=>a.value-s.value)[0];return{threshold:o,scaleValue:i(o.value)}}}function A$(t,e){const n=new Date(t[0]),r=new Date(t[1]);return g$(r,n)>1?[m$(n,e),Dp(r,e)]:w$(r,n)>1?[x$(n,e),gl(r,e)]:T$(r,n)>1?[E$(n,e),Lp(r,e)]:O$(r,n)>1?[S$(n,e),Rp(r,e)]:Ku(r,n)>30?[Qu(n,e*30),pa(r,e*30)]:Ku(r,n)>1?[Qu(n,e),pa(r,e)]:Ju(r,n)>15?[th(n,e*15),ga(r,e*15)]:Ju(r,n)>1?[th(n,e),ga(r,e)]:[n,r]}function C$([t,e],n,r){const i=(e-t)*n,o=e<=0&&e+i>0?0:e+i;let s=t>=0&&t-i<0?0:t-i;if(r===j.LOG&&s<=0){if(t<=0)throw Error("Data must have values greater than 0 if log scale type is used.");s=t}return[s,o]}class $$ extends nn{constructor(){super(...arguments),this.curveTypes={curveLinear:nl,curveLinearClosed:kO,curveBasis:ZC,curveBasisClosed:XC,curveBasisOpen:qC,curveBundle:KC,curveCardinal:QC,curveCardinalClosed:JC,curveCardinalOpen:t$,curveCatmullRom:e$,curveCatmullRomClosed:n$,curveCatmullRomOpen:r$,curveMonotoneX:i$,curveMonotoneY:o$,curveNatural:s$,curveStep:a$,curveStepAfter:c$,curveStepBefore:l$}}getD3Curve(){let e="curveLinear";const n=this.model.getOptions().curve;if(n&&(typeof n=="string"?e=n:e=n.name),this.curveTypes[e]){let r=this.curveTypes[e];return n&&Object.keys(n).forEach(i=>{r[i]&&(r=r[i](n[i]))}),r}return console.warn(`The curve type '${e}' is invalid, using 'curveLinear' instead`),this.curveTypes.curveLinear}}class k$ extends nn{isZoomBarEnabled(){if(!this.services.cartesianScales||!y(this.model.getOptions(),"zoomBar","top","enabled"))return!1;this.services.cartesianScales.findDomainAndRangeAxes();const e=this.services.cartesianScales.getMainXAxisPosition(),n=y(this.model.getOptions(),"axes",e,"scaleType");return e===A.BOTTOM&&n===j.TIME}getZoomBarData(){const e=this.model.getZoomBarData();return e&&e.length>1?e:this.model.getDisplayData()}getDefaultZoomBarDomain(e){if(!this.services.zoom)throw new Error("Services zoom not defined");const n=e||this.services.zoom.getZoomBarData(),{cartesianScales:r}=this.services;if(!r)throw new Error("Services cartesianScales undefined");const i=r.getMainXAxisPosition(),o=r.getDomainIdentifier(),s=y(this.model.getOptions(),"axes",i,"domain");if(Array.isArray(s)&&s.length===2)return s;if(!i)throw new Error("Not defined: mainXAxisPosition");return r.extendsDomain(i,Yn(n,a=>a[o]))}handleDomainChange(e,n={dispatchEvent:!0}){var r;this.model.set({zoomDomain:e},{animate:!1}),n.dispatchEvent&&((r=this.services.events)==null||r.dispatchEvent(S.ZoomDomain.CHANGE,{newDomain:e}))}getZoomRatio(){return y(this.model.getOptions(),"zoomBar","zoomRatio")}filterDataForRangeAxis(e,n){var r;const i=this.model.get("zoomDomain"),o=Object.assign({stacked:!1},n),s=y(this.model.getOptions(),"zoomBar","updateRangeAxis");if(this.isZoomBarEnabled()&&s&&i){const a=o.stacked?"sharedStackKey":(r=this.services.cartesianScales)==null?void 0:r.getDomainIdentifier(),l=e.filter(c=>new Date(c[a])>=i[0]&&new Date(c[a])<=i[1]);if(l.length>0)return l}return e}zoomIn(e=this.getZoomRatio()){var n;const r=this.model.get("zoomDomain"),i=ce.handleWidth,o=(n=this.services.cartesianScales)==null?void 0:n.getMainXScale().copy();o.domain(this.getDefaultZoomBarDomain());const s=o(r[0]),a=o(r[1]);if(a-s<i+1)return;const l=o.range(),c=a-s,u=Math.min((l[1]-l[0])/2*(e/2),c/2);let h=s+u,f=a-u;h>=f&&(h=s+c/2-i/2,f=a-c/2+i/2);const d=[o.invert(h),o.invert(f)];(r[0].valueOf()!==d[0].valueOf()||r[1].valueOf()!==d[1].valueOf())&&this.handleDomainChange(d)}zoomOut(e=this.getZoomRatio()){const n=this.model.get("zoomDomain");if(!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const r=this.services.cartesianScales.getMainXScale().copy();r.domain(this.getDefaultZoomBarDomain());const i=r(n[0]),o=r(n[1]),s=r.range(),a=(s[1]-s[0])/2*(e/2),l=Math.max(i-a,s[0]),c=Math.min(o+a,s[1]),u=[r.invert(l),r.invert(c)];(n[0].valueOf()!==u[0].valueOf()||n[1].valueOf()!==u[1].valueOf())&&this.handleDomainChange(u)}resetZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();(e[0].valueOf()!==n[0].valueOf()||e[1].valueOf()!==n[1].valueOf())&&this.handleDomainChange(n)}isMinZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();if(!e||!n)return!1;const r=e[1].valueOf()-e[0].valueOf(),i=n[1].valueOf()-n[0].valueOf(),o=y(this.model.getOptions(),"zoomBar","minZoomRatio");return r/i<o}isMaxZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();return!!(e&&n&&e[0].valueOf()===n[0].valueOf()&&e[1].valueOf()===n[1].valueOf())}isEmptyState(){return this.getZoomBarData().length===0}isZoomBarLoading(e){return y(this.model.getOptions(),"zoomBar",e,"loading")}isZoomBarLocked(e){return y(this.model.getOptions(),"zoomBar",e,"locked")}}class D${constructor(e,n){this.components=[],this.services={canvasZoom:u$,domUtils:R,events:h$,files:d$,gradientUtils:js,transitions:f$},this.model=new xf(this.services)}init(e,n){this.model.set({holder:e},{skipUpdate:!0}),Object.keys(this.services).forEach(r=>{const i=this.services[r];this.services[r]=new i(this.model,this.services)}),this.services.events.addEventListener(S.Model.UPDATE,r=>{const i=!!y(r,"detail","animate");this.update(i)}),this.model.setData(n.data),this.services.events.addEventListener(S.Chart.RESIZE,()=>{this.update(!1)}),this.components=this.getComponents(),this.update()}getComponents(){return console.error("getComponents() method is not implemented"),[]}update(e=!0){if(!this.components)return;Object.keys(this.services).forEach(i=>{this.services[i].update()}),this.components.forEach(i=>i.render(e));const n=this.services.transitions.getPendingTransitions(),r=Object.keys(n).map(i=>n[i].end().catch(o=>o));Promise.all(r).then(()=>this.services.events.dispatchEvent(S.Chart.RENDER_FINISHED))}destroy(){this.components.forEach(e=>e.destroy()),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})}getChartComponents(e,n){const r=this.model.getOptions(),i=y(r,"toolbar","enabled"),o={id:"legend",components:[new up(this.model,this.services)],growth:yt.PREFERRED},s=y(r,"canvasZoom","enabled");s&&s===!0&&e.push(new fC(this.model,this.services));const a=!!this.model.getOptions().title,l={id:"title",components:[new cp(this.model,this.services)],growth:yt.STRETCH},c={id:"toolbar",components:[new rp(this.model,this.services)],growth:yt.PREFERRED},u={id:"header",components:[new Kn(this.model,this.services,[l,...i?[c]:[]],{direction:kt.ROW,alignItems:xo.CENTER})],growth:yt.PREFERRED},h={id:"graph-frame",components:e,growth:yt.STRETCH,renderType:y(n,"graphFrameRenderType")||ft.SVG},f=y(n,"excludeLegend")!==!0&&r.legend.enabled!==!1;let d=kt.COLUMN;if(f){const m=y(r,"legend","position");m==="left"?(d=kt.ROW,r.legend.orientation||(r.legend.orientation=Br.VERTICAL)):m==="right"?(d=kt.ROW_REVERSE,r.legend.orientation||(r.legend.orientation=Br.VERTICAL)):m==="bottom"&&(d=kt.COLUMN_REVERSE)}const p={id:"spacer",components:[new co(this.model,this.services)],growth:yt.PREFERRED},v={id:"full-frame",components:[new Kn(this.model,this.services,[...f?[o]:[],...f?[p]:[],h],{direction:d})],growth:yt.STRETCH},g=[];if(a||i){g.push(u);const m={id:"spacer",components:[new co(this.model,this.services,i?{size:15}:void 0)],growth:yt.PREFERRED};g.push(m)}return g.push(v),[new dp(this.model,this.services),new lp(this.model,this.services),new Kn(this.model,this.services,g,{direction:kt.COLUMN})]}}class Ip extends D${constructor(e,n){super(e,n),this.services=Object.assign(this.services,{cartesianScales:M$,curves:$$,zoom:k$}),this.model=new qT(this.services)}getAxisChartComponents(e,n){const r=this.model.getOptions(),i=y(r,"zoomBar",A.TOP,"enabled"),o=y(r,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const s=this.services.cartesianScales.getMainXAxisPosition(),a=y(r,"axes",s,"scaleType"),l=i&&s===A.BOTTOM&&a===j.TIME,c=this.services.zoom.isZoomBarLocked(A.TOP),u=!!this.model.getOptions().title,h={id:"title",components:[new cp(this.model,this.services)],growth:yt.STRETCH},f={id:"toolbar",components:[new rp(this.model,this.services)],growth:yt.PREFERRED},d={id:"header",components:[new Kn(this.model,this.services,[h,...o?[f]:[]],{direction:kt.ROW,alignItems:xo.CENTER})],growth:yt.PREFERRED},p={id:"legend",components:[new up(this.model,this.services)],growth:yt.PREFERRED};l&&!c&&e.push(new hp(this.model,this.services),new pC(this.model,this.services)),e.push(new mC(this.model,this.services)),e.push(new vC(this.model,this.services));const v={id:"graph-frame",components:e,growth:yt.STRETCH,renderType:ft.SVG},g=y(n,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1;let m=kt.COLUMN;if(g){const T=y(this.model.getOptions(),"legend","position");T===Dr.LEFT?(m=kt.ROW,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=Br.VERTICAL)):T===Dr.RIGHT?(m=kt.ROW_REVERSE,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=Br.VERTICAL)):T===Dr.BOTTOM&&(m=kt.COLUMN_REVERSE)}const _={id:"spacer",components:[new co(this.model,this.services)],growth:yt.PREFERRED},w={id:"full-frame",components:[new Kn(this.model,this.services,[...g?[p]:[],...g?[_]:[],v],{direction:m})],growth:yt.STRETCH},E={id:"zoom-bar",components:[new gC(this.model,this.services)],growth:yt.PREFERRED,renderType:ft.SVG},x=[];if(u||o){x.push(d);const T={id:"spacer",components:[new co(this.model,this.services,o?{size:15}:void 0)],growth:yt.PREFERRED};x.push(T)}return l&&x.push(E),x.push(w),[new yC(this.model,this.services),new lp(this.model,this.services),new Kn(this.model,this.services,x,{direction:kt.COLUMN})]}}sn.LINE+"",sn.SCATTER+"",sn.AREA+"",sn.STACKED_AREA+"",sn.SIMPLE_BAR+"",sn.GROUPED_BAR+"",sn.STACKED_BAR+"";class L$ extends Ip{constructor(e,n){super(e,n),this.model.setOptions(uf(cf.lineChart,n.options)),this.init(e,n)}getComponents(){const e=[new vp(this.model,this.services),new pp(this.model,this.services),new gp(this.model,this.services),new ki(this.model,this.services),new Ir(this.model,this.services,{handleThresholds:!0}),new EC(this.model,this.services),new cl(this.model,this.services)];return this.getAxisChartComponents(e)}}class R$ extends Ip{constructor(e,n){super(e,n),this.model.setOptions(uf(cf.simpleBarChart,n.options)),this.init(e,n)}getComponents(){const e=[new vp(this.model,this.services),new pp(this.model,this.services),new bp(this.model,this.services),new cl(this.model,this.services),new yp(this.model,this.services,{skeleton:Un.VERT_OR_HORIZ})];return this.getAxisChartComponents(e)}}function I$(t){let e,n=[{id:t[1]},{class:eh},t[2]],r={};for(let i=0;i<n.length;i+=1)r=qe(r,n[i]);return{c(){e=_t("div"),this.h()},l(i){e=wt(i,"DIV",{id:!0,class:!0}),zt(e).forEach(Rt),this.h()},h(){Ll(e,r)},m(i,o){nh(i,e,o),t[7](e)},p(i,[o]){Ll(e,r=va(n,[o&2&&{id:i[1]},{class:eh},o&4&&i[2]]))},i:Rl,o:Rl,d(i){i&&Rt(e),t[7](null)}}}const eh="cds--chart-holder";function P$(t,e,n){const r=["data","options","Chart","chart","ref","id"];let i=Qn(e,r),{data:o=[]}=e,{options:s={}}=e,{Chart:a}=e,{chart:l}=e,{ref:c}=e,{id:u=`chart-${Math.random().toString(36)}`}=e;const h=zp();rh(()=>{try{n(3,l=new a(c,{data:o,options:s})),h("load")}catch(d){console.error("Failed to initialize chart:",d)}}),Wp(()=>{if(l)try{l.model.setData(o),l.model.setOptions(s),h("update",{data:o,options:s})}catch(d){console.error("Failed to update chart:",d)}}),Yp(()=>{l&&(h("destroy"),l.components.forEach(d=>d.destroy()),l.model.set({destroyed:!0},{skipUpdate:!0}),n(3,l=void 0))});function f(d){Nr[d?"unshift":"push"](()=>{c=d,n(0,c)})}return t.$$set=d=>{e=qe(qe({},e),ma(d)),n(2,i=Qn(e,r)),"data"in d&&n(4,o=d.data),"options"in d&&n(5,s=d.options),"Chart"in d&&n(6,a=d.Chart),"chart"in d&&n(3,l=d.chart),"ref"in d&&n(0,c=d.ref),"id"in d&&n(1,u=d.id)},[c,u,i,l,o,s,a,f]}class Pp extends _o{constructor(e){super(),wo(this,e,P$,I$,bo,{data:4,options:5,Chart:6,chart:3,ref:0,id:1})}}function N$(t){let e,n,r,i;const o=[t[4],{Chart:R$},{options:t[2]},{data:t[3]}];function s(c){t[5](c)}function a(c){t[6](c)}let l={};for(let c=0;c<o.length;c+=1)l=qe(l,o[c]);return t[1]!==void 0&&(l.ref=t[1]),t[0]!==void 0&&(l.chart=t[0]),e=new Pp({props:l}),Nr.push(()=>Ri(e,"ref",s)),Nr.push(()=>Ri(e,"chart",a)),e.$on("load",t[7]),e.$on("update",t[8]),e.$on("destroy",t[9]),{c(){Ii(e.$$.fragment)},l(c){Pi(e.$$.fragment,c)},m(c,u){Ni(e,c,u),i=!0},p(c,[u]){const h=u&28?va(o,[u&16&&ih(c[4]),o[1],u&4&&{options:c[2]},u&8&&{data:c[3]}]):{};!n&&u&2&&(n=!0,h.ref=c[1],Li(()=>n=!1)),!r&&u&1&&(r=!0,h.chart=c[0],Li(()=>r=!1)),e.$set(h)},i(c){i||(Bi(e.$$.fragment,c),i=!0)},o(c){Ui(e.$$.fragment,c),i=!1},d(c){Hi(e,c)}}}function B$(t,e,n){const r=["options","data","chart","ref"];let i=Qn(e,r),{options:o}=e,{data:s}=e,{chart:a=void 0}=e,{ref:l=void 0}=e;function c(p){l=p,n(1,l)}function u(p){a=p,n(0,a)}function h(p){zn.call(this,t,p)}function f(p){zn.call(this,t,p)}function d(p){zn.call(this,t,p)}return t.$$set=p=>{e=qe(qe({},e),ma(p)),n(4,i=Qn(e,r)),"options"in p&&n(2,o=p.options),"data"in p&&n(3,s=p.data),"chart"in p&&n(0,a=p.chart),"ref"in p&&n(1,l=p.ref)},[a,l,o,s,i,c,u,h,f,d]}class U$ extends _o{constructor(e){super(),wo(this,e,B$,N$,bo,{options:2,data:3,chart:0,ref:1})}}function H$(t){let e,n,r,i;const o=[t[4],{Chart:L$},{options:t[2]},{data:t[3]}];function s(c){t[5](c)}function a(c){t[6](c)}let l={};for(let c=0;c<o.length;c+=1)l=qe(l,o[c]);return t[1]!==void 0&&(l.ref=t[1]),t[0]!==void 0&&(l.chart=t[0]),e=new Pp({props:l}),Nr.push(()=>Ri(e,"ref",s)),Nr.push(()=>Ri(e,"chart",a)),e.$on("load",t[7]),e.$on("update",t[8]),e.$on("destroy",t[9]),{c(){Ii(e.$$.fragment)},l(c){Pi(e.$$.fragment,c)},m(c,u){Ni(e,c,u),i=!0},p(c,[u]){const h=u&28?va(o,[u&16&&ih(c[4]),o[1],u&4&&{options:c[2]},u&8&&{data:c[3]}]):{};!n&&u&2&&(n=!0,h.ref=c[1],Li(()=>n=!1)),!r&&u&1&&(r=!0,h.chart=c[0],Li(()=>r=!1)),e.$set(h)},i(c){i||(Bi(e.$$.fragment,c),i=!0)},o(c){Ui(e.$$.fragment,c),i=!1},d(c){Hi(e,c)}}}function F$(t,e,n){const r=["options","data","chart","ref"];let i=Qn(e,r),{options:o}=e,{data:s}=e,{chart:a=void 0}=e,{ref:l=void 0}=e;function c(p){l=p,n(1,l)}function u(p){a=p,n(0,a)}function h(p){zn.call(this,t,p)}function f(p){zn.call(this,t,p)}function d(p){zn.call(this,t,p)}return t.$$set=p=>{e=qe(qe({},e),ma(p)),n(4,i=Qn(e,r)),"options"in p&&n(2,o=p.options),"data"in p&&n(3,s=p.data),"chart"in p&&n(0,a=p.chart),"ref"in p&&n(1,l=p.ref)},[a,l,o,s,i,c,u,h,f,d]}class V$ extends _o{constructor(e){super(),wo(this,e,F$,H$,bo,{options:2,data:3,chart:0,ref:1})}}function j$(t){let e,n,r,i="Dashboard",o,s,a,l,c,u="Most sold movies (Tickets)",h,f,d,p,v,g,m="Incomes ($)",_,w,E,x,T,O,M,P="Sold tickets",I,k,W="This month",L,H,at=t[2].length+"",nt,G,Q,X,lt="Total incomes",Y,tt,ot="This month",Ot,q,B=t[3].toFixed(2)+"",z,rt,$,U,Z,C="Staff Users",ht,K,St='<p class="text-center">View all</p>',Tt,V,st=t[4].length+"",Xt,qt,Ae;return f=new U$({props:{data:t[1],options:{theme:"g90",title:"",height:"400px",axes:{left:{mapsTo:"tickets",scaleType:"linear"},bottom:{mapsTo:"movie",scaleType:"labels"}}}}}),w=new V$({props:{data:t[0],options:{theme:"g90",title:"",height:"400px",axes:{left:{mapsTo:"value",scaleType:j.LINEAR},bottom:{mapsTo:"date",scaleType:j.TIME}}}}}),{c(){e=_t("div"),n=_t("div"),r=_t("h2"),r.textContent=i,o=se(),s=_t("div"),a=_t("div"),l=_t("div"),c=_t("p"),c.textContent=u,h=se(),Ii(f.$$.fragment),d=se(),p=_t("div"),v=_t("div"),g=_t("p"),g.textContent=m,_=se(),Ii(w.$$.fragment),E=se(),x=_t("div"),T=_t("div"),O=_t("div"),M=_t("p"),M.textContent=P,I=se(),k=_t("p"),k.textContent=W,L=se(),H=_t("p"),nt=ai(at),G=se(),Q=_t("div"),X=_t("p"),X.textContent=lt,Y=se(),tt=_t("p"),tt.textContent=ot,Ot=se(),q=_t("p"),z=ai(B),rt=ai(" $"),$=se(),U=_t("div"),Z=_t("p"),Z.textContent=C,ht=se(),K=_t("a"),K.innerHTML=St,Tt=se(),V=_t("p"),Xt=ai(st),this.h()},l(At){e=wt(At,"DIV",{class:!0});var Ht=zt(e);n=wt(Ht,"DIV",{class:!0});var oe=zt(n);r=wt(oe,"H2",{class:!0,"data-svelte-h":!0}),Ve(r)!=="svelte-hg57fd"&&(r.textContent=i),o=ae(oe),s=wt(oe,"DIV",{class:!0});var ee=zt(s);a=wt(ee,"DIV",{class:!0});var Be=zt(a);l=wt(Be,"DIV",{class:!0});var cn=zt(l);c=wt(cn,"P",{class:!0,"data-svelte-h":!0}),Ve(c)!=="svelte-10ocnw2"&&(c.textContent=u),h=ae(cn),Pi(f.$$.fragment,cn),cn.forEach(Rt),Be.forEach(Rt),d=ae(ee),p=wt(ee,"DIV",{class:!0});var hr=zt(p);v=wt(hr,"DIV",{class:!0});var un=zt(v);g=wt(un,"P",{class:!0,"data-svelte-h":!0}),Ve(g)!=="svelte-100enp3"&&(g.textContent=m),_=ae(un),Pi(w.$$.fragment,un),un.forEach(Rt),hr.forEach(Rt),ee.forEach(Rt),oe.forEach(Rt),E=ae(Ht),x=wt(Ht,"DIV",{class:!0});var kn=zt(x);T=wt(kn,"DIV",{class:!0});var Ue=zt(T);O=wt(Ue,"DIV",{class:!0});var ye=zt(O);M=wt(ye,"P",{class:!0,"data-svelte-h":!0}),Ve(M)!=="svelte-vusuq5"&&(M.textContent=P),I=ae(ye),k=wt(ye,"P",{class:!0,"data-svelte-h":!0}),Ve(k)!=="svelte-1hip7be"&&(k.textContent=W),L=ae(ye),H=wt(ye,"P",{class:!0});var hn=zt(H);nt=li(hn,at),hn.forEach(Rt),ye.forEach(Rt),G=ae(Ue),Q=wt(Ue,"DIV",{class:!0});var Ft=zt(Q);X=wt(Ft,"P",{class:!0,"data-svelte-h":!0}),Ve(X)!=="svelte-6v91ac"&&(X.textContent=lt),Y=ae(Ft),tt=wt(Ft,"P",{class:!0,"data-svelte-h":!0}),Ve(tt)!=="svelte-1hip7be"&&(tt.textContent=ot),Ot=ae(Ft),q=wt(Ft,"P",{class:!0});var Ce=zt(q);z=li(Ce,B),rt=li(Ce," $"),Ce.forEach(Rt),Ft.forEach(Rt),$=ae(Ue),U=wt(Ue,"DIV",{class:!0});var $e=zt(U);Z=wt($e,"P",{class:!0,"data-svelte-h":!0}),Ve(Z)!=="svelte-1f4byhc"&&(Z.textContent=C),ht=ae($e),K=wt($e,"A",{href:!0,class:!0,"data-svelte-h":!0}),Ve(K)!=="svelte-11fiv4r"&&(K.innerHTML=St),Tt=ae($e),V=wt($e,"P",{class:!0});var Dn=zt(V);Xt=li(Dn,st),Dn.forEach(Rt),$e.forEach(Rt),Ue.forEach(Rt),kn.forEach(Rt),Ht.forEach(Rt),this.h()},h(){bt(r,"class","h1 text-start mb-4 w-full"),bt(c,"class","text-center h3 font-bold"),bt(l,"class","card mx-4 mt-4 p-4 shadow-lg"),bt(a,"class","lg:w-[50%]"),bt(g,"class","text-center h3 font-bold"),bt(v,"class","card mx-4 p-4 mt-4 shadow-lg"),bt(p,"class","lg:w-[50%]"),bt(s,"class","flex lg:flex-row flex-col"),bt(n,"class","p-4 pt-8 mx-4 w-[90%] lg:w-full mt-4 lg:p-10 flex flex-col"),bt(M,"class","text-center h3 font-bold"),bt(k,"class","text-center"),bt(H,"class","text-center h2 font-bold my-4"),bt(O,"class","card mx-4 lg:w-1/3 shadow-lg p-2 lg:p-3 my-2 mt-0 lg:my-0"),bt(X,"class","text-center h3 font-bold"),bt(tt,"class","text-center"),bt(q,"class","text-center h2 font-bold my-4"),bt(Q,"class","card mx-4 lg:w-1/3 shadow-lg p-2 lg:p-3 my-2 lg:my-0"),bt(Z,"class","text-center h3 font-bold"),bt(K,"href","/dashboard/staff"),bt(K,"class","anchor no-underline"),bt(V,"class","text-center h2 font-bold my-4"),bt(U,"class","card mx-4 lg:w-1/3 shadow-lg p-2 lg:p-3 my-2 lg:my-0"),bt(T,"class","w-full flex flex-col lg:flex-row mb-5"),bt(x,"class","px-4 mx-4 w-[90%] lg:w-full lg:px-10 flex flex-col lg:flex-row"),bt(e,"class","container h-full mx-auto flex justify-startitems-start align-top flex-col")},m(At,Ht){nh(At,e,Ht),et(e,n),et(n,r),et(n,o),et(n,s),et(s,a),et(a,l),et(l,c),et(l,h),Ni(f,l,null),et(s,d),et(s,p),et(p,v),et(v,g),et(v,_),Ni(w,v,null),et(e,E),et(e,x),et(x,T),et(T,O),et(O,M),et(O,I),et(O,k),et(O,L),et(O,H),et(H,nt),et(T,G),et(T,Q),et(Q,X),et(Q,Y),et(Q,tt),et(Q,Ot),et(Q,q),et(q,z),et(q,rt),et(T,$),et(T,U),et(U,Z),et(U,ht),et(U,K),et(U,Tt),et(U,V),et(V,Xt),Ae=!0},p(At,[Ht]){const oe={};Ht&2&&(oe.data=At[1]),f.$set(oe);const ee={};Ht&1&&(ee.data=At[0]),w.$set(ee),(!Ae||Ht&4)&&at!==(at=At[2].length+"")&&zo(nt,at),(!Ae||Ht&8)&&B!==(B=At[3].toFixed(2)+"")&&zo(z,B),(!Ae||Ht&16)&&st!==(st=At[4].length+"")&&zo(Xt,st)},i(At){Ae||(Bi(f.$$.fragment,At),Bi(w.$$.fragment,At),At&&(qt||Zp(()=>{qt=Xp(e,qp,{}),qt.start()})),Ae=!0)},o(At){Ui(f.$$.fragment,At),Ui(w.$$.fragment,At),Ae=!1},d(At){At&&Rt(e),Hi(f),Hi(w)}}}function G$(t,e,n){let r,i,o,s,a;Il(t,Kp,c=>n(2,s=c)),Il(t,Qp,c=>n(4,a=c));let l;return rh(async()=>{await Jp(),await tg(),await eg()}),t.$$.update=()=>{var c,u,h,f;if(t.$$.dirty&47&&s.length){for(let d of s)(c=d==null?void 0:d.session)!=null&&c.movie_name&&(n(5,l=r.find(p=>{var v;return p.movie==((v=d==null?void 0:d.session)==null?void 0:v.movie_name)})),l?n(5,l.tickets+=(f=d==null?void 0:d.tickets)==null?void 0:f.length,l):n(1,r=[...r,{movie:(u=d==null?void 0:d.session)==null?void 0:u.movie_name,tickets:(h=d==null?void 0:d.tickets)==null?void 0:h.length}]));n(0,i=s.reduce((d,p)=>{const v=new Date(p==null?void 0:p.created_at),g=d.find(m=>Pl(m.date).date()===Pl(v).date());return g?g.value+=1:d.push({date:v,value:1}),d},[])),i.sort((d,p)=>Math.sign(d.date-p.date));for(let d of s){let p=new Date(d==null?void 0:d.created_at).getMonth(),v=new Date(d==null?void 0:d.created_at).getFullYear();p==new Date().getMonth()&&v==new Date().getFullYear()&&n(3,o+=d==null?void 0:d.total)}}},n(1,r=[]),n(0,i=[]),n(3,o=0),[i,r,s,o,a,l]}class tk extends _o{constructor(e){super(),wo(this,e,G$,j$,bo,{})}}export{tk as component};
