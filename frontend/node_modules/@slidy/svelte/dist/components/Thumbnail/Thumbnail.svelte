<script context="module">
	import Core from "../Core/Core.svelte";
	import Image from "../Image/Image.svelte";
	import { createEventDispatcher, getContext } from "svelte";
	import { format } from "../../assets/scripts/utils";
</script>

<script>
	export let active = 0;
	export let animation = void 0;
	export let background = false;
	export let clamp = 0;
	export let duration = 250;
	export let easing = (t) => t;
	export let getImgSrc = (item) => item.src ?? "";
	export let gravity = 0.75;
	export let indent = 0;
	export let index = 0;
	export let loop = false;
	export let sensity = 5;
	export let slides = [];
	export let snap = void 0;
	const dispatch = createEventDispatcher();
	const classNames = getContext("classNames");
	const i18n = getContext("i18n");
</script>

<Core {animation} {clamp} {duration} {easing} {gravity} {indent} {index} {loop} {sensity} {snap} tag="nav" axis="x" className={classNames?.thumbnails}>
	{#each slides as item, i (item.id ?? getImgSrc(item) ?? i)}
		{@const title = format(i18n.slideN, i + 1)}
		<button
			aria-current={i === active ? "true" : undefined}
			aria-label={title}
			aria-roledescription="slide"
			class={classNames.thumbnail}
			class:active={i === active}
			class:bg={background}
			style:--_slidy-slide-bg={background ? `url(${getImgSrc(item)})` : ""}
			{title}
			on:click={() => dispatch("select", { index: i })}
		>
			{#if !background}
				<Image src={getImgSrc(item)} {...item} />
			{/if}
		</button>
	{/each}
</Core>
